{
  "version": 3,
  "sources": ["../../node_modules/@evolu/react/dist/useEvolu.js", "../../node_modules/@evolu/react/dist/EvoluContext.js", "../../node_modules/@evolu/react/dist/createUseEvolu.js", "../../node_modules/@evolu/react/dist/EvoluProvider.js", "../../node_modules/@evolu/react/dist/useEvoluError.js", "../../node_modules/@evolu/react/dist/useOwner.js", "../../node_modules/@evolu/react/dist/useQueries.js", "../../node_modules/@evolu/react/dist/useQuerySubscription.js", "../../node_modules/@evolu/react/dist/useIsSsr.js", "../../node_modules/@evolu/react/dist/useQuery.js"],
  "sourcesContent": ["import { useContext } from \"react\";\nimport { EvoluContext } from \"./EvoluContext.js\";\n/**\n * React Hook returning a generic instance of {@link Evolu}.\n *\n * This is intended for internal usage. Applications should use\n * {@link createUseEvolu}, which provides a correctly typed instance.\n */\nexport const useEvolu = () => {\n    const evolu = useContext(EvoluContext);\n    if (evolu == null) {\n        throw new Error(\"Could not find Evolu context value. Ensure the component is wrapped in an <EvoluProvider>.\");\n    }\n    return evolu;\n};\n", "import { createContext } from \"react\";\nexport const EvoluContext = createContext(null);\n", "import { useEvolu } from \"./useEvolu.js\";\n/**\n * Creates a typed React Hook returning an instance of {@link Evolu}.\n *\n * ### Example\n *\n * ```ts\n * const useEvolu = createUseEvolu(evolu);\n * const { insert, update } = useEvolu();\n * ```\n */\nexport const createUseEvolu = (\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nevolu) => useEvolu;\n", "\"use client\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { EvoluContext } from \"./EvoluContext.js\";\nexport const EvoluProvider = ({ children, value, }) => _jsx(EvoluContext, { value: value, children: children });\n", "import { constNull } from \"@evolu/common\";\nimport { useSyncExternalStore } from \"react\";\nimport { useEvolu } from \"./useEvolu.js\";\n/** Subscribe to {@link EvoluError} changes. */\nexport const useEvoluError = () => {\n    const evolu = useEvolu();\n    return useSyncExternalStore(evolu.subscribeError, evolu.getError, constNull);\n};\n", "import { useEffect } from \"react\";\nimport { useEvolu } from \"./useEvolu.js\";\n/**\n * React Hook for Evolu `useOwner` method.\n *\n * Using an owner means syncing it with its transports, or the transports\n * defined in Evolu config if the owner has no transports defined.\n */\nexport const useOwner = (owner) => {\n    const evolu = useEvolu();\n    useEffect(() => {\n        if (owner == null)\n            return;\n        return evolu.useOwner(owner);\n    }, [evolu, owner]);\n};\n", "import { use, useRef } from \"react\";\nimport { useEvolu } from \"./useEvolu.js\";\nimport { useQuerySubscription } from \"./useQuerySubscription.js\";\nimport { useIsSsr } from \"./useIsSsr.js\";\n/**\n * The same as {@link useQuery}, but for many queries.\n *\n * The number of queries must remain stable across renders.\n */\nexport const useQueries = (queries, options = {}) => {\n    const evolu = useEvolu();\n    const once = useRef(options).current.once;\n    const allQueries = once ? queries.concat(once) : queries;\n    const wasSSR = useIsSsr();\n    if (wasSSR) {\n        if (!options.promises)\n            void evolu.loadQueries(allQueries);\n    }\n    else {\n        if (options.promises)\n            options.promises.map(use);\n        // No waterfall: loadQuery batches all queries in the same microtask,\n        // so React suspends once and all promises resolve together.\n        else\n            evolu.loadQueries(allQueries).map(use);\n    }\n    return allQueries.map((query, i) => \n    // Safe until the number of queries is stable.\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useQuerySubscription(query, { once: i > queries.length - 1 }));\n};\n", "import { constVoid } from \"@evolu/common\";\nimport { emptyRows } from \"@evolu/common/local-first\";\nimport { useEffect, useMemo, useRef, useSyncExternalStore } from \"react\";\nimport { useEvolu } from \"./useEvolu.js\";\n/** Subscribe to {@link Query} {@link QueryRows} changes. */\nexport const useQuerySubscription = (query, options = {}) => {\n    const evolu = useEvolu();\n    // useRef to not break \"rules-of-hooks\"\n    const { once } = useRef(options).current;\n    if (once) {\n        /* eslint-disable react-hooks/rules-of-hooks */\n        useEffect(\n        // No useSyncExternalStore, no unnecessary updates.\n        () => evolu.subscribeQuery(query)(constVoid), [evolu, query]);\n        return evolu.getQueryRows(query);\n    }\n    return useSyncExternalStore(useMemo(() => evolu.subscribeQuery(query), [evolu, query]), useMemo(() => () => evolu.getQueryRows(query), [evolu, query]), () => emptyRows);\n};\n", "import { constFalse, constTrue } from \"@evolu/common\";\nimport { useSyncExternalStore } from \"react\";\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst emptySubscribe = () => () => { };\n/**\n * Avoiding hydration mismatches.\n *\n * @see https://kurtextrem.de/posts/react-uses-hydration\n */\nexport const useIsSsr = () => {\n    // TODO: Consider useDeferredValue(isSSRSync);\n    return useSyncExternalStore(emptySubscribe, constFalse, constTrue);\n};\n", "import { use } from \"react\";\nimport { useEvolu } from \"./useEvolu.js\";\nimport { useQuerySubscription } from \"./useQuerySubscription.js\";\nimport { useIsSsr } from \"./useIsSsr.js\";\n/**\n * Load and subscribe to the Query, and return an object with `rows` and `row`\n * properties that are automatically updated when data changes.\n *\n * Note that {@link useQuery} uses React Suspense. It means every usage of\n * {@link useQuery} blocks rendering until loading is completed. To avoid loading\n * waterfall with more queries, use {@link useQueries}.\n *\n * The `promise` option allows preloading queries before rendering, which can be\n * useful for complex queries that might take noticeable time even with local\n * data. However, this is rarely needed as local queries are typically fast.\n *\n * ### Example\n *\n * ```ts\n * // Get all rows.\n * const rows = useQuery(allTodos);\n *\n * // Get rows for a specific todo (the first row can be null).\n * const rows = useQuery(todoById(1));\n *\n * // Get all rows, but without subscribing to changes.\n * const rows = useQuery(allTodos, { once: true });\n *\n * // Preload a query (rarely needed).\n * const allTodosPromise = evolu.loadQuery(allTodos);\n * const rows = useQuery(allTodos, { promise: allTodosPromise });\n * ```\n */\nexport const useQuery = (query, options = {}) => {\n    const evolu = useEvolu();\n    const isSSR = useIsSsr();\n    if (isSSR) {\n        if (!options.promise)\n            void evolu.loadQuery(query);\n    }\n    else {\n        use(options.promise ?? evolu.loadQuery(query));\n    }\n    return useQuerySubscription(query, options);\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA,IAAAA,gBAA2B;;;ACA3B,mBAA8B;AACvB,IAAM,mBAAe,4BAAc,IAAI;;;ADOvC,IAAM,WAAW,MAAM;AAC1B,QAAM,YAAQ,0BAAW,YAAY;AACrC,MAAI,SAAS,MAAM;AACf,UAAM,IAAI,MAAM,4FAA4F;AAAA,EAChH;AACA,SAAO;AACX;;;AEHO,IAAM,iBAAiB,CAE9B,UAAU;;;ACZV,yBAA4B;AAErB,IAAM,gBAAgB,CAAC,EAAE,UAAU,MAAO,UAAM,mBAAAC,KAAK,cAAc,EAAE,OAAc,SAAmB,CAAC;;;ACF9G,IAAAC,gBAAqC;AAG9B,IAAM,gBAAgB,MAAM;AAC/B,QAAM,QAAQ,SAAS;AACvB,aAAO,oCAAqB,MAAM,gBAAgB,MAAM,UAAU,SAAS;AAC/E;;;ACPA,IAAAC,gBAA0B;AAQnB,IAAM,WAAW,CAAC,UAAU;AAC/B,QAAM,QAAQ,SAAS;AACvB,+BAAU,MAAM;AACZ,QAAI,SAAS;AACT;AACJ,WAAO,MAAM,SAAS,KAAK;AAAA,EAC/B,GAAG,CAAC,OAAO,KAAK,CAAC;AACrB;;;ACfA,IAAAC,gBAA4B;;;ACE5B,IAAAC,gBAAiE;AAG1D,IAAM,uBAAuB,CAAC,OAAO,UAAU,CAAC,MAAM;AACzD,QAAM,QAAQ,SAAS;AAEvB,QAAM,EAAE,KAAK,QAAI,sBAAO,OAAO,EAAE;AACjC,MAAI,MAAM;AAEN;AAAA;AAAA,MAEA,MAAM,MAAM,eAAe,KAAK,EAAE,SAAS;AAAA,MAAG,CAAC,OAAO,KAAK;AAAA,IAAC;AAC5D,WAAO,MAAM,aAAa,KAAK;AAAA,EACnC;AACA,aAAO,wCAAqB,uBAAQ,MAAM,MAAM,eAAe,KAAK,GAAG,CAAC,OAAO,KAAK,CAAC,OAAG,uBAAQ,MAAM,MAAM,MAAM,aAAa,KAAK,GAAG,CAAC,OAAO,KAAK,CAAC,GAAG,MAAM,SAAS;AAC3K;;;AChBA,IAAAC,gBAAqC;AAErC,IAAM,iBAAiB,MAAM,MAAM;AAAE;AAM9B,IAAM,WAAW,MAAM;AAE1B,aAAO,oCAAqB,gBAAgB,YAAY,SAAS;AACrE;;;AFHO,IAAM,aAAa,CAAC,SAAS,UAAU,CAAC,MAAM;AACjD,QAAM,QAAQ,SAAS;AACvB,QAAM,WAAO,sBAAO,OAAO,EAAE,QAAQ;AACrC,QAAM,aAAa,OAAO,QAAQ,OAAO,IAAI,IAAI;AACjD,QAAM,SAAS,SAAS;AACxB,MAAI,QAAQ;AACR,QAAI,CAAC,QAAQ;AACT,WAAK,MAAM,YAAY,UAAU;AAAA,EACzC,OACK;AACD,QAAI,QAAQ;AACR,cAAQ,SAAS,IAAI,iBAAG;AAAA;AAIxB,YAAM,YAAY,UAAU,EAAE,IAAI,iBAAG;AAAA,EAC7C;AACA,SAAO,WAAW,IAAI,CAAC,OAAO;AAAA;AAAA;AAAA,IAG9B,qBAAqB,OAAO,EAAE,MAAM,IAAI,QAAQ,SAAS,EAAE,CAAC;AAAA,GAAC;AACjE;;;AG9BA,IAAAC,gBAAoB;AAiCb,IAAM,WAAW,CAAC,OAAO,UAAU,CAAC,MAAM;AAC7C,QAAM,QAAQ,SAAS;AACvB,QAAM,QAAQ,SAAS;AACvB,MAAI,OAAO;AACP,QAAI,CAAC,QAAQ;AACT,WAAK,MAAM,UAAU,KAAK;AAAA,EAClC,OACK;AACD,2BAAI,QAAQ,WAAW,MAAM,UAAU,KAAK,CAAC;AAAA,EACjD;AACA,SAAO,qBAAqB,OAAO,OAAO;AAC9C;",
  "names": ["import_react", "_jsx", "import_react", "import_react", "import_react", "import_react", "import_react", "import_react"]
}
