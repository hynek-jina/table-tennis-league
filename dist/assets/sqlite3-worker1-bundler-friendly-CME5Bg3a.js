(function(){"use strict";var Ve=async function(Ae={}){var he,u=Ae,Te=typeof window=="object",ye=typeof WorkerGlobalScope<"u";typeof process=="object"&&process.versions?.node&&process.type!="renderer";const Fe=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,Fe.debugModule("globalThis.location =",globalThis.location);var Ue="./this.program",st=(e,t)=>{throw t},xt=self.location.href,Ge="";function Tt(e){return u.locateFile?u.locateFile(e,Ge):Ge+e}var $e,ze;if(Te||ye){try{Ge=new URL(".",xt).href}catch{}ye&&(ze=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),$e=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}var Qe=console.log.bind(console),we=console.error.bind(console),De,Ke=!1,ot,lt,Ee,me,Se,Re,ie,pe,be,at=!1;function ct(){var e=Ee.buffer;u.HEAP8=me=new Int8Array(e),u.HEAP16=Re=new Int16Array(e),u.HEAPU8=Se=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAP32=ie=new Int32Array(e),u.HEAPU32=pe=new Uint32Array(e),u.HEAP64=be=new BigInt64Array(e),u.HEAPU64=new BigUint64Array(e)}function Ft(){if(u.wasmMemory)Ee=u.wasmMemory;else{var e=u.INITIAL_MEMORY||16777216;Ee=new WebAssembly.Memory({initial:e/65536,maximum:32768})}ct()}function Ot(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Qt(u.preRun.shift());ft(pt)}function Pt(){at=!0,!u.noFSInit&&!l.initialized&&l.init(),Le.__wasm_call_ctors(),l.ignorePermissions=!1}function Lt(){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)zt(u.postRun.shift());ft(dt)}var Ie=0,Ne=null;function _t(e){Ie++,u.monitorRunDependencies?.(Ie)}function Je(e){if(Ie--,u.monitorRunDependencies?.(Ie),Ie==0&&Ne){var t=Ne;Ne=null,t()}}function ut(e){u.onAbort?.(e),e="Aborted("+e+")",we(e),Ke=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw lt?.(t),t}var Xe;function Ct(){return u.locateFile?Tt("sqlite3.wasm"):new URL("/assets/sqlite3-B7imZ2XV.wasm",self.location.href).href}function Dt(e){if(e==Xe&&De)return new Uint8Array(De);if(ze)return ze(e);throw"both async and sync fetching of the wasm failed"}async function Rt(e){if(!De)try{var t=await $e(e);return new Uint8Array(t)}catch{}return Dt(e)}async function Nt(e,t){try{var i=await Rt(e),n=await WebAssembly.instantiate(i,t);return n}catch(r){we(`failed to asynchronously prepare wasm: ${r}`),ut(r)}}async function Mt(e,t,i){if(!e&&typeof WebAssembly.instantiateStreaming=="function")try{var n=fetch(t,{credentials:"same-origin"}),r=await WebAssembly.instantiateStreaming(n,i);return r}catch(o){we(`wasm streaming compile failed: ${o}`),we("falling back to ArrayBuffer instantiation")}return Nt(t,i)}function jt(){return{env:Et,wasi_snapshot_preview1:Et}}async function Bt(){function e(o,h){return Le=o.exports,Xn(Le),Je(),Le}_t();function t(o){return e(o.instance)}var i=jt();if(u.instantiateWasm)return new Promise((o,h)=>{u.instantiateWasm(i,(g,L)=>{o(e(g))})});Xe??=Ct();var n=await Mt(De,Xe,i),r=t(n);return r}class Ut{name="ExitStatus";constructor(t){this.message=`Program terminated with exit(${t})`,this.status=t}}var ft=e=>{for(;e.length>0;)e.shift()(u)},dt=[],zt=e=>dt.push(e),pt=[],Qt=e=>pt.push(e),ht=!0,ce={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var i=0,n=e.length-1;n>=0;n--){var r=e[n];r==="."?e.splice(n,1):r===".."?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i;i--)e.unshift("..");return e},normalize:e=>{var t=ce.isAbs(e),i=e.slice(-1)==="/";return e=ce.normalizeArray(e.split("/").filter(n=>!!n),!t).join("/"),!e&&!t&&(e="."),e&&i&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=ce.splitPath(e),i=t[0],n=t[1];return!i&&!n?".":(n&&(n=n.slice(0,-1)),i+n)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>ce.normalize(e.join("/")),join2:(e,t)=>ce.normalize(e+"/"+t)},Wt=()=>e=>crypto.getRandomValues(e),Ye=e=>{(Ye=Wt())(e)},Oe={resolve:(...e)=>{for(var t="",i=!1,n=e.length-1;n>=-1&&!i;n--){var r=n>=0?e[n]:l.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,i=ce.isAbs(r)}return t=ce.normalizeArray(t.split("/").filter(o=>!!o),!i).join("/"),(i?"/":"")+t||"."},relative:(e,t)=>{e=Oe.resolve(e).slice(1),t=Oe.resolve(t).slice(1);function i(C){for(var z=0;z<C.length&&C[z]==="";z++);for(var W=C.length-1;W>=0&&C[W]==="";W--);return z>W?[]:C.slice(z,W-z+1)}for(var n=i(e.split("/")),r=i(t.split("/")),o=Math.min(n.length,r.length),h=o,g=0;g<o;g++)if(n[g]!==r[g]){h=g;break}for(var L=[],g=h;g<n.length;g++)L.push("..");return L=L.concat(r.slice(h)),L.join("/")}},gt=new TextDecoder,Me=(e,t=0,i=NaN)=>{for(var n=t+i,r=t;e[r]&&!(r>=n);)++r;return gt.decode(e.buffer?e.subarray(t,r):new Uint8Array(e.slice(t,r)))},Ze=[],We=e=>{for(var t=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++i):t+=3}return t},mt=(e,t,i,n)=>{if(!(n>0))return 0;for(var r=i,o=i+n-1,h=0;h<e.length;++h){var g=e.codePointAt(h);if(g<=127){if(i>=o)break;t[i++]=g}else if(g<=2047){if(i+1>=o)break;t[i++]=192|g>>6,t[i++]=128|g&63}else if(g<=65535){if(i+2>=o)break;t[i++]=224|g>>12,t[i++]=128|g>>6&63,t[i++]=128|g&63}else{if(i+3>=o)break;t[i++]=240|g>>18,t[i++]=128|g>>12&63,t[i++]=128|g>>6&63,t[i++]=128|g&63,h++}}return t[i]=0,i-r},et=(e,t,i)=>{var n=We(e)+1,r=new Array(n),o=mt(e,r,0,r.length);return r.length=o,r},Ht=()=>{if(!Ze.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;Ze=et(e)}return Ze.shift()},ke={ttys:[],init(){},shutdown(){},register(e,t){ke.ttys[e]={input:[],output:[],ops:t},l.registerDevice(e,ke.stream_ops)},stream_ops:{open(e){var t=ke.ttys[e.node.rdev];if(!t)throw new l.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,i,n,r){if(!e.tty||!e.tty.ops.get_char)throw new l.ErrnoError(60);for(var o=0,h=0;h<n;h++){var g;try{g=e.tty.ops.get_char(e.tty)}catch{throw new l.ErrnoError(29)}if(g===void 0&&o===0)throw new l.ErrnoError(6);if(g==null)break;o++,t[i+h]=g}return o&&(e.node.atime=Date.now()),o},write(e,t,i,n,r){if(!e.tty||!e.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,t[i+o])}catch{throw new l.ErrnoError(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),o}},default_tty_ops:{get_char(e){return Ht()},put_char(e,t){t===null||t===10?(Qe(Me(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output?.length>0&&(Qe(Me(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,i){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(we(Me(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output?.length>0&&(we(Me(e.output)),e.output=[])}}},Vt=(e,t)=>Se.fill(0,e,e+t),yt=(e,t)=>Math.ceil(e/t)*t,bt=e=>{e=yt(e,65536);var t=At(65536,e);return t&&Vt(t,e),t},se={ops_table:null,mount(e){return se.createNode(null,"/",16895,0)},createNode(e,t,i,n){if(l.isBlkdev(i)||l.isFIFO(i))throw new l.ErrnoError(63);se.ops_table||={dir:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,lookup:se.node_ops.lookup,mknod:se.node_ops.mknod,rename:se.node_ops.rename,unlink:se.node_ops.unlink,rmdir:se.node_ops.rmdir,readdir:se.node_ops.readdir,symlink:se.node_ops.symlink},stream:{llseek:se.stream_ops.llseek}},file:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:{llseek:se.stream_ops.llseek,read:se.stream_ops.read,write:se.stream_ops.write,mmap:se.stream_ops.mmap,msync:se.stream_ops.msync}},link:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,readlink:se.node_ops.readlink},stream:{}},chrdev:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:l.chrdev_stream_ops}};var r=l.createNode(e,t,i,n);return l.isDir(r.mode)?(r.node_ops=se.ops_table.dir.node,r.stream_ops=se.ops_table.dir.stream,r.contents={}):l.isFile(r.mode)?(r.node_ops=se.ops_table.file.node,r.stream_ops=se.ops_table.file.stream,r.usedBytes=0,r.contents=null):l.isLink(r.mode)?(r.node_ops=se.ops_table.link.node,r.stream_ops=se.ops_table.link.stream):l.isChrdev(r.mode)&&(r.node_ops=se.ops_table.chrdev.node,r.stream_ops=se.ops_table.chrdev.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.contents[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var i=e.contents?e.contents.length:0;if(!(i>=t)){var n=1024*1024;t=Math.max(t,i*(i<n?2:1.125)>>>0),i!=0&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var i=e.contents;e.contents=new Uint8Array(t),i&&e.contents.set(i.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=l.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,l.isDir(e.mode)?t.size=4096:l.isFile(e.mode)?t.size=e.usedBytes:l.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){for(const i of["mode","atime","mtime","ctime"])t[i]!=null&&(e[i]=t[i]);t.size!==void 0&&se.resizeFileStorage(e,t.size)},lookup(e,t){throw se.doesNotExistError},mknod(e,t,i,n){return se.createNode(e,t,i,n)},rename(e,t,i){var n;try{n=l.lookupNode(t,i)}catch{}if(n){if(l.isDir(e.mode))for(var r in n.contents)throw new l.ErrnoError(55);l.hashRemoveNode(n)}delete e.parent.contents[e.name],t.contents[i]=e,e.name=i,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var i=l.lookupNode(e,t);for(var n in i.contents)throw new l.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,t,i){var n=se.createNode(e,t,41471,0);return n.link=i,n},readlink(e){if(!l.isLink(e.mode))throw new l.ErrnoError(28);return e.link}},stream_ops:{read(e,t,i,n,r){var o=e.node.contents;if(r>=e.node.usedBytes)return 0;var h=Math.min(e.node.usedBytes-r,n);if(h>8&&o.subarray)t.set(o.subarray(r,r+h),i);else for(var g=0;g<h;g++)t[i+g]=o[r+g];return h},write(e,t,i,n,r,o){if(t.buffer===me.buffer&&(o=!1),!n)return 0;var h=e.node;if(h.mtime=h.ctime=Date.now(),t.subarray&&(!h.contents||h.contents.subarray)){if(o)return h.contents=t.subarray(i,i+n),h.usedBytes=n,n;if(h.usedBytes===0&&r===0)return h.contents=t.slice(i,i+n),h.usedBytes=n,n;if(r+n<=h.usedBytes)return h.contents.set(t.subarray(i,i+n),r),n}if(se.expandFileStorage(h,r+n),h.contents.subarray&&t.subarray)h.contents.set(t.subarray(i,i+n),r);else for(var g=0;g<n;g++)h.contents[r+g]=t[i+g];return h.usedBytes=Math.max(h.usedBytes,r+n),n},llseek(e,t,i){var n=t;if(i===1?n+=e.position:i===2&&l.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new l.ErrnoError(28);return n},mmap(e,t,i,n,r){if(!l.isFile(e.node.mode))throw new l.ErrnoError(43);var o,h,g=e.node.contents;if(!(r&2)&&g&&g.buffer===me.buffer)h=!1,o=g.byteOffset;else{if(h=!0,o=bt(t),!o)throw new l.ErrnoError(48);g&&((i>0||i+t<g.length)&&(g.subarray?g=g.subarray(i,i+t):g=Array.prototype.slice.call(g,i,i+t)),me.set(g,o))}return{ptr:o,allocated:h}},msync(e,t,i,n,r){return se.stream_ops.write(e,t,0,n,i,!1),0}}},Gt=async e=>{var t=await $e(e);return new Uint8Array(t)},$t=(...e)=>l.createDataFile(...e),qt=[],Kt=(e,t,i,n)=>{typeof Browser<"u"&&Browser.init();var r=!1;return qt.forEach(o=>{r||o.canHandle(t)&&(o.handle(e,t,i,n),r=!0)}),r},Jt=(e,t,i,n,r,o,h,g,L,C)=>{var z=t?Oe.resolve(ce.join2(e,t)):e;function W(x){function E(M){C?.(),g||$t(e,t,M,n,r,L),o?.(),Je()}Kt(x,z,E,()=>{h?.(),Je()})||E(x)}_t(),typeof i=="string"?Gt(i).then(W,h):W(i)},Xt=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},i=t[e];if(typeof i>"u")throw new Error(`Unknown file open mode: ${e}`);return i},tt=(e,t)=>{var i=0;return e&&(i|=365),t&&(i|=146),i},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,t,i,n){e||(e=this),this.parent=e,this.mount=e.mount,this.id=l.nextInode++,this.name=t,this.mode=i,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return l.isDir(this.mode)}get isDevice(){return l.isChrdev(this.mode)}},lookupPath(e,t={}){if(!e)throw new l.ErrnoError(44);t.follow_mount??=!0,ce.isAbs(e)||(e=l.cwd()+"/"+e);e:for(var i=0;i<40;i++){for(var n=e.split("/").filter(C=>!!C),r=l.root,o="/",h=0;h<n.length;h++){var g=h===n.length-1;if(g&&t.parent)break;if(n[h]!=="."){if(n[h]===".."){if(o=ce.dirname(o),l.isRoot(r)){e=o+"/"+n.slice(h+1).join("/");continue e}else r=r.parent;continue}o=ce.join2(o,n[h]);try{r=l.lookupNode(r,n[h])}catch(C){if(C?.errno===44&&g&&t.noent_okay)return{path:o};throw C}if(l.isMountpoint(r)&&(!g||t.follow_mount)&&(r=r.mounted.root),l.isLink(r.mode)&&(!g||t.follow)){if(!r.node_ops.readlink)throw new l.ErrnoError(52);var L=r.node_ops.readlink(r);ce.isAbs(L)||(L=ce.dirname(o)+"/"+L),e=L+"/"+n.slice(h+1).join("/");continue e}}}return{path:o,node:r}}throw new l.ErrnoError(32)},getPath(e){for(var t;;){if(l.isRoot(e)){var i=e.mount.mountpoint;return t?i[i.length-1]!=="/"?`${i}/${t}`:i+t:i}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var i=0,n=0;n<t.length;n++)i=(i<<5)-i+t.charCodeAt(n)|0;return(e+i>>>0)%l.nameTable.length},hashAddNode(e){var t=l.hashName(e.parent.id,e.name);e.name_next=l.nameTable[t],l.nameTable[t]=e},hashRemoveNode(e){var t=l.hashName(e.parent.id,e.name);if(l.nameTable[t]===e)l.nameTable[t]=e.name_next;else for(var i=l.nameTable[t];i;){if(i.name_next===e){i.name_next=e.name_next;break}i=i.name_next}},lookupNode(e,t){var i=l.mayLookup(e);if(i)throw new l.ErrnoError(i);for(var n=l.hashName(e.id,t),r=l.nameTable[n];r;r=r.name_next){var o=r.name;if(r.parent.id===e.id&&o===t)return r}return l.lookup(e,t)},createNode(e,t,i,n){var r=new l.FSNode(e,t,i,n);return l.hashAddNode(r),r},destroyNode(e){l.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return l.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!l.isDir(e.mode))return 54;var t=l.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){if(!l.isDir(e.mode))return 54;try{var i=l.lookupNode(e,t);return 20}catch{}return l.nodePermissions(e,"wx")},mayDelete(e,t,i){var n;try{n=l.lookupNode(e,t)}catch(o){return o.errno}var r=l.nodePermissions(e,"wx");if(r)return r;if(i){if(!l.isDir(n.mode))return 54;if(l.isRoot(n)||l.getPath(n)===l.cwd())return 10}else if(l.isDir(n.mode))return 31;return 0},mayOpen(e,t){return e?l.isLink(e.mode)?32:l.isDir(e.mode)&&(l.flagsToPermissionString(t)!=="r"||t&576)?31:l.nodePermissions(e,l.flagsToPermissionString(t)):44},checkOpExists(e,t){if(!e)throw new l.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=l.MAX_OPEN_FDS;e++)if(!l.streams[e])return e;throw new l.ErrnoError(33)},getStreamChecked(e){var t=l.getStream(e);if(!t)throw new l.ErrnoError(8);return t},getStream:e=>l.streams[e],createStream(e,t=-1){return e=Object.assign(new l.FSStream,e),t==-1&&(t=l.nextfd()),e.fd=t,l.streams[t]=e,e},closeStream(e){l.streams[e]=null},dupStream(e,t=-1){var i=l.createStream(e,t);return i.stream_ops?.dup?.(i),i},doSetAttr(e,t,i){var n=e?.stream_ops.setattr,r=n?e:t;n??=t.node_ops.setattr,l.checkOpExists(n,63),n(r,i)},chrdev_stream_ops:{open(e){var t=l.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new l.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){l.devices[e]={stream_ops:t}},getDevice:e=>l.devices[e],getMounts(e){for(var t=[],i=[e];i.length;){var n=i.pop();t.push(n),i.push(...n.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),l.syncFSRequests++,l.syncFSRequests>1&&we(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var i=l.getMounts(l.root.mount),n=0;function r(h){return l.syncFSRequests--,t(h)}function o(h){if(h)return o.errored?void 0:(o.errored=!0,r(h));++n>=i.length&&r(null)}i.forEach(h=>{if(!h.type.syncfs)return o(null);h.type.syncfs(h,e,o)})},mount(e,t,i){var n=i==="/",r=!i,o;if(n&&l.root)throw new l.ErrnoError(10);if(!n&&!r){var h=l.lookupPath(i,{follow_mount:!1});if(i=h.path,o=h.node,l.isMountpoint(o))throw new l.ErrnoError(10);if(!l.isDir(o.mode))throw new l.ErrnoError(54)}var g={type:e,opts:t,mountpoint:i,mounts:[]},L=e.mount(g);return L.mount=g,g.root=L,n?l.root=L:o&&(o.mounted=g,o.mount&&o.mount.mounts.push(g)),L},unmount(e){var t=l.lookupPath(e,{follow_mount:!1});if(!l.isMountpoint(t.node))throw new l.ErrnoError(28);var i=t.node,n=i.mounted,r=l.getMounts(n);Object.keys(l.nameTable).forEach(h=>{for(var g=l.nameTable[h];g;){var L=g.name_next;r.includes(g.mount)&&l.destroyNode(g),g=L}}),i.mounted=null;var o=i.mount.mounts.indexOf(n);i.mount.mounts.splice(o,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,i){var n=l.lookupPath(e,{parent:!0}),r=n.node,o=ce.basename(e);if(!o)throw new l.ErrnoError(28);if(o==="."||o==="..")throw new l.ErrnoError(20);var h=l.mayCreate(r,o);if(h)throw new l.ErrnoError(h);if(!r.node_ops.mknod)throw new l.ErrnoError(63);return r.node_ops.mknod(r,o,t,i)},statfs(e){return l.statfsNode(l.lookupPath(e,{follow:!0}).node)},statfsStream(e){return l.statfsNode(e.node)},statfsNode(e){var t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:l.nextInode,ffree:l.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create(e,t=438){return t&=4095,t|=32768,l.mknod(e,t,0)},mkdir(e,t=511){return t&=1023,t|=16384,l.mknod(e,t,0)},mkdirTree(e,t){var i=e.split("/"),n="";for(var r of i)if(r){(n||ce.isAbs(e))&&(n+="/"),n+=r;try{l.mkdir(n,t)}catch(o){if(o.errno!=20)throw o}}},mkdev(e,t,i){return typeof i>"u"&&(i=t,t=438),t|=8192,l.mknod(e,t,i)},symlink(e,t){if(!Oe.resolve(e))throw new l.ErrnoError(44);var i=l.lookupPath(t,{parent:!0}),n=i.node;if(!n)throw new l.ErrnoError(44);var r=ce.basename(t),o=l.mayCreate(n,r);if(o)throw new l.ErrnoError(o);if(!n.node_ops.symlink)throw new l.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename(e,t){var i=ce.dirname(e),n=ce.dirname(t),r=ce.basename(e),o=ce.basename(t),h,g,L;if(h=l.lookupPath(e,{parent:!0}),g=h.node,h=l.lookupPath(t,{parent:!0}),L=h.node,!g||!L)throw new l.ErrnoError(44);if(g.mount!==L.mount)throw new l.ErrnoError(75);var C=l.lookupNode(g,r),z=Oe.relative(e,n);if(z.charAt(0)!==".")throw new l.ErrnoError(28);if(z=Oe.relative(t,i),z.charAt(0)!==".")throw new l.ErrnoError(55);var W;try{W=l.lookupNode(L,o)}catch{}if(C!==W){var x=l.isDir(C.mode),E=l.mayDelete(g,r,x);if(E)throw new l.ErrnoError(E);if(E=W?l.mayDelete(L,o,x):l.mayCreate(L,o),E)throw new l.ErrnoError(E);if(!g.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(C)||W&&l.isMountpoint(W))throw new l.ErrnoError(10);if(L!==g&&(E=l.nodePermissions(g,"w"),E))throw new l.ErrnoError(E);l.hashRemoveNode(C);try{g.node_ops.rename(C,L,o),C.parent=L}catch(M){throw M}finally{l.hashAddNode(C)}}},rmdir(e){var t=l.lookupPath(e,{parent:!0}),i=t.node,n=ce.basename(e),r=l.lookupNode(i,n),o=l.mayDelete(i,n,!0);if(o)throw new l.ErrnoError(o);if(!i.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(r))throw new l.ErrnoError(10);i.node_ops.rmdir(i,n),l.destroyNode(r)},readdir(e){var t=l.lookupPath(e,{follow:!0}),i=t.node,n=l.checkOpExists(i.node_ops.readdir,54);return n(i)},unlink(e){var t=l.lookupPath(e,{parent:!0}),i=t.node;if(!i)throw new l.ErrnoError(44);var n=ce.basename(e),r=l.lookupNode(i,n),o=l.mayDelete(i,n,!1);if(o)throw new l.ErrnoError(o);if(!i.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(r))throw new l.ErrnoError(10);i.node_ops.unlink(i,n),l.destroyNode(r)},readlink(e){var t=l.lookupPath(e),i=t.node;if(!i)throw new l.ErrnoError(44);if(!i.node_ops.readlink)throw new l.ErrnoError(28);return i.node_ops.readlink(i)},stat(e,t){var i=l.lookupPath(e,{follow:!t}),n=i.node,r=l.checkOpExists(n.node_ops.getattr,63);return r(n)},fstat(e){var t=l.getStreamChecked(e),i=t.node,n=t.stream_ops.getattr,r=n?t:i;return n??=i.node_ops.getattr,l.checkOpExists(n,63),n(r)},lstat(e){return l.stat(e,!0)},doChmod(e,t,i,n){l.doSetAttr(e,t,{mode:i&4095|t.mode&-4096,ctime:Date.now(),dontFollow:n})},chmod(e,t,i){var n;if(typeof e=="string"){var r=l.lookupPath(e,{follow:!i});n=r.node}else n=e;l.doChmod(null,n,t,i)},lchmod(e,t){l.chmod(e,t,!0)},fchmod(e,t){var i=l.getStreamChecked(e);l.doChmod(i,i.node,t,!1)},doChown(e,t,i){l.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:i})},chown(e,t,i,n){var r;if(typeof e=="string"){var o=l.lookupPath(e,{follow:!n});r=o.node}else r=e;l.doChown(null,r,n)},lchown(e,t,i){l.chown(e,t,i,!0)},fchown(e,t,i){var n=l.getStreamChecked(e);l.doChown(n,n.node,!1)},doTruncate(e,t,i){if(l.isDir(t.mode))throw new l.ErrnoError(31);if(!l.isFile(t.mode))throw new l.ErrnoError(28);var n=l.nodePermissions(t,"w");if(n)throw new l.ErrnoError(n);l.doSetAttr(e,t,{size:i,timestamp:Date.now()})},truncate(e,t){if(t<0)throw new l.ErrnoError(28);var i;if(typeof e=="string"){var n=l.lookupPath(e,{follow:!0});i=n.node}else i=e;l.doTruncate(null,i,t)},ftruncate(e,t){var i=l.getStreamChecked(e);if(t<0||(i.flags&2097155)===0)throw new l.ErrnoError(28);l.doTruncate(i,i.node,t)},utime(e,t,i){var n=l.lookupPath(e,{follow:!0}),r=n.node,o=l.checkOpExists(r.node_ops.setattr,63);o(r,{atime:t,mtime:i})},open(e,t,i=438){if(e==="")throw new l.ErrnoError(44);t=typeof t=="string"?Xt(t):t,t&64?i=i&4095|32768:i=0;var n,r;if(typeof e=="object")n=e;else{r=e.endsWith("/");var o=l.lookupPath(e,{follow:!(t&131072),noent_okay:!0});n=o.node,e=o.path}var h=!1;if(t&64)if(n){if(t&128)throw new l.ErrnoError(20)}else{if(r)throw new l.ErrnoError(31);n=l.mknod(e,i|511,0),h=!0}if(!n)throw new l.ErrnoError(44);if(l.isChrdev(n.mode)&&(t&=-513),t&65536&&!l.isDir(n.mode))throw new l.ErrnoError(54);if(!h){var g=l.mayOpen(n,t);if(g)throw new l.ErrnoError(g)}t&512&&!h&&l.truncate(n,0),t&=-131713;var L=l.createStream({node:n,path:l.getPath(n),flags:t,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return L.stream_ops.open&&L.stream_ops.open(L),h&&l.chmod(n,i&511),u.logReadFiles&&!(t&1)&&(e in l.readFiles||(l.readFiles[e]=1)),L},close(e){if(l.isClosed(e))throw new l.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{l.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,i){if(l.isClosed(e))throw new l.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new l.ErrnoError(70);if(i!=0&&i!=1&&i!=2)throw new l.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,i),e.ungotten=[],e.position},read(e,t,i,n,r){if(n<0||r<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.read)throw new l.ErrnoError(28);var o=typeof r<"u";if(!o)r=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var h=e.stream_ops.read(e,t,i,n,r);return o||(e.position+=h),h},write(e,t,i,n,r,o){if(n<0||r<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===0)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.write)throw new l.ErrnoError(28);e.seekable&&e.flags&1024&&l.llseek(e,0,2);var h=typeof r<"u";if(!h)r=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var g=e.stream_ops.write(e,t,i,n,r,o);return h||(e.position+=g),g},mmap(e,t,i,n,r){if((n&2)!==0&&(r&2)===0&&(e.flags&2097155)!==2)throw new l.ErrnoError(2);if((e.flags&2097155)===1)throw new l.ErrnoError(2);if(!e.stream_ops.mmap)throw new l.ErrnoError(43);if(!t)throw new l.ErrnoError(28);return e.stream_ops.mmap(e,t,i,n,r)},msync(e,t,i,n,r){return e.stream_ops.msync?e.stream_ops.msync(e,t,i,n,r):0},ioctl(e,t,i){if(!e.stream_ops.ioctl)throw new l.ErrnoError(59);return e.stream_ops.ioctl(e,t,i)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var i=l.open(e,t.flags),n=l.stat(e),r=n.size,o=new Uint8Array(r);return l.read(i,o,0,r,0),t.encoding==="utf8"&&(o=Me(o)),l.close(i),o},writeFile(e,t,i={}){i.flags=i.flags||577;var n=l.open(e,i.flags,i.mode);if(typeof t=="string"&&(t=new Uint8Array(et(t))),ArrayBuffer.isView(t))l.write(n,t,0,t.byteLength,void 0,i.canOwn);else throw new Error("Unsupported data type");l.close(n)},cwd:()=>l.currentPath,chdir(e){var t=l.lookupPath(e,{follow:!0});if(t.node===null)throw new l.ErrnoError(44);if(!l.isDir(t.node.mode))throw new l.ErrnoError(54);var i=l.nodePermissions(t.node,"x");if(i)throw new l.ErrnoError(i);l.currentPath=t.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(n,r,o,h,g)=>h,llseek:()=>0}),l.mkdev("/dev/null",l.makedev(1,3)),ke.register(l.makedev(5,0),ke.default_tty_ops),ke.register(l.makedev(6,0),ke.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var e=new Uint8Array(1024),t=0,i=()=>(t===0&&(Ye(e),t=e.byteLength),e[--t]);l.createDevice("/dev","random",i),l.createDevice("/dev","urandom",i),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var e=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var t=l.createNode(e,"fd",16895,73);return t.stream_ops={llseek:se.stream_ops.llseek},t.node_ops={lookup(i,n){var r=+n,o=l.getStreamChecked(r),h={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path},id:r+1};return h.parent=h,h},readdir(){return Array.from(l.streams.entries()).filter(([i,n])=>n).map(([i,n])=>i.toString())}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,i){e?l.createDevice("/dev","stdin",e):l.symlink("/dev/tty","/dev/stdin"),t?l.createDevice("/dev","stdout",null,t):l.symlink("/dev/tty","/dev/stdout"),i?l.createDevice("/dev","stderr",null,i):l.symlink("/dev/tty1","/dev/stderr"),l.open("/dev/stdin",0),l.open("/dev/stdout",1),l.open("/dev/stderr",1)},staticInit(){l.nameTable=new Array(4096),l.mount(se,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:se}},init(e,t,i){l.initialized=!0,e??=u.stdin,t??=u.stdout,i??=u.stderr,l.createStandardStreams(e,t,i)},quit(){l.initialized=!1;for(var e of l.streams)e&&l.close(e)},findObject(e,t){var i=l.analyzePath(e,t);return i.exists?i.object:null},analyzePath(e,t){try{var i=l.lookupPath(e,{follow:!t});e=i.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=l.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=i.path,n.parentObject=i.node,n.name=ce.basename(e),i=l.lookupPath(e,{follow:!t}),n.exists=!0,n.path=i.path,n.object=i.node,n.name=i.node.name,n.isRoot=i.path==="/"}catch(r){n.error=r.errno}return n},createPath(e,t,i,n){e=typeof e=="string"?e:l.getPath(e);for(var r=t.split("/").reverse();r.length;){var o=r.pop();if(o){var h=ce.join2(e,o);try{l.mkdir(h)}catch(g){if(g.errno!=20)throw g}e=h}}return h},createFile(e,t,i,n,r){var o=ce.join2(typeof e=="string"?e:l.getPath(e),t),h=tt(n,r);return l.create(o,h)},createDataFile(e,t,i,n,r,o){var h=t;e&&(e=typeof e=="string"?e:l.getPath(e),h=t?ce.join2(e,t):e);var g=tt(n,r),L=l.create(h,g);if(i){if(typeof i=="string"){for(var C=new Array(i.length),z=0,W=i.length;z<W;++z)C[z]=i.charCodeAt(z);i=C}l.chmod(L,g|146);var x=l.open(L,577);l.write(x,i,0,i.length,0,o),l.close(x),l.chmod(L,g)}},createDevice(e,t,i,n){var r=ce.join2(typeof e=="string"?e:l.getPath(e),t),o=tt(!!i,!!n);l.createDevice.major??=64;var h=l.makedev(l.createDevice.major++,0);return l.registerDevice(h,{open(g){g.seekable=!1},close(g){n?.buffer?.length&&n(10)},read(g,L,C,z,W){for(var x=0,E=0;E<z;E++){var M;try{M=i()}catch{throw new l.ErrnoError(29)}if(M===void 0&&x===0)throw new l.ErrnoError(6);if(M==null)break;x++,L[C+E]=M}return x&&(g.node.atime=Date.now()),x},write(g,L,C,z,W){for(var x=0;x<z;x++)try{n(L[C+x])}catch{throw new l.ErrnoError(29)}return z&&(g.node.mtime=g.node.ctime=Date.now()),x}}),l.mkdev(r,o,h)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=ze(e.url),e.usedBytes=e.contents.length}catch{throw new l.ErrnoError(29)}},createLazyFile(e,t,i,n,r){class o{lengthKnown=!1;chunks=[];get(E){if(!(E>this.length-1||E<0)){var M=E%this.chunkSize,p=E/this.chunkSize|0;return this.getter(p)[M]}}setDataGetter(E){this.getter=E}cacheLength(){var E=new XMLHttpRequest;if(E.open("HEAD",i,!1),E.send(null),!(E.status>=200&&E.status<300||E.status===304))throw new Error("Couldn't load "+i+". Status: "+E.status);var M=Number(E.getResponseHeader("Content-length")),p,m=(p=E.getResponseHeader("Accept-Ranges"))&&p==="bytes",w=(p=E.getResponseHeader("Content-Encoding"))&&p==="gzip",T=1024*1024;m||(T=M);var F=(D,$)=>{if(D>$)throw new Error("invalid range ("+D+", "+$+") or no bytes requested!");if($>M-1)throw new Error("only "+M+" bytes available! programmer error!");var c=new XMLHttpRequest;if(c.open("GET",i,!1),M!==T&&c.setRequestHeader("Range","bytes="+D+"-"+$),c.responseType="arraybuffer",c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+i+". Status: "+c.status);return c.response!==void 0?new Uint8Array(c.response||[]):et(c.responseText||"")},S=this;S.setDataGetter(D=>{var $=D*T,c=(D+1)*T-1;if(c=Math.min(c,M-1),typeof S.chunks[D]>"u"&&(S.chunks[D]=F($,c)),typeof S.chunks[D]>"u")throw new Error("doXHR failed!");return S.chunks[D]}),(w||!M)&&(T=M=1,M=this.getter(0).length,T=M,Qe("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=M,this._chunkSize=T,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!ye)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var h=new o,g={isDevice:!1,contents:h}}else var g={isDevice:!1,url:i};var L=l.createFile(e,t,g,n,r);g.contents?L.contents=g.contents:g.url&&(L.contents=null,L.url=g.url),Object.defineProperties(L,{usedBytes:{get:function(){return this.contents.length}}});var C={},z=Object.keys(L.stream_ops);z.forEach(x=>{var E=L.stream_ops[x];C[x]=(...M)=>(l.forceLoadFile(L),E(...M))});function W(x,E,M,p,m){var w=x.node.contents;if(m>=w.length)return 0;var T=Math.min(w.length-m,p);if(w.slice)for(var F=0;F<T;F++)E[M+F]=w[m+F];else for(var F=0;F<T;F++)E[M+F]=w.get(m+F);return T}return C.read=(x,E,M,p,m)=>(l.forceLoadFile(L),W(x,E,M,p,m)),C.mmap=(x,E,M,p,m)=>{l.forceLoadFile(L);var w=bt(E);if(!w)throw new l.ErrnoError(48);return W(x,me,w,E,M),{ptr:w,allocated:!0}},L.stream_ops=C,L}},Yt=(e,t)=>{if(!e)return"";for(var i=e+t,n=e;!(n>=i)&&Se[n];)++n;return gt.decode(Se.subarray(e,n))},le={DEFAULT_POLLMASK:5,calculateAt(e,t,i){if(ce.isAbs(t))return t;var n;if(e===-100)n=l.cwd();else{var r=le.getStreamFromFD(e);n=r.path}if(t.length==0){if(!i)throw new l.ErrnoError(44);return n}return n+"/"+t},writeStat(e,t){ie[e>>2]=t.dev,ie[e+4>>2]=t.mode,pe[e+8>>2]=t.nlink,ie[e+12>>2]=t.uid,ie[e+16>>2]=t.gid,ie[e+20>>2]=t.rdev,be[e+24>>3]=BigInt(t.size),ie[e+32>>2]=4096,ie[e+36>>2]=t.blocks;var i=t.atime.getTime(),n=t.mtime.getTime(),r=t.ctime.getTime();return be[e+40>>3]=BigInt(Math.floor(i/1e3)),pe[e+48>>2]=i%1e3*1e3*1e3,be[e+56>>3]=BigInt(Math.floor(n/1e3)),pe[e+64>>2]=n%1e3*1e3*1e3,be[e+72>>3]=BigInt(Math.floor(r/1e3)),pe[e+80>>2]=r%1e3*1e3*1e3,be[e+88>>3]=BigInt(t.ino),0},writeStatFs(e,t){ie[e+4>>2]=t.bsize,ie[e+40>>2]=t.bsize,ie[e+8>>2]=t.blocks,ie[e+12>>2]=t.bfree,ie[e+16>>2]=t.bavail,ie[e+20>>2]=t.files,ie[e+24>>2]=t.ffree,ie[e+28>>2]=t.fsid,ie[e+44>>2]=t.flags,ie[e+36>>2]=t.namelen},doMsync(e,t,i,n,r){if(!l.isFile(t.node.mode))throw new l.ErrnoError(43);if(n&2)return 0;var o=Se.slice(e,e+i);l.msync(t,o,r,i,n)},getStreamFromFD(e){var t=l.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=Yt(e);return t}};function Zt(e,t){try{return e=le.getStr(e),l.chmod(e,t),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function en(e,t,i,n){try{if(t=le.getStr(t),t=le.calculateAt(e,t),i&-8)return-28;var r=l.lookupPath(t,{follow:!0}),o=r.node;if(!o)return-44;var h="";return i&4&&(h+="r"),i&2&&(h+="w"),i&1&&(h+="x"),h&&l.nodePermissions(o,h)?-2:0}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function tn(e,t){try{return l.fchmod(e,t),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function nn(e,t,i){try{return l.fchown(e,t,i),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var He=()=>{var e=ie[+le.varargs>>2];return le.varargs+=4,e},Pe=He;function rn(e,t,i){le.varargs=i;try{var n=le.getStreamFromFD(e);switch(t){case 0:{var r=He();if(r<0)return-28;for(;l.streams[r];)r++;var o;return o=l.dupStream(n,r),o.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var r=He();return n.flags|=r,0}case 12:{var r=Pe(),h=0;return Re[r+h>>1]=2,0}case 13:case 14:return 0}return-28}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function sn(e,t){try{return le.writeStat(t,l.fstat(e))}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var on=9007199254740992,ln=-9007199254740992,je=e=>e<ln||e>on?NaN:Number(e);function an(e,t){t=je(t);try{return isNaN(t)?-61:(l.ftruncate(e,t),0)}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var xe=(e,t,i)=>mt(e,Se,t,i);function cn(e,t){try{if(t===0)return-28;var i=l.cwd(),n=We(i)+1;return t<n?-68:(xe(i,e,t),n)}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function _n(e,t,i){le.varargs=i;try{var n=le.getStreamFromFD(e);switch(t){case 21509:return n.tty?0:-59;case 21505:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var r=n.tty.ops.ioctl_tcgets(n),o=Pe();ie[o>>2]=r.c_iflag||0,ie[o+4>>2]=r.c_oflag||0,ie[o+8>>2]=r.c_cflag||0,ie[o+12>>2]=r.c_lflag||0;for(var h=0;h<32;h++)me[o+h+17]=r.c_cc[h]||0;return 0}return 0}case 21510:case 21511:case 21512:return n.tty?0:-59;case 21506:case 21507:case 21508:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){for(var o=Pe(),g=ie[o>>2],L=ie[o+4>>2],C=ie[o+8>>2],z=ie[o+12>>2],W=[],h=0;h<32;h++)W.push(me[o+h+17]);return n.tty.ops.ioctl_tcsets(n.tty,t,{c_iflag:g,c_oflag:L,c_cflag:C,c_lflag:z,c_cc:W})}return 0}case 21519:{if(!n.tty)return-59;var o=Pe();return ie[o>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var o=Pe();return l.ioctl(n,t,o)}case 21523:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var x=n.tty.ops.ioctl_tiocgwinsz(n.tty),o=Pe();Re[o>>1]=x[0],Re[o+2>>1]=x[1]}return 0}case 21524:return n.tty?0:-59;case 21515:return n.tty?0:-59;default:return-28}}catch(E){if(typeof l>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function un(e,t){try{return e=le.getStr(e),le.writeStat(t,l.lstat(e))}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function fn(e,t,i){try{return t=le.getStr(t),t=le.calculateAt(e,t),l.mkdir(t,i,0),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function dn(e,t,i,n){try{t=le.getStr(t);var r=n&256,o=n&4096;return n=n&-6401,t=le.calculateAt(e,t,o),le.writeStat(i,r?l.lstat(t):l.stat(t))}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function pn(e,t,i,n){le.varargs=n;try{t=le.getStr(t),t=le.calculateAt(e,t);var r=n?He():0;return l.open(t,i,r).fd}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function hn(e,t,i,n){try{if(t=le.getStr(t),t=le.calculateAt(e,t),n<=0)return-28;var r=l.readlink(t),o=Math.min(n,We(r)),h=me[i+o];return xe(r,i,n+1),me[i+o]=h,o}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function gn(e){try{return e=le.getStr(e),l.rmdir(e),0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function mn(e,t){try{return e=le.getStr(e),le.writeStat(t,l.stat(e))}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function yn(e,t,i){try{if(t=le.getStr(t),t=le.calculateAt(e,t),!i)l.unlink(t);else if(i===512)l.rmdir(t);else return-28;return 0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var vt=e=>pe[e>>2]+ie[e+4>>2]*4294967296;function bn(e,t,i,n){try{t=le.getStr(t),t=le.calculateAt(e,t,!0);var r=Date.now(),o,h;if(!i)o=r,h=r;else{var g=vt(i),L=ie[i+8>>2];L==1073741823?o=r:L==1073741822?o=null:o=g*1e3+L/1e6,i+=16,g=vt(i),L=ie[i+8>>2],L==1073741823?h=r:L==1073741822?h=null:h=g*1e3+L/1e6}return(h??o)!==null&&l.utime(t,o,h),0}catch(C){if(typeof l>"u"||C.name!=="ErrnoError")throw C;return-C.errno}}var qn=()=>ut(""),vn=e=>e%4===0&&(e%100!==0||e%400===0),wn=[0,31,60,91,121,152,182,213,244,274,305,335],Sn=[0,31,59,90,120,151,181,212,243,273,304,334],An=e=>{var t=vn(e.getFullYear()),i=t?wn:Sn,n=i[e.getMonth()]+e.getDate()-1;return n};function En(e,t){e=je(e);var i=new Date(e*1e3);ie[t>>2]=i.getSeconds(),ie[t+4>>2]=i.getMinutes(),ie[t+8>>2]=i.getHours(),ie[t+12>>2]=i.getDate(),ie[t+16>>2]=i.getMonth(),ie[t+20>>2]=i.getFullYear()-1900,ie[t+24>>2]=i.getDay();var n=An(i)|0;ie[t+28>>2]=n,ie[t+36>>2]=-(i.getTimezoneOffset()*60);var r=new Date(i.getFullYear(),0,1),o=new Date(i.getFullYear(),6,1).getTimezoneOffset(),h=r.getTimezoneOffset(),g=(o!=h&&i.getTimezoneOffset()==Math.min(h,o))|0;ie[t+32>>2]=g}function In(e,t,i,n,r,o,h){r=je(r);try{var g=le.getStreamFromFD(n),L=l.mmap(g,e,r,t,i),C=L.ptr;return ie[o>>2]=L.allocated,pe[h>>2]=C,0}catch(z){if(typeof l>"u"||z.name!=="ErrnoError")throw z;return-z.errno}}function kn(e,t,i,n,r,o){o=je(o);try{var h=le.getStreamFromFD(r);i&2&&le.doMsync(e,h,t,n,o)}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}var xn=(e,t,i,n)=>{var r=new Date().getFullYear(),o=new Date(r,0,1),h=new Date(r,6,1),g=o.getTimezoneOffset(),L=h.getTimezoneOffset(),C=Math.max(g,L);pe[e>>2]=C*60,ie[t>>2]=+(g!=L);var z=E=>{var M=E>=0?"-":"+",p=Math.abs(E),m=String(Math.floor(p/60)).padStart(2,"0"),w=String(p%60).padStart(2,"0");return`UTC${M}${m}${w}`},W=z(g),x=z(L);L<g?(xe(W,i,17),xe(x,n,17)):(xe(W,n,17),xe(x,i,17))},wt=()=>performance.now(),St=()=>Date.now(),Tn=e=>e>=0&&e<=3;function Fn(e,t,i){if(!Tn(e))return 28;var n;e===0?n=St():n=wt();var r=Math.round(n*1e3*1e3);return be[i>>3]=BigInt(r),0}var On=()=>2147483648,Pn=e=>{var t=Ee.buffer,i=(e-t.byteLength+65535)/65536|0;try{return Ee.grow(i),ct(),1}catch{}},Ln=e=>{var t=Se.length;e>>>=0;var i=On();if(e>i)return!1;for(var n=1;n<=4;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var o=Math.min(i,yt(Math.max(e,r),65536)),h=Pn(o);if(h)return!0}return!1},nt={},Cn=()=>Ue||"./this.program",Be=()=>{if(!Be.strings){var e=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Cn()};for(var i in nt)nt[i]===void 0?delete t[i]:t[i]=nt[i];var n=[];for(var i in t)n.push(`${i}=${t[i]}`);Be.strings=n}return Be.strings},Dn=(e,t)=>{var i=0,n=0;for(var r of Be()){var o=t+i;pe[e+n>>2]=o,i+=xe(r,o,1/0)+1,n+=4}return 0},Rn=(e,t)=>{var i=Be();pe[e>>2]=i.length;var n=0;for(var r of i)n+=We(r)+1;return pe[t>>2]=n,0},Nn=0,Mn=()=>ht||Nn>0,jn=e=>{Mn()||(u.onExit?.(e),Ke=!0),st(e,new Ut(e))},Bn=(e,t)=>{jn(e)},Un=Bn;function zn(e){try{var t=le.getStreamFromFD(e);return l.close(t),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return i.errno}}function Qn(e,t){try{var i=0,n=0,r=0,o=le.getStreamFromFD(e),h=o.tty?2:l.isDir(o.mode)?3:l.isLink(o.mode)?7:4;return me[t]=h,Re[t+2>>1]=r,be[t+8>>3]=BigInt(i),be[t+16>>3]=BigInt(n),0}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return g.errno}}var Wn=(e,t,i,n)=>{for(var r=0,o=0;o<i;o++){var h=pe[t>>2],g=pe[t+4>>2];t+=8;var L=l.read(e,me,h,g,n);if(L<0)return-1;if(r+=L,L<g)break}return r};function Hn(e,t,i,n){try{var r=le.getStreamFromFD(e),o=Wn(r,t,i);return pe[n>>2]=o,0}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return h.errno}}function Vn(e,t,i,n){t=je(t);try{if(isNaN(t))return 61;var r=le.getStreamFromFD(e);return l.llseek(r,t,i),be[n>>3]=BigInt(r.position),r.getdents&&t===0&&i===0&&(r.getdents=null),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function Gn(e){try{var t=le.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return i.errno}}var $n=(e,t,i,n)=>{for(var r=0,o=0;o<i;o++){var h=pe[t>>2],g=pe[t+4>>2];t+=8;var L=l.write(e,me,h,g,n);if(L<0)return-1;if(r+=L,L<g)break}return r};function Kn(e,t,i,n){try{var r=le.getStreamFromFD(e),o=$n(r,t,i);return pe[n>>2]=o,0}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return h.errno}}function Jn(e,t){try{return Ye(Se.subarray(e,e+t)),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return i.errno}}l.createPreloadedFile=Jt,l.staticInit(),se.doesNotExistError=new l.ErrnoError(44),se.doesNotExistError.stack="<generic error, no stack>",Ft(),u.noExitRuntime&&(ht=u.noExitRuntime),u.preloadPlugins&&(qt=u.preloadPlugins),u.print&&(Qe=u.print),u.printErr&&(we=u.printErr),u.wasmBinary&&(De=u.wasmBinary),u.arguments&&u.arguments,u.thisProgram&&(Ue=u.thisProgram),u.wasmMemory=Ee;var At;function Xn(e){u._sqlite3_status64=e.sqlite3_status64,u._sqlite3_status=e.sqlite3_status,u._sqlite3_db_status=e.sqlite3_db_status,u._sqlite3_msize=e.sqlite3_msize,u._sqlite3_vfs_find=e.sqlite3_vfs_find,u._sqlite3_initialize=e.sqlite3_initialize,u._sqlite3_malloc=e.sqlite3_malloc,u._sqlite3_free=e.sqlite3_free,u._sqlite3_vfs_register=e.sqlite3_vfs_register,u._sqlite3_randomness=e.sqlite3_randomness,u._sqlite3mc_vfs_create=e.sqlite3mc_vfs_create,u._sqlite3_vfs_unregister=e.sqlite3_vfs_unregister,u._sqlite3_malloc64=e.sqlite3_malloc64,u._sqlite3_realloc=e.sqlite3_realloc,u._sqlite3_realloc64=e.sqlite3_realloc64,u._sqlite3_value_text=e.sqlite3_value_text,u._sqlite3_stricmp=e.sqlite3_stricmp,u._sqlite3_strnicmp=e.sqlite3_strnicmp,u._sqlite3_uri_parameter=e.sqlite3_uri_parameter,u._sqlite3_uri_boolean=e.sqlite3_uri_boolean,u._sqlite3_serialize=e.sqlite3_serialize,u._sqlite3_prepare_v2=e.sqlite3_prepare_v2,u._sqlite3_step=e.sqlite3_step,u._sqlite3_column_int64=e.sqlite3_column_int64,u._sqlite3_reset=e.sqlite3_reset,u._sqlite3_exec=e.sqlite3_exec,u._sqlite3_column_int=e.sqlite3_column_int,u._sqlite3_finalize=e.sqlite3_finalize,u._sqlite3_file_control=e.sqlite3_file_control,u._sqlite3_column_name=e.sqlite3_column_name,u._sqlite3_column_text=e.sqlite3_column_text,u._sqlite3_column_type=e.sqlite3_column_type,u._sqlite3_errmsg=e.sqlite3_errmsg,u._sqlite3_deserialize=e.sqlite3_deserialize,u._sqlite3_clear_bindings=e.sqlite3_clear_bindings,u._sqlite3_value_blob=e.sqlite3_value_blob,u._sqlite3_value_bytes=e.sqlite3_value_bytes,u._sqlite3_value_double=e.sqlite3_value_double,u._sqlite3_value_int=e.sqlite3_value_int,u._sqlite3_value_int64=e.sqlite3_value_int64,u._sqlite3_value_subtype=e.sqlite3_value_subtype,u._sqlite3_value_pointer=e.sqlite3_value_pointer,u._sqlite3_value_type=e.sqlite3_value_type,u._sqlite3_value_nochange=e.sqlite3_value_nochange,u._sqlite3_value_frombind=e.sqlite3_value_frombind,u._sqlite3_value_dup=e.sqlite3_value_dup,u._sqlite3_value_free=e.sqlite3_value_free,u._sqlite3_result_blob=e.sqlite3_result_blob,u._sqlite3_result_error_toobig=e.sqlite3_result_error_toobig,u._sqlite3_result_error_nomem=e.sqlite3_result_error_nomem,u._sqlite3_result_double=e.sqlite3_result_double,u._sqlite3_result_error=e.sqlite3_result_error,u._sqlite3_result_int=e.sqlite3_result_int,u._sqlite3_result_int64=e.sqlite3_result_int64,u._sqlite3_result_null=e.sqlite3_result_null,u._sqlite3_result_pointer=e.sqlite3_result_pointer,u._sqlite3_result_subtype=e.sqlite3_result_subtype,u._sqlite3_result_text=e.sqlite3_result_text,u._sqlite3_result_zeroblob=e.sqlite3_result_zeroblob,u._sqlite3_result_zeroblob64=e.sqlite3_result_zeroblob64,u._sqlite3_result_error_code=e.sqlite3_result_error_code,u._sqlite3_user_data=e.sqlite3_user_data,u._sqlite3_context_db_handle=e.sqlite3_context_db_handle,u._sqlite3_vtab_nochange=e.sqlite3_vtab_nochange,u._sqlite3_vtab_in_first=e.sqlite3_vtab_in_first,u._sqlite3_vtab_in_next=e.sqlite3_vtab_in_next,u._sqlite3_aggregate_context=e.sqlite3_aggregate_context,u._sqlite3_get_auxdata=e.sqlite3_get_auxdata,u._sqlite3_set_auxdata=e.sqlite3_set_auxdata,u._sqlite3_column_count=e.sqlite3_column_count,u._sqlite3_data_count=e.sqlite3_data_count,u._sqlite3_column_blob=e.sqlite3_column_blob,u._sqlite3_column_bytes=e.sqlite3_column_bytes,u._sqlite3_column_double=e.sqlite3_column_double,u._sqlite3_column_value=e.sqlite3_column_value,u._sqlite3_column_decltype=e.sqlite3_column_decltype,u._sqlite3_bind_blob=e.sqlite3_bind_blob,u._sqlite3_bind_double=e.sqlite3_bind_double,u._sqlite3_bind_int=e.sqlite3_bind_int,u._sqlite3_bind_int64=e.sqlite3_bind_int64,u._sqlite3_bind_null=e.sqlite3_bind_null,u._sqlite3_bind_pointer=e.sqlite3_bind_pointer,u._sqlite3_bind_text=e.sqlite3_bind_text,u._sqlite3_bind_parameter_count=e.sqlite3_bind_parameter_count,u._sqlite3_bind_parameter_name=e.sqlite3_bind_parameter_name,u._sqlite3_bind_parameter_index=e.sqlite3_bind_parameter_index,u._sqlite3_db_handle=e.sqlite3_db_handle,u._sqlite3_stmt_readonly=e.sqlite3_stmt_readonly,u._sqlite3_stmt_isexplain=e.sqlite3_stmt_isexplain,u._sqlite3_stmt_explain=e.sqlite3_stmt_explain,u._sqlite3_stmt_busy=e.sqlite3_stmt_busy,u._sqlite3_stmt_status=e.sqlite3_stmt_status,u._sqlite3_sql=e.sqlite3_sql,u._sqlite3_expanded_sql=e.sqlite3_expanded_sql,u._sqlite3_preupdate_old=e.sqlite3_preupdate_old,u._sqlite3_preupdate_count=e.sqlite3_preupdate_count,u._sqlite3_preupdate_depth=e.sqlite3_preupdate_depth,u._sqlite3_preupdate_blobwrite=e.sqlite3_preupdate_blobwrite,u._sqlite3_preupdate_new=e.sqlite3_preupdate_new,u._sqlite3_value_numeric_type=e.sqlite3_value_numeric_type,u._sqlite3_set_authorizer=e.sqlite3_set_authorizer,u._sqlite3_strglob=e.sqlite3_strglob,u._sqlite3_strlike=e.sqlite3_strlike,u._sqlite3_auto_extension=e.sqlite3_auto_extension,u._sqlite3_cancel_auto_extension=e.sqlite3_cancel_auto_extension,u._sqlite3_reset_auto_extension=e.sqlite3_reset_auto_extension,u._sqlite3_prepare_v3=e.sqlite3_prepare_v3,u._sqlite3_create_module=e.sqlite3_create_module,u._sqlite3_create_module_v2=e.sqlite3_create_module_v2,u._sqlite3_drop_modules=e.sqlite3_drop_modules,u._sqlite3_declare_vtab=e.sqlite3_declare_vtab,u._sqlite3_vtab_on_conflict=e.sqlite3_vtab_on_conflict,u._sqlite3_vtab_collation=e.sqlite3_vtab_collation,u._sqlite3_vtab_in=e.sqlite3_vtab_in,u._sqlite3_vtab_rhs_value=e.sqlite3_vtab_rhs_value,u._sqlite3_vtab_distinct=e.sqlite3_vtab_distinct,u._sqlite3_keyword_name=e.sqlite3_keyword_name,u._sqlite3_keyword_count=e.sqlite3_keyword_count,u._sqlite3_keyword_check=e.sqlite3_keyword_check,u._sqlite3_complete=e.sqlite3_complete,u._sqlite3_libversion=e.sqlite3_libversion,u._sqlite3_libversion_number=e.sqlite3_libversion_number,u._sqlite3_shutdown=e.sqlite3_shutdown,u._sqlite3mc_vfs_shutdown=e.sqlite3mc_vfs_shutdown,u._sqlite3_last_insert_rowid=e.sqlite3_last_insert_rowid,u._sqlite3_set_last_insert_rowid=e.sqlite3_set_last_insert_rowid,u._sqlite3_changes64=e.sqlite3_changes64,u._sqlite3_changes=e.sqlite3_changes,u._sqlite3_total_changes64=e.sqlite3_total_changes64,u._sqlite3_total_changes=e.sqlite3_total_changes,u._sqlite3_txn_state=e.sqlite3_txn_state,u._sqlite3_close_v2=e.sqlite3_close_v2,u._sqlite3_busy_handler=e.sqlite3_busy_handler,u._sqlite3_progress_handler=e.sqlite3_progress_handler,u._sqlite3_busy_timeout=e.sqlite3_busy_timeout,u._sqlite3_interrupt=e.sqlite3_interrupt,u._sqlite3_is_interrupted=e.sqlite3_is_interrupted,u._sqlite3_create_function=e.sqlite3_create_function,u._sqlite3_create_function_v2=e.sqlite3_create_function_v2,u._sqlite3_create_window_function=e.sqlite3_create_window_function,u._sqlite3_overload_function=e.sqlite3_overload_function,u._sqlite3_trace_v2=e.sqlite3_trace_v2,u._sqlite3_commit_hook=e.sqlite3_commit_hook,u._sqlite3_update_hook=e.sqlite3_update_hook,u._sqlite3_rollback_hook=e.sqlite3_rollback_hook,u._sqlite3_preupdate_hook=e.sqlite3_preupdate_hook,u._sqlite3_error_offset=e.sqlite3_error_offset,u._sqlite3_errcode=e.sqlite3_errcode,u._sqlite3_extended_errcode=e.sqlite3_extended_errcode,u._sqlite3_errstr=e.sqlite3_errstr,u._sqlite3_limit=e.sqlite3_limit,u._sqlite3_open=e.sqlite3_open,u._sqlite3_open_v2=e.sqlite3_open_v2,u._sqlite3_create_collation=e.sqlite3_create_collation,u._sqlite3_create_collation_v2=e.sqlite3_create_collation_v2,u._sqlite3_collation_needed=e.sqlite3_collation_needed,u._sqlite3_get_autocommit=e.sqlite3_get_autocommit,u._sqlite3_table_column_metadata=e.sqlite3_table_column_metadata,u._sqlite3_extended_result_codes=e.sqlite3_extended_result_codes,u._sqlite3_uri_key=e.sqlite3_uri_key,u._sqlite3_uri_int64=e.sqlite3_uri_int64,u._sqlite3_db_name=e.sqlite3_db_name,u._sqlite3_db_filename=e.sqlite3_db_filename,u._sqlite3_db_readonly=e.sqlite3_db_readonly,u._sqlite3_compileoption_used=e.sqlite3_compileoption_used,u._sqlite3_compileoption_get=e.sqlite3_compileoption_get,u._sqlite3session_diff=e.sqlite3session_diff,u._sqlite3session_attach=e.sqlite3session_attach,u._sqlite3session_create=e.sqlite3session_create,u._sqlite3session_delete=e.sqlite3session_delete,u._sqlite3session_table_filter=e.sqlite3session_table_filter,u._sqlite3session_changeset=e.sqlite3session_changeset,u._sqlite3session_changeset_strm=e.sqlite3session_changeset_strm,u._sqlite3session_patchset_strm=e.sqlite3session_patchset_strm,u._sqlite3session_patchset=e.sqlite3session_patchset,u._sqlite3session_enable=e.sqlite3session_enable,u._sqlite3session_indirect=e.sqlite3session_indirect,u._sqlite3session_isempty=e.sqlite3session_isempty,u._sqlite3session_memory_used=e.sqlite3session_memory_used,u._sqlite3session_object_config=e.sqlite3session_object_config,u._sqlite3session_changeset_size=e.sqlite3session_changeset_size,u._sqlite3changeset_start=e.sqlite3changeset_start,u._sqlite3changeset_start_v2=e.sqlite3changeset_start_v2,u._sqlite3changeset_start_strm=e.sqlite3changeset_start_strm,u._sqlite3changeset_start_v2_strm=e.sqlite3changeset_start_v2_strm,u._sqlite3changeset_next=e.sqlite3changeset_next,u._sqlite3changeset_op=e.sqlite3changeset_op,u._sqlite3changeset_pk=e.sqlite3changeset_pk,u._sqlite3changeset_old=e.sqlite3changeset_old,u._sqlite3changeset_new=e.sqlite3changeset_new,u._sqlite3changeset_conflict=e.sqlite3changeset_conflict,u._sqlite3changeset_fk_conflicts=e.sqlite3changeset_fk_conflicts,u._sqlite3changeset_finalize=e.sqlite3changeset_finalize,u._sqlite3changeset_invert=e.sqlite3changeset_invert,u._sqlite3changeset_invert_strm=e.sqlite3changeset_invert_strm,u._sqlite3changeset_apply_v2=e.sqlite3changeset_apply_v2,u._sqlite3changeset_apply=e.sqlite3changeset_apply,u._sqlite3changeset_apply_v2_strm=e.sqlite3changeset_apply_v2_strm,u._sqlite3changeset_apply_strm=e.sqlite3changeset_apply_strm,u._sqlite3changegroup_new=e.sqlite3changegroup_new,u._sqlite3changegroup_add=e.sqlite3changegroup_add,u._sqlite3changegroup_output=e.sqlite3changegroup_output,u._sqlite3changegroup_add_strm=e.sqlite3changegroup_add_strm,u._sqlite3changegroup_output_strm=e.sqlite3changegroup_output_strm,u._sqlite3changegroup_delete=e.sqlite3changegroup_delete,u._sqlite3changeset_concat=e.sqlite3changeset_concat,u._sqlite3changeset_concat_strm=e.sqlite3changeset_concat_strm,u._sqlite3session_config=e.sqlite3session_config,u._sqlite3_sourceid=e.sqlite3_sourceid,u._sqlite3mc_version=e.sqlite3mc_version,u._sqlite3mc_config=e.sqlite3mc_config,u._sqlite3mc_cipher_count=e.sqlite3mc_cipher_count,u._sqlite3mc_cipher_index=e.sqlite3mc_cipher_index,u._sqlite3mc_cipher_name=e.sqlite3mc_cipher_name,u._sqlite3mc_config_cipher=e.sqlite3mc_config_cipher,u._sqlite3mc_codec_data=e.sqlite3mc_codec_data,u._sqlite3_activate_see=e.sqlite3_activate_see,u._sqlite3_key=e.sqlite3_key,u._sqlite3_key_v2=e.sqlite3_key_v2,u._sqlite3_rekey_v2=e.sqlite3_rekey_v2,u._sqlite3_rekey=e.sqlite3_rekey,u._sqlite3mc_vfs_destroy=e.sqlite3mc_vfs_destroy,u._sqlite3__wasm_pstack_ptr=e.sqlite3__wasm_pstack_ptr,u._sqlite3__wasm_pstack_restore=e.sqlite3__wasm_pstack_restore,u._sqlite3__wasm_pstack_alloc=e.sqlite3__wasm_pstack_alloc,u._sqlite3__wasm_pstack_remaining=e.sqlite3__wasm_pstack_remaining,u._sqlite3__wasm_pstack_quota=e.sqlite3__wasm_pstack_quota,u._sqlite3__wasm_db_error=e.sqlite3__wasm_db_error,u._sqlite3__wasm_test_struct=e.sqlite3__wasm_test_struct,u._sqlite3__wasm_enum_json=e.sqlite3__wasm_enum_json,u._sqlite3__wasm_vfs_unlink=e.sqlite3__wasm_vfs_unlink,u._sqlite3__wasm_db_vfs=e.sqlite3__wasm_db_vfs,u._sqlite3__wasm_db_reset=e.sqlite3__wasm_db_reset,u._sqlite3__wasm_db_export_chunked=e.sqlite3__wasm_db_export_chunked,u._sqlite3__wasm_db_serialize=e.sqlite3__wasm_db_serialize,u._sqlite3__wasm_vfs_create_file=e.sqlite3__wasm_vfs_create_file,u._sqlite3__wasm_posix_create_file=e.sqlite3__wasm_posix_create_file,u._sqlite3__wasm_kvvfsMakeKeyOnPstack=e.sqlite3__wasm_kvvfsMakeKeyOnPstack,u._sqlite3__wasm_kvvfs_methods=e.sqlite3__wasm_kvvfs_methods,u._sqlite3__wasm_vtab_config=e.sqlite3__wasm_vtab_config,u._sqlite3__wasm_db_config_ip=e.sqlite3__wasm_db_config_ip,u._sqlite3__wasm_db_config_pii=e.sqlite3__wasm_db_config_pii,u._sqlite3__wasm_db_config_s=e.sqlite3__wasm_db_config_s,u._sqlite3__wasm_config_i=e.sqlite3__wasm_config_i,u._sqlite3__wasm_config_ii=e.sqlite3__wasm_config_ii,u._sqlite3__wasm_config_j=e.sqlite3__wasm_config_j,u._sqlite3__wasm_qfmt_token=e.sqlite3__wasm_qfmt_token,u._sqlite3__wasm_init_wasmfs=e.sqlite3__wasm_init_wasmfs,u._sqlite3__wasm_test_intptr=e.sqlite3__wasm_test_intptr,u._sqlite3__wasm_test_voidptr=e.sqlite3__wasm_test_voidptr,u._sqlite3__wasm_test_int64_max=e.sqlite3__wasm_test_int64_max,u._sqlite3__wasm_test_int64_min=e.sqlite3__wasm_test_int64_min,u._sqlite3__wasm_test_int64_times2=e.sqlite3__wasm_test_int64_times2,u._sqlite3__wasm_test_int64_minmax=e.sqlite3__wasm_test_int64_minmax,u._sqlite3__wasm_test_int64ptr=e.sqlite3__wasm_test_int64ptr,u._sqlite3__wasm_test_stack_overflow=e.sqlite3__wasm_test_stack_overflow,u._sqlite3__wasm_test_str_hello=e.sqlite3__wasm_test_str_hello,u._sqlite3__wasm_SQLTester_strglob=e.sqlite3__wasm_SQLTester_strglob,u._malloc=e.malloc,u._free=e.free,u._realloc=e.realloc,At=e.emscripten_builtin_memalign,e._emscripten_stack_restore,e._emscripten_stack_alloc,e.emscripten_stack_get_current}var Et={__syscall_chmod:Zt,__syscall_faccessat:en,__syscall_fchmod:tn,__syscall_fchown32:nn,__syscall_fcntl64:rn,__syscall_fstat64:sn,__syscall_ftruncate64:an,__syscall_getcwd:cn,__syscall_ioctl:_n,__syscall_lstat64:un,__syscall_mkdirat:fn,__syscall_newfstatat:dn,__syscall_openat:pn,__syscall_readlinkat:hn,__syscall_rmdir:gn,__syscall_stat64:mn,__syscall_unlinkat:yn,__syscall_utimensat:bn,_abort_js:qn,_localtime_js:En,_mmap_js:In,_munmap_js:kn,_tzset_js:xn,clock_time_get:Fn,emscripten_date_now:St,emscripten_get_now:wt,emscripten_resize_heap:Ln,environ_get:Dn,environ_sizes_get:Rn,exit:Un,fd_close:zn,fd_fdstat_get:Qn,fd_read:Hn,fd_seek:Vn,fd_sync:Gn,fd_write:Kn,memory:Ee,random_get:Jn},Le=await Bt();function rt(){if(Ie>0){Ne=rt;return}if(Ot(),Ie>0){Ne=rt;return}function e(){u.calledRun=!0,!Ke&&(Pt(),ot?.(u),u.onRuntimeInitialized?.(),Lt())}u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),e()},1)):e()}function Yn(){if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.shift()()}return Yn(),rt(),u.runSQLite3PostLoadInit=function(e){if(globalThis.sqlite3ApiBootstrap=function t(i=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const n=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof u<"u"&&u.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},i||{});Object.assign(n,{allocExportName:n.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:n.useStdAlloc?"free":"sqlite3_free",reallocExportName:n.useStdAlloc?"realloc":"sqlite3_realloc"},n),["exports","memory","wasmfsOpfsDir"].forEach(s=>{typeof n[s]=="function"&&(n[s]=n[s]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const r=Object.create(null),o=Object.create(null),h=s=>r.sqlite3_js_rc_str&&r.sqlite3_js_rc_str(s)||"Unknown result code #"+s,g=s=>typeof s=="number"&&s===(s|0);class L extends Error{constructor(...a){let _;if(a.length)if(g(a[0]))if(_=a[0],a.length===1)super(h(a[0]));else{const d=h(_);typeof a[1]=="object"?super(d,a[1]):(a[0]=d+":",super(a.join(" ")))}else a.length===2&&typeof a[1]=="object"?super(...a):super(a.join(" "));this.resultCode=_||r.SQLITE_ERROR,this.name="SQLite3Error"}}L.toss=(...s)=>{throw new L(...s)};const C=L.toss;n.wasmfsOpfsDir&&!/^\/[^/]+$/.test(n.wasmfsOpfsDir)&&C("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const z=s=>typeof s!="bigint"&&s===(s|0)&&s<=2147483647&&s>=-2147483648,W=function s(a){return s._max||(s._max=BigInt("0x7fffffffffffffff"),s._min=~s._max),a>=s._min&&a<=s._max},x=s=>s>=-0x7fffffffn-1n&&s<=0x7fffffffn,E=function s(a){return s._min||(s._min=Number.MIN_SAFE_INTEGER,s._max=Number.MAX_SAFE_INTEGER),a>=s._min&&a<=s._max},M=s=>s&&s.constructor&&z(s.constructor.BYTES_PER_ELEMENT)?s:!1,p=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,m=s=>s.buffer instanceof p,w=(s,a,_)=>m(s)?s.slice(a,_):s.subarray(a,_),T=s=>s&&(s instanceof Uint8Array||s instanceof Int8Array||s instanceof ArrayBuffer),F=s=>s&&(s instanceof Uint8Array||s instanceof Int8Array||s instanceof ArrayBuffer),S=s=>T(s)||C("Value is not of a supported TypedArray type."),D=new TextDecoder("utf-8"),$=function(s,a,_){return D.decode(w(s,a,_))},c=function(s){return F(s)?$(s instanceof ArrayBuffer?new Uint8Array(s):s):Array.isArray(s)?s.join(""):(o.isPtr(s)&&(s=o.cstrToJs(s)),s)};class f extends Error{constructor(...a){a.length===2&&typeof a[1]=="object"?super(...a):a.length?super(a.join(" ")):super("Allocation failed."),this.resultCode=r.SQLITE_NOMEM,this.name="WasmAllocError"}}f.toss=(...s)=>{throw new f(...s)},Object.assign(r,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(s,a,_,d,A,V,Z,re,ne)=>{},sqlite3_create_function:(s,a,_,d,A,V,Z,re)=>{},sqlite3_create_window_function:(s,a,_,d,A,V,Z,re,ne,U)=>{},sqlite3_prepare_v3:(s,a,_,d,A,V)=>{},sqlite3_prepare_v2:(s,a,_,d,A)=>{},sqlite3_exec:(s,a,_,d,A)=>{},sqlite3_randomness:(s,a)=>{}});const b={affirmBindableTypedArray:S,flexibleString:c,bigIntFits32:x,bigIntFits64:W,bigIntFitsDouble:E,isBindableTypedArray:T,isInt32:z,isSQLableTypedArray:F,isTypedArray:M,typedArrayToString:$,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:m,toss:function(...s){throw new Error(s.join(" "))},toss3:C,typedArrayPart:w,affirmDbHeader:function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));const a="SQLite format 3";a.length>s.byteLength&&C("Input does not contain an SQLite3 database header.");for(let _=0;_<a.length;++_)a.charCodeAt(_)!==s[_]&&C("Input does not contain an SQLite3 database header.")},affirmIsDb:function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));const a=s.byteLength;(a<512||a%512!==0)&&C("Byte array size",a,"is invalid for an SQLite3 db."),b.affirmDbHeader(s)}};Object.assign(o,{ptrSizeof:n.wasmPtrSizeof||4,ptrIR:n.wasmPtrIR||"i32",bigIntEnabled:!!n.bigIntEnabled,exports:n.exports||C("Missing API config.exports (WASM module exports)."),memory:n.memory||n.exports.memory||C("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),o.allocFromTypedArray=function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s)),S(s);const a=o.alloc(s.byteLength||1);return o.heapForSize(s.constructor).set(s.byteLength?s:[0],a),a};{const s=n.allocExportName,a=n.deallocExportName,_=n.reallocExportName;for(const d of[s,a,_])o.exports[d]instanceof Function||C("Missing required exports[",d,"] function.");o.alloc=function d(A){return d.impl(A)||f.toss("Failed to allocate",A," bytes.")},o.alloc.impl=o.exports[s],o.realloc=function d(A,V){const Z=d.impl(A,V);return V?Z||f.toss("Failed to reallocate",V," bytes."):0},o.realloc.impl=o.exports[_],o.dealloc=o.exports[a]}o.compileOptionUsed=function s(a){if(arguments.length){if(Array.isArray(a)){const _={};return a.forEach(d=>{_[d]=r.sqlite3_compileoption_used(d)}),_}else if(typeof a=="object")return Object.keys(a).forEach(_=>{a[_]=r.sqlite3_compileoption_used(_)}),a}else{if(s._result)return s._result;s._opt||(s._rx=/^([^=]+)=(.+)/,s._rxInt=/^-?\d+$/,s._opt=function(Z,re){const ne=s._rx.exec(Z);re[0]=ne?ne[1]:Z,re[1]=ne?s._rxInt.test(ne[2])?+ne[2]:ne[2]:!0});const _={},d=[0,0];let A=0,V;for(;V=r.sqlite3_compileoption_get(A++);)s._opt(V,d),_[d[0]]=d[1];return s._result=_}return typeof a=="string"?!!r.sqlite3_compileoption_used(a):!1},o.pstack=Object.assign(Object.create(null),{restore:o.exports.sqlite3__wasm_pstack_restore,alloc:function(s){return typeof s=="string"&&!(s=o.sizeofIR(s))&&f.toss("Invalid value for pstack.alloc(",arguments[0],")"),o.exports.sqlite3__wasm_pstack_alloc(s)||f.toss("Could not allocate",s,"bytes from the pstack.")},allocChunks:function(s,a){typeof a=="string"&&!(a=o.sizeofIR(a))&&f.toss("Invalid size value for allocChunks(",arguments[1],")");const _=o.pstack.alloc(s*a),d=[];let A=0,V=0;for(;A<s;++A,V+=a)d.push(_+V);return d},allocPtr:(s=1,a=!0)=>s===1?o.pstack.alloc(a?8:o.ptrSizeof):o.pstack.allocChunks(s,a?8:o.ptrSizeof),call:function(s){const a=o.pstack.pointer;try{return s(B)}finally{o.pstack.restore(a)}}}),Object.defineProperties(o.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_remaining}}),r.sqlite3_randomness=(...s)=>{if(s.length===1&&b.isTypedArray(s[0])&&s[0].BYTES_PER_ELEMENT===1){const a=s[0];if(a.byteLength===0)return o.exports.sqlite3_randomness(0,0),a;const _=o.pstack.pointer;try{let d=a.byteLength,A=0;const V=o.exports.sqlite3_randomness,Z=o.heap8u(),re=d<512?d:512,ne=o.pstack.alloc(re);do{const U=d>re?re:d;V(U,ne),a.set(w(Z,ne,ne+U),A),d-=U,A+=U}while(d>0)}catch(d){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",d)}finally{o.pstack.restore(_)}return a}o.exports.sqlite3_randomness(...s)};let j;if(r.sqlite3_wasmfs_opfs_dir=function(){if(j!==void 0)return j;const s=n.wasmfsOpfsDir;if(!s||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return j="";try{return s&&o.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],s)===0?j=s:j=""}catch{return j=""}},r.sqlite3_wasmfs_filename_is_persistent=function(s){const a=r.sqlite3_wasmfs_opfs_dir();return a&&s?s.startsWith(a+"/"):!1},r.sqlite3_js_db_uses_vfs=function(s,a,_=0){try{const d=r.sqlite3_vfs_find(a);return d?s?d===r.sqlite3_js_db_vfs(s,_)?d:!1:d===r.sqlite3_vfs_find(0)?d:!1:!1}catch{return!1}},r.sqlite3_js_vfs_list=function(){const s=[];let a=r.sqlite3_vfs_find(0);for(;a;){const _=new r.sqlite3_vfs(a);s.push(o.cstrToJs(_.$zName)),a=_.$pNext,_.dispose()}return s},r.sqlite3_js_db_export=function(s,a=0){s=o.xWrap.testConvertArg("sqlite3*",s),s||C("Invalid sqlite3* argument."),o.bigIntEnabled||C("BigInt64 support is not enabled.");const _=o.scopedAllocPush();let d;try{const A=o.scopedAlloc(8+o.ptrSizeof),V=A+8,Z=a?o.isPtr(a)?a:o.scopedAllocCString(""+a):0;let re=o.exports.sqlite3__wasm_db_serialize(s,Z,V,A,0);re&&C("Database serialization failed with code",B.capi.sqlite3_js_rc_str(re)),d=o.peekPtr(V);const ne=o.peek(A,"i64");return re=ne?o.heap8u().slice(d,d+Number(ne)):new Uint8Array,re}finally{d&&o.exports.sqlite3_free(d),o.scopedAllocPop(_)}},r.sqlite3_js_db_vfs=(s,a=0)=>b.sqlite3__wasm_db_vfs(s,a),r.sqlite3_js_aggregate_context=(s,a)=>r.sqlite3_aggregate_context(s,a)||(a?f.toss("Cannot allocate",a,"bytes for sqlite3_aggregate_context()"):0),r.sqlite3_js_posix_create_file=function(s,a,_){let d;a&&o.isPtr(a)?d=a:a instanceof ArrayBuffer||a instanceof Uint8Array?(d=o.allocFromTypedArray(a),(arguments.length<3||!b.isInt32(_)||_<0)&&(_=a.byteLength)):L.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!b.isInt32(_)||_<0)&&L.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const A=b.sqlite3__wasm_posix_create_file(s,d,_);A&&L.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(A))}finally{o.dealloc(d)}},r.sqlite3_js_vfs_create_file=function(s,a,_,d){n.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let A;_?(o.isPtr(_)?A=_:_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),_ instanceof Uint8Array?(A=o.allocFromTypedArray(_),(arguments.length<4||!b.isInt32(d)||d<0)&&(d=_.byteLength)):L.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):A=0,(!b.isInt32(d)||d<0)&&(o.dealloc(A),L.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const V=b.sqlite3__wasm_vfs_create_file(s,a,A,d);V&&L.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(V))}finally{o.dealloc(A)}},r.sqlite3_js_sql_to_string=s=>{if(typeof s=="string")return s;const a=c(v);return a===v?void 0:a},b.isUIThread()){const s=function(a){const _=Object.create(null);return _.prefix="kvvfs-"+a,_.stores=[],(a==="session"||a==="")&&_.stores.push(globalThis.sessionStorage),(a==="local"||a==="")&&_.stores.push(globalThis.localStorage),_};r.sqlite3_js_kvvfs_clear=function(a=""){let _=0;const d=s(a);return d.stores.forEach(A=>{const V=[];let Z;for(Z=0;Z<A.length;++Z){const re=A.key(Z);re.startsWith(d.prefix)&&V.push(re)}V.forEach(re=>A.removeItem(re)),_+=V.length}),_},r.sqlite3_js_kvvfs_size=function(a=""){let _=0;const d=s(a);return d.stores.forEach(A=>{let V;for(V=0;V<A.length;++V){const Z=A.key(V);Z.startsWith(d.prefix)&&(_+=Z.length,_+=A.getItem(Z).length)}}),_*2}}r.sqlite3_db_config=(function(s,a,..._){switch(a){case r.SQLITE_DBCONFIG_ENABLE_FKEY:case r.SQLITE_DBCONFIG_ENABLE_TRIGGER:case r.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case r.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case r.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case r.SQLITE_DBCONFIG_ENABLE_QPSG:case r.SQLITE_DBCONFIG_TRIGGER_EQP:case r.SQLITE_DBCONFIG_RESET_DATABASE:case r.SQLITE_DBCONFIG_DEFENSIVE:case r.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case r.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case r.SQLITE_DBCONFIG_DQS_DML:case r.SQLITE_DBCONFIG_DQS_DDL:case r.SQLITE_DBCONFIG_ENABLE_VIEW:case r.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case r.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case r.SQLITE_DBCONFIG_STMT_SCANSTATUS:case r.SQLITE_DBCONFIG_REVERSE_SCANORDER:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case r.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=o.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(s,a,_[0],_[1]||0);case r.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=o.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(s,a,_[0],_[1],_[2]);case r.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=o.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(s,a,_[0]);default:return r.SQLITE_MISUSE}}).bind(Object.create(null)),r.sqlite3_value_to_js=function(s,a=!0){let _;const d=r.sqlite3_value_type(s);switch(d){case r.SQLITE_INTEGER:o.bigIntEnabled?(_=r.sqlite3_value_int64(s),b.bigIntFitsDouble(_)&&(_=Number(_))):_=r.sqlite3_value_double(s);break;case r.SQLITE_FLOAT:_=r.sqlite3_value_double(s);break;case r.SQLITE_TEXT:_=r.sqlite3_value_text(s);break;case r.SQLITE_BLOB:{const A=r.sqlite3_value_bytes(s),V=r.sqlite3_value_blob(s);A&&!V&&B.WasmAllocError.toss("Cannot allocate memory for blob argument of",A,"byte(s)"),_=A?o.heap8u().slice(V,V+Number(A)):null;break}case r.SQLITE_NULL:_=null;break;default:a&&C(r.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",d),_=void 0}return _},r.sqlite3_values_to_js=function(s,a,_=!0){let d;const A=[];for(d=0;d<s;++d)A.push(r.sqlite3_value_to_js(o.peekPtr(a+o.ptrSizeof*d),_));return A},r.sqlite3_result_error_js=function(s,a){a instanceof f?r.sqlite3_result_error_nomem(s):r.sqlite3_result_error(s,""+a,-1)},r.sqlite3_result_js=function(s,a){if(a instanceof Error){r.sqlite3_result_error_js(s,a);return}try{switch(typeof a){case"undefined":break;case"boolean":r.sqlite3_result_int(s,a?1:0);break;case"bigint":b.bigIntFits32(a)?r.sqlite3_result_int(s,Number(a)):b.bigIntFitsDouble(a)?r.sqlite3_result_double(s,Number(a)):o.bigIntEnabled?b.bigIntFits64(a)?r.sqlite3_result_int64(s,a):C("BigInt value",a.toString(),"is too BigInt for int64."):C("BigInt value",a.toString(),"is too BigInt.");break;case"number":{let _;b.isInt32(a)?_=r.sqlite3_result_int:o.bigIntEnabled&&Number.isInteger(a)&&b.bigIntFits64(BigInt(a))?_=r.sqlite3_result_int64:_=r.sqlite3_result_double,_(s,a);break}case"string":{const[_,d]=o.allocCString(a,!0);r.sqlite3_result_text(s,_,d,r.SQLITE_WASM_DEALLOC);break}case"object":if(a===null){r.sqlite3_result_null(s);break}else if(b.isBindableTypedArray(a)){const _=o.allocFromTypedArray(a);r.sqlite3_result_blob(s,_,a.byteLength,r.SQLITE_WASM_DEALLOC);break}default:C("Don't not how to handle this UDF result value:",typeof a,a)}}catch(_){r.sqlite3_result_error_js(s,_)}},r.sqlite3_column_js=function(s,a,_=!0){const d=r.sqlite3_column_value(s,a);return d===0?void 0:r.sqlite3_value_to_js(d,_)};const P=(function(s,a,_){_=r[_],this.ptr?o.pokePtr(this.ptr,0):this.ptr=o.allocPtr();const d=_(s,a,this.ptr);if(d)return L.toss(d,arguments[2]+"() failed with code "+d);const A=o.peekPtr(this.ptr);return A?r.sqlite3_value_to_js(A,!0):void 0}).bind(Object.create(null));r.sqlite3_preupdate_new_js=(s,a)=>P(s,a,"sqlite3_preupdate_new"),r.sqlite3_preupdate_old_js=(s,a)=>P(s,a,"sqlite3_preupdate_old"),r.sqlite3changeset_new_js=(s,a)=>P(s,a,"sqlite3changeset_new"),r.sqlite3changeset_old_js=(s,a)=>P(s,a,"sqlite3changeset_old");const B={WasmAllocError:f,SQLite3Error:L,capi:r,util:b,wasm:o,config:n,version:Object.create(null),client:void 0,asyncPostInit:async function s(){if(s.isReady instanceof Promise)return s.isReady;let a=t.initializersAsync;delete t.initializersAsync;const _=async()=>(B.__isUnderTest||(delete B.util,delete B.StructBinder),B),d=V=>{throw n.error("an async sqlite3 initializer failed:",V),V};if(!a||!a.length)return s.isReady=_().catch(d);a=a.map(V=>V instanceof Function?async Z=>V(B):V),a.push(_);let A=Promise.resolve(B);for(;a.length;)A=A.then(a.shift());return s.isReady=A.catch(d)},scriptInfo:void 0};try{t.initializers.forEach(s=>{s(B)})}catch(s){throw console.error("sqlite3 bootstrap initializer threw:",s),s}return delete t.initializers,t.sqlite3=B,B},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const i=(...c)=>{throw new Error(c.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const n=t.pointerIR||"i32",r=t.ptrSizeof=n==="i32"?4:n==="i64"?8:i("Unhandled ptrSizeof:",n),o=Object.create(null);o.heapSize=0,o.memory=null,o.freeFuncIndexes=[],o.scopedAlloc=[],o.utf8Decoder=new TextDecoder,o.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=c=>{switch(c){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return r;default:return(""+c).endsWith("*")?r:void 0}};const h=function(){if(!o.memory)o.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(o.heapSize===o.memory.buffer.byteLength)return o;const c=o.memory.buffer;return o.HEAP8=new Int8Array(c),o.HEAP8U=new Uint8Array(c),o.HEAP16=new Int16Array(c),o.HEAP16U=new Uint16Array(c),o.HEAP32=new Int32Array(c),o.HEAP32U=new Uint32Array(c),t.bigIntEnabled&&(o.HEAP64=new BigInt64Array(c),o.HEAP64U=new BigUint64Array(c)),o.HEAP32F=new Float32Array(c),o.HEAP64F=new Float64Array(c),o.heapSize=c.byteLength,o};t.heap8=()=>h().HEAP8,t.heap8u=()=>h().HEAP8U,t.heap16=()=>h().HEAP16,t.heap16u=()=>h().HEAP16U,t.heap32=()=>h().HEAP32,t.heap32u=()=>h().HEAP32U,t.heapForSize=function(c,f=!0){const b=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:h();switch(c){case Int8Array:return b.HEAP8;case Uint8Array:return b.HEAP8U;case Int16Array:return b.HEAP16;case Uint16Array:return b.HEAP16U;case Int32Array:return b.HEAP32;case Uint32Array:return b.HEAP32U;case 8:return f?b.HEAP8U:b.HEAP8;case 16:return f?b.HEAP16U:b.HEAP16;case 32:return f?b.HEAP32U:b.HEAP32;case 64:if(b.HEAP64)return f?b.HEAP64U:b.HEAP64;break;default:if(t.bigIntEnabled){if(c===globalThis.BigUint64Array)return b.HEAP64U;if(c===globalThis.BigInt64Array)return b.HEAP64;break}}i("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(c){const f=t.functionTable();return c<f.length?f.get(c):void 0},t.jsFuncToWasm=function c(f,b){if(c._||(c._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(B,s,a){a<128?B[s](a):B[s](a%128|128,a>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(B){const s=c._.rxJSig.exec(B);return s?s[2]:B.substr(1)},letterType:B=>c._.sigTypes[B]||i("Invalid signature letter:",B),pushSigType:(B,s)=>B.push(c._.typeCodes[c._.letterType(s)])}),typeof f=="string"){const B=b;b=f,f=B}const j=c._.sigParams(b),P=[1,96];c._.uleb128Encode(P,"push",j.length);for(const B of j)c._.pushSigType(P,B);return b[0]==="v"?P.push(0):(P.push(1),c._.pushSigType(P,b[0])),c._.uleb128Encode(P,"unshift",P.length),P.unshift(0,97,115,109,1,0,0,0,1),P.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(P)),{e:{f}}).exports.f};const g=function(f,b,j){if(j&&!o.scopedAlloc.length&&i("No scopedAllocPush() scope is active."),typeof f=="string"){const a=b;b=f,f=a}(typeof b!="string"||!(f instanceof Function))&&i("Invalid arguments: expecting (function,signature) or (signature,function).");const P=t.functionTable(),B=P.length;let s;for(;o.freeFuncIndexes.length&&(s=o.freeFuncIndexes.pop(),P.get(s));){s=null;continue}s||(s=B,P.grow(1));try{return P.set(s,f),j&&o.scopedAlloc[o.scopedAlloc.length-1].push(s),s}catch(a){if(!(a instanceof TypeError))throw s===B&&o.freeFuncIndexes.push(B),a}try{const a=t.jsFuncToWasm(f,b);P.set(s,a),j&&o.scopedAlloc[o.scopedAlloc.length-1].push(s)}catch(a){throw s===B&&o.freeFuncIndexes.push(B),a}return s};t.installFunction=(c,f)=>g(c,f,!1),t.scopedInstallFunction=(c,f)=>g(c,f,!0),t.uninstallFunction=function(c){if(!c&&c!==0)return;const f=o.freeFuncIndexes,b=t.functionTable();f.push(c);const j=b.get(c);return b.set(c,null),j},t.peek=function(f,b="i8"){b.endsWith("*")&&(b=n);const j=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:h(),P=Array.isArray(f)?[]:void 0;let B;do{switch(P&&(f=arguments[0].shift()),b){case"i1":case"i8":B=j.HEAP8[f>>0];break;case"i16":B=j.HEAP16[f>>1];break;case"i32":B=j.HEAP32[f>>2];break;case"float":case"f32":B=j.HEAP32F[f>>2];break;case"double":case"f64":B=Number(j.HEAP64F[f>>3]);break;case"i64":if(t.bigIntEnabled){B=BigInt(j.HEAP64[f>>3]);break}default:i("Invalid type for peek():",b)}P&&P.push(B)}while(P&&arguments[0].length);return P||B},t.poke=function(c,f,b="i8"){b.endsWith("*")&&(b=n);const j=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:h();for(const P of Array.isArray(c)?c:[c])switch(b){case"i1":case"i8":j.HEAP8[P>>0]=f;continue;case"i16":j.HEAP16[P>>1]=f;continue;case"i32":j.HEAP32[P>>2]=f;continue;case"float":case"f32":j.HEAP32F[P>>2]=f;continue;case"double":case"f64":j.HEAP64F[P>>3]=f;continue;case"i64":if(j.HEAP64){j.HEAP64[P>>3]=BigInt(f);continue}default:i("Invalid type for poke(): "+b)}return this},t.peekPtr=(...c)=>t.peek(c.length===1?c[0]:c,n),t.pokePtr=(c,f=0)=>t.poke(c,f,n),t.peek8=(...c)=>t.peek(c.length===1?c[0]:c,"i8"),t.poke8=(c,f)=>t.poke(c,f,"i8"),t.peek16=(...c)=>t.peek(c.length===1?c[0]:c,"i16"),t.poke16=(c,f)=>t.poke(c,f,"i16"),t.peek32=(...c)=>t.peek(c.length===1?c[0]:c,"i32"),t.poke32=(c,f)=>t.poke(c,f,"i32"),t.peek64=(...c)=>t.peek(c.length===1?c[0]:c,"i64"),t.poke64=(c,f)=>t.poke(c,f,"i64"),t.peek32f=(...c)=>t.peek(c.length===1?c[0]:c,"f32"),t.poke32f=(c,f)=>t.poke(c,f,"f32"),t.peek64f=(...c)=>t.peek(c.length===1?c[0]:c,"f64"),t.poke64f=(c,f)=>t.poke(c,f,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=c=>typeof c=="number"&&c===(c|0)&&c>=0,t.isPtr=t.isPtr32,t.cstrlen=function(c){if(!c||!t.isPtr(c))return null;const f=h().HEAP8U;let b=c;for(;f[b]!==0;++b);return b-c};const L=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,C=function(c,f,b){return o.utf8Decoder.decode(c.buffer instanceof L?c.slice(f,b):c.subarray(f,b))};t.cstrToJs=function(c){const f=t.cstrlen(c);return f?C(h().HEAP8U,c,c+f):f===null?f:""},t.jstrlen=function(c){if(typeof c!="string")return null;const f=c.length;let b=0;for(let j=0;j<f;++j){let P=c.charCodeAt(j);P>=55296&&P<=57343&&(P=65536+((P&1023)<<10)|c.charCodeAt(++j)&1023),P<=127?++b:P<=2047?b+=2:P<=65535?b+=3:b+=4}return b},t.jstrcpy=function(c,f,b=0,j=-1,P=!0){if((!f||!(f instanceof Int8Array)&&!(f instanceof Uint8Array))&&i("jstrcpy() target must be an Int8Array or Uint8Array."),j<0&&(j=f.length-b),!(j>0)||!(b>=0))return 0;let B=0,s=c.length;const a=b,_=b+j-(P?1:0);for(;B<s&&b<_;++B){let d=c.charCodeAt(B);if(d>=55296&&d<=57343&&(d=65536+((d&1023)<<10)|c.charCodeAt(++B)&1023),d<=127){if(b>=_)break;f[b++]=d}else if(d<=2047){if(b+1>=_)break;f[b++]=192|d>>6,f[b++]=128|d&63}else if(d<=65535){if(b+2>=_)break;f[b++]=224|d>>12,f[b++]=128|d>>6&63,f[b++]=128|d&63}else{if(b+3>=_)break;f[b++]=240|d>>18,f[b++]=128|d>>12&63,f[b++]=128|d>>6&63,f[b++]=128|d&63}}return P&&(f[b++]=0),b-a},t.cstrncpy=function(c,f,b){if((!c||!f)&&i("cstrncpy() does not accept NULL strings."),b<0)b=t.cstrlen(strPtr)+1;else if(!(b>0))return 0;const j=t.heap8u();let P=0,B;for(;P<b&&(B=j[f+P]);++P)j[c+P]=B;return P<b&&(j[c+P++]=0),P},t.jstrToUintArray=(c,f=!1)=>o.utf8Encoder.encode(f?c+"\0":c);const z=(c,f)=>{(!(c.alloc instanceof Function)||!(c.dealloc instanceof Function))&&i("Object is missing alloc() and/or dealloc() function(s)","required by",f+"().")},W=function(c,f,b,j){if(z(t,j),typeof c!="string")return null;{const P=o.utf8Encoder.encode(c),B=b(P.length+1),s=h().HEAP8U;return s.set(P,B),s[B+P.length]=0,f?[B,P.length]:B}};t.allocCString=(c,f=!1)=>W(c,f,t.alloc,"allocCString()"),t.scopedAllocPush=function(){z(t,"scopedAllocPush");const c=[];return o.scopedAlloc.push(c),c},t.scopedAllocPop=function(c){z(t,"scopedAllocPop");const f=arguments.length?o.scopedAlloc.indexOf(c):o.scopedAlloc.length-1;f<0&&i("Invalid state object for scopedAllocPop()."),arguments.length===0&&(c=o.scopedAlloc[f]),o.scopedAlloc.splice(f,1);for(let b;b=c.pop();)t.functionEntry(b)?t.uninstallFunction(b):t.dealloc(b)},t.scopedAlloc=function(c){o.scopedAlloc.length||i("No scopedAllocPush() scope is active.");const f=t.alloc(c);return o.scopedAlloc[o.scopedAlloc.length-1].push(f),f},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>o.scopedAlloc.length,set:()=>i("The 'active' property is read-only.")}),t.scopedAllocCString=(c,f=!1)=>W(c,f,t.scopedAlloc,"scopedAllocCString()");const x=function(c,f){const b=t[c?"scopedAlloc":"alloc"]((f.length+1)*t.ptrSizeof);let j=0;return f.forEach(P=>{t.pokePtr(b+t.ptrSizeof*j++,t[c?"scopedAllocCString":"allocCString"](""+P))}),t.pokePtr(b+t.ptrSizeof*j,0),b};t.scopedAllocMainArgv=c=>x(!0,c),t.allocMainArgv=c=>x(!1,c),t.cArgvToJs=(c,f)=>{const b=[];for(let j=0;j<c;++j){const P=t.peekPtr(f+t.ptrSizeof*j);b.push(P?t.cstrToJs(P):null)}return b},t.scopedAllocCall=function(c){t.scopedAllocPush();try{return c()}finally{t.scopedAllocPop()}};const E=function(c,f,b){z(t,b);const j=f?"i64":n;let P=t[b](c*(f?8:r));if(t.poke(P,0,j),c===1)return P;const B=[P];for(let s=1;s<c;++s)P+=f?8:r,B[s]=P,t.poke(P,0,j);return B};t.allocPtr=(c=1,f=!0)=>E(c,f,"alloc"),t.scopedAllocPtr=(c=1,f=!0)=>E(c,f,"scopedAlloc"),t.xGet=function(c){return t.exports[c]||i("Cannot find exported symbol:",c)};const M=(c,f)=>i(c+"() requires",f,"argument(s).");t.xCall=function(c,...f){const b=c instanceof Function?c:t.xGet(c);return b instanceof Function||i("Exported symbol",c,"is not a function."),b.length!==f.length&&M(b===c?b.name:c,b.length),arguments.length===2&&Array.isArray(arguments[1])?b.apply(null,arguments[1]):b.apply(null,f)},o.xWrap=Object.create(null),o.xWrap.convert=Object.create(null),o.xWrap.convert.arg=new Map,o.xWrap.convert.result=new Map;const p=o.xWrap.convert.arg,m=o.xWrap.convert.result;t.bigIntEnabled&&p.set("i64",c=>BigInt(c));const w=n==="i32"?c=>c|0:c=>BigInt(c)|BigInt(0);p.set("i32",w).set("i16",c=>(c|0)&65535).set("i8",c=>(c|0)&255).set("f32",c=>Number(c).valueOf()).set("float",p.get("f32")).set("f64",p.get("f32")).set("double",p.get("f64")).set("int",p.get("i32")).set("null",c=>c).set(null,p.get("null")).set("**",w).set("*",w),m.set("*",w).set("pointer",w).set("number",c=>Number(c)).set("void",c=>{}).set("null",c=>c).set(null,m.get("null"));{const c=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&c.push("i64");const f=p.get(n);for(const b of c)p.set(b+"*",f),m.set(b+"*",f),m.set(b,p.get(b)||i("Missing arg converter:",b))}const T=function(c){return typeof c=="string"?t.scopedAllocCString(c):c?w(c):null};p.set("string",T).set("utf8",T).set("pointer",T),m.set("string",c=>t.cstrToJs(c)).set("utf8",m.get("string")).set("string:dealloc",c=>{try{return c?t.cstrToJs(c):null}finally{t.dealloc(c)}}).set("utf8:dealloc",m.get("string:dealloc")).set("json",c=>JSON.parse(t.cstrToJs(c))).set("json:dealloc",c=>{try{return c?JSON.parse(t.cstrToJs(c)):null}finally{t.dealloc(c)}});const F=class{constructor(c){this.name=c.name||"unnamed adapter"}convertArg(c,f,b){i("AbstractArgAdapter must be subclassed.")}};p.FuncPtrAdapter=class ve extends F{constructor(f){super(f),p.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",f),this.name=f.name||"unnamed",this.signature=f.signature,f.contextKey instanceof Function&&(this.contextKey=f.contextKey,f.bindScope||(f.bindScope="context")),this.bindScope=f.bindScope||i("FuncPtrAdapter options requires a bindScope (explicit or implied)."),ve.bindScopes.indexOf(f.bindScope)<0&&i("Invalid options.bindScope ("+f.bindMod+") for FuncPtrAdapter. Expecting one of: ("+ve.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=f.callProxy instanceof Function?f.callProxy:void 0}contextKey(f,b){return this}contextMap(f){const b=this.__cmap||(this.__cmap=new Map);let j=b.get(f);return j===void 0&&b.set(f,j=[]),j}convertArg(f,b,j){let P=this.singleton;if(!P&&this.isContext&&(P=this.contextMap(this.contextKey(b,j))),P&&P[0]===f)return P[1];if(f instanceof Function){this.callProxy&&(f=this.callProxy(f));const B=g(f,this.signature,this.isTransient);if(ve.debugFuncInstall&&ve.debugOut("FuncPtrAdapter installed",this,this.contextKey(b,j),"@"+B,f),P){if(P[1]){ve.debugFuncInstall&&ve.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(b,j),"@"+P[1],f);try{o.scopedAlloc[o.scopedAlloc.length-1].push(P[1])}catch{}}P[0]=f,P[1]=B}return B}else if(t.isPtr(f)||f===null||f===void 0){if(P&&P[1]&&P[1]!==f){ve.debugFuncInstall&&ve.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(b,j),"@"+P[1],f);try{o.scopedAlloc[o.scopedAlloc.length-1].push(P[1])}catch{}P[0]=P[1]=f|0}return f||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},p.FuncPtrAdapter.warnOnUse=!1,p.FuncPtrAdapter.debugFuncInstall=!1,p.FuncPtrAdapter.debugOut=console.debug.bind(console),p.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const S=c=>p.get(c)||i("Argument adapter not found:",c),D=c=>m.get(c)||i("Result adapter not found:",c);o.xWrap.convertArg=(c,...f)=>S(c)(...f),o.xWrap.convertArgNoCheck=(c,...f)=>p.get(c)(...f),o.xWrap.convertResult=(c,f)=>c===null?f:c?D(c)(f):void 0,o.xWrap.convertResultNoCheck=(c,f)=>c===null?f:c?m.get(c)(f):void 0,t.xWrap=function(c,f,...b){arguments.length===3&&Array.isArray(arguments[2])&&(b=arguments[2]),t.isPtr(c)&&(c=t.functionEntry(c)||i("Function pointer not found in WASM function table."));const j=c instanceof Function,P=j?c:t.xGet(c);if(j&&(c=P.name||"unnamed function"),b.length!==P.length&&M(c,P.length),f===null&&P.length===0)return P;f!=null&&D(f);for(const s of b)s instanceof F?p.set(s,(...a)=>s.convertArg(...a)):S(s);const B=o.xWrap;return P.length===0?(...s)=>s.length?M(c,P.length):B.convertResult(f,P.call(null)):function(...s){s.length!==P.length&&M(c,P.length);const a=t.scopedAllocPush();try{let _=0;for(;_<s.length;++_)s[_]=B.convertArgNoCheck(b[_],s[_],s,_);return B.convertResultNoCheck(f,P.apply(null,s))}finally{t.scopedAllocPop(a)}}};const $=function(c,f,b,j,P,B){if(typeof b=="string"){if(f===1)return B.get(b);if(f===2){if(j)j instanceof Function||i(P,"requires a function argument.");else return B.delete(b),c;return B.set(b,j),c}}i("Invalid arguments to",P)};return t.xWrap.resultAdapter=function c(f,b){return $(c,arguments.length,f,b,"resultAdapter()",m)},t.xWrap.argAdapter=function c(f,b){return $(c,arguments.length,f,b,"argAdapter()",p)},t.xWrap.FuncPtrAdapter=p.FuncPtrAdapter,t.xCallWrapped=function(c,f,b,...j){return Array.isArray(arguments[3])&&(j=arguments[3]),t.xWrap(c,f,b||[]).apply(null,j||[])},t.xWrap.testConvertArg=o.xWrap.convertArg,t.xWrap.testConvertResult=o.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const i=()=>fetch(t.uri,{credentials:"same-origin"}),n=this,r=function(h){if(t.wasmUtilTarget){const g=(...C)=>{throw new Error(C.join(" "))},L=t.wasmUtilTarget;if(L.module=h.module,L.instance=h.instance,L.instance.exports.memory||(L.memory=t.imports&&t.imports.env&&t.imports.env.memory||g("Missing 'memory' object!")),!L.alloc&&h.instance.exports.malloc){const C=h.instance.exports;L.alloc=function(z){return C.malloc(z)||g("Allocation of",z,"bytes failed.")},L.dealloc=function(z){C.free(z)}}n(L)}return t.onload&&t.onload(h,t),h};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(i(),t.imports||{}).then(r)}:function(){return i().then(g=>g.arrayBuffer()).then(g=>WebAssembly.instantiate(g,t.imports||{})).then(r)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(i){const n=(...k)=>{throw new Error(k.join(" "))};!(i.heap instanceof WebAssembly.Memory)&&!(i.heap instanceof Function)&&n("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(k){i[k]instanceof Function||n("Config option '"+k+"' must be a function.")});const r=t,o=i.heap instanceof Function?i.heap:()=>new Uint8Array(i.heap.buffer),h=i.alloc,g=i.dealloc,L=i.log||console.log.bind(console),C=i.memberPrefix||"",z=i.memberSuffix||"",W=i.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!i.bigIntEnabled,x=globalThis.BigInt,E=globalThis.BigInt64Array,M=i.ptrSizeof||4,p=i.ptrIR||"i32";r.debugFlags||(r.__makeDebugFlags=function(k=null){k&&k.__flags&&(k=k.__flags);const H=function K(X){return arguments.length===0?K.__flags:(X<0?(delete K.__flags.getter,delete K.__flags.setter,delete K.__flags.alloc,delete K.__flags.dealloc):(K.__flags.getter=(1&X)!==0,K.__flags.setter=(2&X)!==0,K.__flags.alloc=(4&X)!==0,K.__flags.dealloc=(8&X)!==0),K._flags)};return Object.defineProperty(H,"__flags",{iterable:!1,writable:!1,value:Object.create(k)}),k||H(0),H},r.debugFlags=r.__makeDebugFlags());const m=(function(){const k=new ArrayBuffer(2);return new DataView(k).setInt16(0,256,!0),new Int16Array(k)[0]===256})(),w=k=>k[1]==="(",T=k=>k==="P",F=k=>w(k)?"p":k[0],S=function(k){switch(F(k)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return p;case"j":return"i64";case"f":return"float";case"d":return"double"}n("Unhandled signature IR:",k)},D=E?()=>!0:()=>n("BigInt64Array is not available."),$=function(k){switch(F(k)){case"p":case"P":case"s":{switch(M){case 4:return"getInt32";case 8:return D()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return D()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}n("Unhandled DataView getter for signature:",k)},c=function(k){switch(F(k)){case"p":case"P":case"s":{switch(M){case 4:return"setInt32";case 8:return D()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return D()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}n("Unhandled DataView setter for signature:",k)},f=function(k){switch(F(k)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return D()&&x;case"p":case"P":case"s":switch(M){case 4:return Number;case 8:return D()&&x}break}n("Unhandled DataView set wrapper for signature:",k)},b=(k,H)=>k+"::"+H,j=function(k,H){return()=>n(b(k,H),"is read-only.")},P=new WeakMap,B="(pointer-is-external)",s=function(k,H,K){if(K||(K=P.get(H)),K){if(P.delete(H),Array.isArray(H.ondispose)){let X;for(;X=H.ondispose.shift();)try{X instanceof Function?X.call(H):X instanceof te?X.dispose():typeof X=="number"&&g(X)}catch(ae){console.warn("ondispose() for",k.structName,"@",K,"threw. NOT propagating it.",ae)}}else if(H.ondispose instanceof Function)try{H.ondispose()}catch(X){console.warn("ondispose() for",k.structName,"@",K,"threw. NOT propagating it.",X)}delete H.ondispose,k.debugFlags.__flags.dealloc&&L("debug.dealloc:",H[B]?"EXTERNAL":"",k.structName,"instance:",k.structInfo.sizeof,"bytes @"+K),H[B]||g(K)}},a=k=>({configurable:!1,writable:!1,iterable:!1,value:k}),_=function(k,H,K){let X=!K;K?Object.defineProperty(H,B,a(K)):(K=h(k.structInfo.sizeof),K||n("Allocation of",k.structName,"structure failed."));try{k.debugFlags.__flags.alloc&&L("debug.alloc:",X?"":"EXTERNAL",k.structName,"instance:",k.structInfo.sizeof,"bytes @"+K),X&&o().fill(0,K,K+k.structInfo.sizeof),P.set(H,K)}catch(ae){throw s(k,H,K),ae}},d=function(){const k=this.pointer;return k?new Uint8Array(o().slice(k,k+this.structInfo.sizeof)):null},V=a(k=>C+k+z),Z=function(k,H,K=!0){let X=k.members[H];if(!X&&(C||z)){for(const ae of Object.values(k.members))if(ae.key===H){X=ae;break}!X&&K&&n(b(k.name,H),"is not a mapped struct member.")}return X},re=function k(H,K,X=!1){k._||(k._=fe=>fe.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const ae=Z(H.structInfo,K,!0);return X?k._(ae.signature):ae.signature},ne={configurable:!1,enumerable:!1,get:function(){return P.get(this)},set:()=>n("Cannot assign the 'pointer' property of a struct.")},U=a(function(){const k=[];for(const H of Object.keys(this.structInfo.members))k.push(this.memberKey(H));return k}),y=new TextDecoder("utf-8"),I=new TextEncoder,R=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Q=function(k,H,K){return y.decode(k.buffer instanceof R?k.slice(H,K):k.subarray(H,K))},ee=function(k,H,K=!1){const X=Z(k.structInfo,H,K);return X&&X.signature.length===1&&X.signature[0]==="s"?X:!1},q=function(k){k.signature!=="s"&&n("Invalid member type signature for C-string value:",JSON.stringify(k))},O=function(H,K){const X=Z(H.structInfo,K,!0);q(X);const ae=H[X.key];if(!ae)return null;let fe=ae;const _e=o();for(;_e[fe]!==0;++fe);return ae===fe?"":Q(_e,ae,fe)},N=function(k,...H){k.ondispose?Array.isArray(k.ondispose)||(k.ondispose=[k.ondispose]):k.ondispose=[],k.ondispose.push(...H)},J=function(k){const H=I.encode(k),K=h(H.length+1);K||n("Allocation error while duplicating string:",k);const X=o();return X.set(H,K),X[K+H.length]=0,K},G=function(k,H,K){const X=Z(k.structInfo,H,!0);q(X);const ae=J(K);return k[X.key]=ae,N(k,ae),k},te=function(H,K){arguments[2]!==a&&n("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:a(H),structInfo:a(K)})};te.prototype=Object.create(null,{dispose:a(function(){s(this.constructor,this)}),lookupMember:a(function(k,H=!0){return Z(this.structInfo,k,H)}),memberToJsString:a(function(k){return O(this,k)}),memberIsString:a(function(k,H=!0){return ee(this,k,H)}),memberKey:V,memberKeys:U,memberSignature:a(function(k,H=!1){return re(this,k,H)}),memoryDump:a(d),pointer:ne,setMemberCString:a(function(k,H){return G(this,k,H)})}),Object.assign(te.prototype,{addOnDispose:function(...k){return N(this,...k),this}}),Object.defineProperties(te,{allocCString:a(J),isA:a(k=>k instanceof te),hasExternalPointer:a(k=>k instanceof te&&!!k[B]),memberKey:V});const oe=k=>Number.isFinite(k)||k instanceof(x||Number),Y=function k(H,K,X){if(!k._){k._={getters:{},setters:{},sw:{}};const ge=["i","c","C","p","P","s","f","d","v()"];W&&ge.push("j"),ge.forEach(function(qe){k._.getters[qe]=$(qe),k._.setters[qe]=c(qe),k._.sw[qe]=f(qe)});const Zn=/^[ipPsjfdcC]$/,er=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;k.sigCheck=function(qe,tr,It,it){Object.prototype.hasOwnProperty.call(qe,It)&&n(qe.structName,"already has a property named",It+"."),Zn.test(it)||er.test(it)||n("Malformed signature for",b(qe.structName,tr)+":",it)}}const ae=H.memberKey(K);k.sigCheck(H.prototype,K,ae,X.signature),X.key=ae,X.name=K;const fe=F(X.signature),_e=b(H.prototype.structName,ae),ue=H.prototype.debugFlags.__flags,Ce=Object.create(null);Ce.configurable=!1,Ce.enumerable=!1,Ce.get=function(){ue.getter&&L("debug.getter:",k._.getters[fe],"for",S(fe),_e,"@",this.pointer,"+",X.offset,"sz",X.sizeof);let ge=new DataView(o().buffer,this.pointer+X.offset,X.sizeof)[k._.getters[fe]](0,m);return ue.getter&&L("debug.getter:",_e,"result =",ge),ge},X.readOnly?Ce.set=j(H.prototype.structName,ae):Ce.set=function(ge){if(ue.setter&&L("debug.setter:",k._.setters[fe],"for",S(fe),_e,"@",this.pointer,"+",X.offset,"sz",X.sizeof,ge),this.pointer||n("Cannot set struct property on disposed instance."),ge===null)ge=0;else for(;!oe(ge);){if(T(X.signature)&&ge instanceof te){ge=ge.pointer||0,ue.setter&&L("debug.setter:",_e,"resolved to",ge);break}n("Invalid value for pointer-type",_e+".")}new DataView(o().buffer,this.pointer+X.offset,X.sizeof)[k._.setters[fe]](0,k._.sw[fe](ge),m)},Object.defineProperty(H.prototype,ae,Ce)},de=function k(H,K){arguments.length===1?(K=H,H=K.name):K.name||(K.name=H),H||n("Struct name is required.");let X=!1;Object.keys(K.members).forEach(_e=>{const ue=K.members[_e];ue.sizeof?ue.sizeof===1?ue.signature==="c"||ue.signature==="C"||n("Unexpected sizeof==1 member",b(K.name,_e),"with signature",ue.signature):(ue.sizeof%4!==0&&(console.warn("Invalid struct member description =",ue,"from",K),n(H,"member",_e,"sizeof is not aligned. sizeof="+ue.sizeof)),ue.offset%4!==0&&(console.warn("Invalid struct member description =",ue,"from",K),n(H,"member",_e,"offset is not aligned. offset="+ue.offset))):n(H,"member",_e,"is missing sizeof."),(!X||X.offset<ue.offset)&&(X=ue)}),X?K.sizeof<X.offset+X.sizeof&&n("Invalid struct config:",H,"max member offset ("+X.offset+") ","extends past end of struct (sizeof="+K.sizeof+")."):n("No member property descriptions found.");const ae=a(r.__makeDebugFlags(k.debugFlags)),fe=function _e(ue){this instanceof _e?arguments.length?((ue!==(ue|0)||ue<=0)&&n("Invalid pointer value for",H,"constructor."),_(_e,this,ue)):_(_e,this):n("The",H,"constructor may only be called via 'new'.")};return Object.defineProperties(fe,{debugFlags:ae,isA:a(_e=>_e instanceof fe),memberKey:V,memberKeys:U,methodInfoForKey:a(function(_e){}),structInfo:a(K),structName:a(H)}),fe.prototype=new te(H,K,a),Object.defineProperties(fe.prototype,{debugFlags:ae,constructor:a(fe)}),Object.keys(K.members).forEach(_e=>Y(fe,_e,K.members[_e])),fe};return de.StructType=te,de.config=i,de.allocCString=J,de.debugFlags||(de.debugFlags=r.__makeDebugFlags(r.debugFlags)),de},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=(...p)=>{throw new Error(p.join(" "))};t.SQLite3Error.toss;const n=t.capi,r=t.wasm,o=t.util;if(globalThis.WhWasmUtilInstaller(r),delete globalThis.WhWasmUtilInstaller,r.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(p,m)=>p[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:p=>p[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new r.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:p=>{let m;return(w,T,F,S)=>{try{const D=r.cArgvToJs(T,F);return m||(m=r.cArgvToJs(T,S)),p(D,m)|0}catch(D){return D.resultCode||n.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:p=>p[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(p,m)=>p[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],r.exports.sqlite3_progress_handler&&r.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(p,m)=>p[0]}),"*"]]),r.exports.sqlite3_stmt_explain&&r.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),r.exports.sqlite3_set_authorizer&&r.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(p,m)=>p[0],callProxy:p=>(m,w,T,F,S,D)=>{try{return T=T&&r.cstrToJs(T),F=F&&r.cstrToJs(F),S=S&&r.cstrToJs(S),D=D&&r.cstrToJs(D),p(m,w,T,F,S,D)||0}catch($){return $.resultCode||n.SQLITE_ERROR}}}),"*"]]),r.exports.sqlite3_key_v2 instanceof Function&&r.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"],["sqlite3mc_cipher_count","int"],["sqlite3mc_cipher_index","int","string"],["sqlite3mc_cipher_name","string","int"],["sqlite3mc_config","int","sqlite3*","string","int"],["sqlite3mc_config_cipher","int","sqlite3*","string","string","int"],["sqlite3mc_codec_data","string","sqlite3*","string","string"],["sqlite3mc_version","string"],["sqlite3mc_vfs_create","int","string","int"],["sqlite3mc_vfs_destroy",void 0,"string"],["sqlite3mc_vfs_shutdown",void 0]),r.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:p=>p[0],callProxy:p=>(m,w,T,F,S)=>{p(m,w,r.cstrToJs(T),r.cstrToJs(F),S)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],r.bigIntEnabled&&r.exports.sqlite3_declare_vtab&&r.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),r.bigIntEnabled&&r.exports.sqlite3_preupdate_hook&&r.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:p=>p[0],callProxy:p=>(m,w,T,F,S,D,$)=>{p(m,w,T,r.cstrToJs(F),r.cstrToJs(S),D,$)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),r.bigIntEnabled&&r.exports.sqlite3changegroup_add&&r.exports.sqlite3session_create&&r.exports.sqlite3_preupdate_hook){const p={signature:"i(ps)",callProxy:m=>(w,T)=>{try{return m(w,r.cstrToJs(T))|0}catch(F){return F.resultCode||n.SQLITE_ERROR}}};r.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...p}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...p}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...p}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...p}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xFilter",...p,contextKey:(m,w)=>m[0]}),"*"]])}r.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:r.heap8u,alloc:r.alloc,dealloc:r.dealloc,bigIntEnabled:r.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const p=r.xWrap.argAdapter("string");r.xWrap.argAdapter("string:flexible",S=>p(o.flexibleString(S))),r.xWrap.argAdapter("string:static",(function(S){return r.isPtr(S)?S:(S=""+S,this[S]||(this[S]=r.allocCString(S)))}).bind(Object.create(null)));const m=r.xWrap.argAdapter("*"),w=function(){};r.xWrap.argAdapter("sqlite3_filename",m)("sqlite3_context*",m)("sqlite3_value*",m)("void*",m)("sqlite3_changegroup*",m)("sqlite3_changeset_iter*",m)("sqlite3_session*",m)("sqlite3_stmt*",S=>m(S instanceof(t?.oo1?.Stmt||w)?S.pointer:S))("sqlite3*",S=>m(S instanceof(t?.oo1?.DB||w)?S.pointer:S))("sqlite3_vfs*",S=>typeof S=="string"?n.sqlite3_vfs_find(S)||t.SQLite3Error.toss(n.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",S):m(S instanceof(n.sqlite3_vfs||w)?S.pointer:S)),r.exports.sqlite3_declare_vtab&&r.xWrap.argAdapter("sqlite3_index_info*",S=>m(S instanceof(n.sqlite3_index_info||w)?S.pointer:S))("sqlite3_module*",S=>m(S instanceof(n.sqlite3_module||w)?S.pointer:S));const T=r.xWrap.resultAdapter("*");r.xWrap.resultAdapter("sqlite3*",T)("sqlite3_context*",T)("sqlite3_stmt*",T)("sqlite3_value*",T)("sqlite3_vfs*",T)("void*",T),r.exports.sqlite3_step.length===0&&(r.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const S of r.bindingSignatures)n[S[0]]=r.xWrap.apply(null,S);for(const S of r.bindingSignatures.wasmInternal)o[S[0]]=r.xWrap.apply(null,S);const F=function(S){return()=>i(S+"() is unavailable due to lack","of BigInt support in this build.")};for(const S of r.bindingSignatures.int64)n[S[0]]=r.bigIntEnabled?r.xWrap.apply(null,S):F(S[0]);if(delete r.bindingSignatures,r.exports.sqlite3__wasm_db_error){const S=r.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");o.sqlite3__wasm_db_error=function(D,$,c){return $ instanceof t.WasmAllocError?($=n.SQLITE_NOMEM,c=0):$ instanceof Error&&(c=c||""+$,$=$.resultCode||n.SQLITE_ERROR),D?S(D,$,c):$}}else o.sqlite3__wasm_db_error=function(S,D,$){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),D}}{const p=r.xCall("sqlite3__wasm_enum_json");p||i("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),r.ctype=JSON.parse(r.cstrToJs(p));const m=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];r.bigIntEnabled&&m.push("serialize","session","vtab");for(const F of m)for(const S of Object.entries(r.ctype[F]))n[S[0]]=S[1];r.functionEntry(n.SQLITE_WASM_DEALLOC)||i("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+n.SQLITE_WASM_DEALLOC+").");const w=Object.create(null);for(const F of["resultCodes"])for(const S of Object.entries(r.ctype[F]))w[S[1]]=S[0];n.sqlite3_js_rc_str=F=>w[F];const T=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!o.isUIThread(),sqlite3_index_info:!r.bigIntEnabled,sqlite3_index_constraint:!r.bigIntEnabled,sqlite3_index_orderby:!r.bigIntEnabled,sqlite3_index_constraint_usage:!r.bigIntEnabled});for(const F of r.ctype.structs)T[F.name]||(n[F.name]=t.StructBinder(F));if(n.sqlite3_index_info){for(const F of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])n.sqlite3_index_info[F]=n[F],delete n[F];n.sqlite3_vtab_config=r.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const h=(p,m,w)=>o.sqlite3__wasm_db_error(p,n.SQLITE_MISUSE,m+"() requires "+w+" argument"+(w===1?"":"s")+"."),g=p=>o.sqlite3__wasm_db_error(p,n.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),L=p=>r.xWrap.argAdapter("sqlite3*")(p),C=p=>r.isPtr(p)?r.cstrToJs(p):p,z=(function(p,m){p=L(p);let w=this.dbMap.get(p);if(m)!w&&m>0&&this.dbMap.set(p,w=Object.create(null));else return this.dbMap.delete(p),w;return w}).bind(Object.assign(Object.create(null),{dbMap:new Map}));z.addCollation=function(p,m){const w=z(p,1);w.collation||(w.collation=new Set),w.collation.add(C(m).toLowerCase())},z._addUDF=function(p,m,w,T){m=C(m).toLowerCase();let F=T.get(m);F||T.set(m,F=new Set),F.add(w<0?-1:w)},z.addFunction=function(p,m,w){const T=z(p,1);T.udf||(T.udf=new Map),this._addUDF(p,m,w,T.udf)},r.exports.sqlite3_create_window_function&&(z.addWindowFunc=function(p,m,w){const T=z(p,1);T.wudf||(T.wudf=new Map),this._addUDF(p,m,w,T.wudf)}),z.cleanup=function(p){p=L(p);const m=[p];for(const F of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const S=r.exports[F];if(S){m.length=S.length;try{n[F](...m)}catch(D){t.config.warn("close-time call of",F+"(",m,") threw:",D)}}}const w=z(p,0);if(!w)return;if(w.collation){for(const F of w.collation)try{n.sqlite3_create_collation_v2(p,F,n.SQLITE_UTF8,0,0,0)}catch{}delete w.collation}let T;for(T=0;T<2;++T){const F=T?w.wudf:w.udf;if(!F)continue;const S=T?n.sqlite3_create_window_function:n.sqlite3_create_function_v2;for(const D of F){const $=D[0],c=D[1],f=[p,$,0,n.SQLITE_UTF8,0,0,0,0,0];T&&f.push(0);for(const b of c)try{f[2]=b,S.apply(null,f)}catch{}c.clear()}F.clear()}delete w.udf,delete w.wudf};{const p=r.xWrap("sqlite3_close_v2","int","sqlite3*");n.sqlite3_close_v2=function(m){if(arguments.length!==1)return h(m,"sqlite3_close_v2",1);if(m)try{z.cleanup(m)}catch{}return p(m)}}if(n.sqlite3session_create){const p=r.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);n.sqlite3session_delete=function(m){if(arguments.length!==1)return h(pDb,"sqlite3session_delete",1);m&&n.sqlite3session_table_filter(m,0,0),p(m)}}{const p=(w,T)=>"argv["+T+"]:"+w[0]+":"+r.cstrToJs(w[1]).toLowerCase(),m=r.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new r.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:p}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:p})]);n.sqlite3_create_collation_v2=function(w,T,F,S,D,$){if(arguments.length!==6)return h(w,"sqlite3_create_collation_v2",6);if((F&15)===0)F|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(F&15))return g(w);try{const c=m(w,T,F,S,D,$);return c===0&&D instanceof Function&&z.addCollation(w,T),c}catch(c){return o.sqlite3__wasm_db_error(w,c)}},n.sqlite3_create_collation=(w,T,F,S,D)=>arguments.length===5?n.sqlite3_create_collation_v2(w,T,F,S,D,0):h(w,"sqlite3_create_collation",5)}{const p=function(F,S){return F[0]+":"+(F[2]<0?-1:F[2])+":"+S+":"+r.cstrToJs(F[1]).toLowerCase()},m=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:p,callProxy:F=>(S,D,$)=>{try{F(S,...n.sqlite3_values_to_js(D,$))}catch(c){n.sqlite3_result_error_js(S,c)}}},xFinalAndValue:{signature:"v(p)",contextKey:p,callProxy:F=>S=>{try{n.sqlite3_result_js(S,F(S))}catch(D){n.sqlite3_result_error_js(S,D)}}},xFunc:{signature:"v(pip)",contextKey:p,callProxy:F=>(S,D,$)=>{try{n.sqlite3_result_js(S,F(S,...n.sqlite3_values_to_js(D,$)))}catch(c){n.sqlite3_result_error_js(S,c)}}},xDestroy:{signature:"v(p)",contextKey:p,callProxy:F=>S=>{try{F(S)}catch(D){console.error("UDF xDestroy method threw:",D)}}}}),w=r.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xFunc",...m.xFunc}),new r.xWrap.FuncPtrAdapter({name:"xStep",...m.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...m.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...m.xDestroy})]),T=r.exports.sqlite3_create_window_function?r.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xStep",...m.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...m.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xValue",...m.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xInverse",...m.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...m.xDestroy})]):void 0;n.sqlite3_create_function_v2=function F(S,D,$,c,f,b,j,P,B){if(F.length!==arguments.length)return h(S,"sqlite3_create_function_v2",F.length);if((c&15)===0)c|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(c&15))return g(S);try{const s=w(S,D,$,c,f,b,j,P,B);return s===0&&(b instanceof Function||j instanceof Function||P instanceof Function||B instanceof Function)&&z.addFunction(S,D,$),s}catch(s){return console.error("sqlite3_create_function_v2() setup threw:",s),o.sqlite3__wasm_db_error(S,s,"Creation of UDF threw: "+s)}},n.sqlite3_create_function=function F(S,D,$,c,f,b,j,P){return F.length===arguments.length?n.sqlite3_create_function_v2(S,D,$,c,f,b,j,P,0):h(S,"sqlite3_create_function",F.length)},T?n.sqlite3_create_window_function=function F(S,D,$,c,f,b,j,P,B,s){if(F.length!==arguments.length)return h(S,"sqlite3_create_window_function",F.length);if((c&15)===0)c|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(c&15))return g(S);try{const a=T(S,D,$,c,f,b,j,P,B,s);return a===0&&(b instanceof Function||j instanceof Function||P instanceof Function||B instanceof Function||s instanceof Function)&&z.addWindowFunc(S,D,$),a}catch(a){return console.error("sqlite3_create_window_function() setup threw:",a),o.sqlite3__wasm_db_error(S,a,"Creation of UDF threw: "+a)}}:delete n.sqlite3_create_window_function,n.sqlite3_create_function_v2.udfSetResult=n.sqlite3_create_function.udfSetResult=n.sqlite3_result_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfSetResult=n.sqlite3_result_js),n.sqlite3_create_function_v2.udfConvertArgs=n.sqlite3_create_function.udfConvertArgs=n.sqlite3_values_to_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfConvertArgs=n.sqlite3_values_to_js),n.sqlite3_create_function_v2.udfSetError=n.sqlite3_create_function.udfSetError=n.sqlite3_result_error_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfSetError=n.sqlite3_result_error_js)}{const p=(w,T)=>(typeof w=="string"?T=-1:o.isSQLableTypedArray(w)?(T=w.byteLength,w=o.typedArrayToString(w instanceof ArrayBuffer?new Uint8Array(w):w)):Array.isArray(w)&&(w=w.join(""),T=-1),[w,T]),m={basic:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};n.sqlite3_prepare_v3=function w(T,F,S,D,$,c){if(w.length!==arguments.length)return h(T,"sqlite3_prepare_v3",w.length);const[f,b]=p(F,S);switch(typeof f){case"string":return m.basic(T,f,b,D,$,null);case"number":return m.full(T,f,b,D,$,c);default:return o.sqlite3__wasm_db_error(T,n.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},n.sqlite3_prepare_v2=function w(T,F,S,D,$){return w.length===arguments.length?n.sqlite3_prepare_v3(T,F,S,0,D,$):h(T,"sqlite3_prepare_v2",w.length)}}{const p=r.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),m=r.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);n.sqlite3_bind_text=function w(T,F,S,D,$){if(w.length!==arguments.length)return h(n.sqlite3_db_handle(T),"sqlite3_bind_text",w.length);if(r.isPtr(S)||S===null)return p(T,F,S,D,$);S instanceof ArrayBuffer?S=new Uint8Array(S):Array.isArray(pMem)&&(S=pMem.join(""));let c,f;try{if(o.isSQLableTypedArray(S))c=r.allocFromTypedArray(S),f=S.byteLength;else if(typeof S=="string")[c,f]=r.allocCString(S);else return o.sqlite3__wasm_db_error(n.sqlite3_db_handle(T),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return p(T,F,c,f,n.SQLITE_WASM_DEALLOC)}catch(b){return r.dealloc(c),o.sqlite3__wasm_db_error(n.sqlite3_db_handle(T),b)}},n.sqlite3_bind_blob=function w(T,F,S,D,$){if(w.length!==arguments.length)return h(n.sqlite3_db_handle(T),"sqlite3_bind_blob",w.length);if(r.isPtr(S)||S===null)return m(T,F,S,D,$);S instanceof ArrayBuffer?S=new Uint8Array(S):Array.isArray(S)&&(S=S.join(""));let c,f;try{if(o.isBindableTypedArray(S))c=r.allocFromTypedArray(S),f=D>=0?D:S.byteLength;else if(typeof S=="string")[c,f]=r.allocCString(S);else return o.sqlite3__wasm_db_error(n.sqlite3_db_handle(T),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return m(T,F,c,f,n.SQLITE_WASM_DEALLOC)}catch(b){return r.dealloc(c),o.sqlite3__wasm_db_error(n.sqlite3_db_handle(T),b)}}}n.sqlite3_config=function(p,...m){if(arguments.length<2)return n.SQLITE_MISUSE;switch(p){case n.SQLITE_CONFIG_COVERING_INDEX_SCAN:case n.SQLITE_CONFIG_MEMSTATUS:case n.SQLITE_CONFIG_SMALL_MALLOC:case n.SQLITE_CONFIG_SORTERREF_SIZE:case n.SQLITE_CONFIG_STMTJRNL_SPILL:case n.SQLITE_CONFIG_URI:return r.exports.sqlite3__wasm_config_i(p,m[0]);case n.SQLITE_CONFIG_LOOKASIDE:return r.exports.sqlite3__wasm_config_ii(p,m[0],m[1]);case n.SQLITE_CONFIG_MEMDB_MAXSIZE:return r.exports.sqlite3__wasm_config_j(p,m[0]);case n.SQLITE_CONFIG_GETMALLOC:case n.SQLITE_CONFIG_GETMUTEX:case n.SQLITE_CONFIG_GETPCACHE2:case n.SQLITE_CONFIG_GETPCACHE:case n.SQLITE_CONFIG_HEAP:case n.SQLITE_CONFIG_LOG:case n.SQLITE_CONFIG_MALLOC:case n.SQLITE_CONFIG_MMAP_SIZE:case n.SQLITE_CONFIG_MULTITHREAD:case n.SQLITE_CONFIG_MUTEX:case n.SQLITE_CONFIG_PAGECACHE:case n.SQLITE_CONFIG_PCACHE2:case n.SQLITE_CONFIG_PCACHE:case n.SQLITE_CONFIG_PCACHE_HDRSZ:case n.SQLITE_CONFIG_PMASZ:case n.SQLITE_CONFIG_SERIALIZED:case n.SQLITE_CONFIG_SINGLETHREAD:case n.SQLITE_CONFIG_SQLLOG:case n.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return n.SQLITE_NOTFOUND}};{const p=new Set;n.sqlite3_auto_extension=function(m){if(m instanceof Function)m=r.installFunction("i(ppp)",m);else if(arguments.length!==1||!r.isPtr(m))return n.SQLITE_MISUSE;const w=r.exports.sqlite3_auto_extension(m);return m!==arguments[0]&&(w===0?p.add(m):r.uninstallFunction(m)),w},n.sqlite3_cancel_auto_extension=function(m){return!m||arguments.length!==1||!r.isPtr(m)?0:r.exports.sqlite3_cancel_auto_extension(m)},n.sqlite3_reset_auto_extension=function(){r.exports.sqlite3_reset_auto_extension();for(const m of p)r.uninstallFunction(m);p.clear()}}const W=n.sqlite3_vfs_find("kvvfs");if(W)if(o.isUIThread()){const p=new n.sqlite3_kvvfs_methods(r.exports.sqlite3__wasm_kvvfs_methods());delete n.sqlite3_kvvfs_methods;const m=r.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,w=r.pstack,T=S=>r.peek(S)===115?sessionStorage:localStorage,F={xRead:(S,D,$,c)=>{const f=w.pointer,b=r.scopedAllocPush();try{const j=m(S,D);if(!j)return-3;const P=r.cstrToJs(j),B=T(S).getItem(P);if(!B)return-1;const s=B.length;if(c<=0)return s;if(c===1)return r.poke($,0),s;const a=r.scopedAllocCString(B);return c>s+1&&(c=s+1),r.heap8u().copyWithin($,a,a+c-1),r.poke($+c-1,0),c-1}catch(j){return console.error("kvstorageRead()",j),-2}finally{w.restore(f),r.scopedAllocPop(b)}},xWrite:(S,D,$)=>{const c=w.pointer;try{const f=m(S,D);if(!f)return 1;const b=r.cstrToJs(f);return T(S).setItem(b,r.cstrToJs($)),0}catch(f){return console.error("kvstorageWrite()",f),n.SQLITE_IOERR}finally{w.restore(c)}},xDelete:(S,D)=>{const $=w.pointer;try{const c=m(S,D);return c?(T(S).removeItem(r.cstrToJs(c)),0):1}catch(c){return console.error("kvstorageDelete()",c),n.SQLITE_IOERR}finally{w.restore($)}}};for(const S of Object.keys(F))p[p.memberKey(S)]=r.installFunction(p.memberSignature(S),F[S])}else n.sqlite3_vfs_unregister(W);r.xWrap.FuncPtrAdapter.warnOnUse=!0;const x=t.StructBinder,E=function p(m,w,T,F=p.installMethodArgcCheck){if(m instanceof x.StructType?!(T instanceof Function)&&!r.isPtr(T)&&i("Usage error: expecting a Function or WASM pointer to one."):i("Usage error: target object is-not-a StructType."),arguments.length===1)return(c,f)=>p(m,c,f,F);p.argcProxy||(p.argcProxy=function(c,f,b,j){return function(...P){return b.length!==arguments.length&&i("Argument mismatch for",c.structInfo.name+"::"+f+": Native signature is:",j),b.apply(this,P)}},p.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((c,f)=>{if(typeof c=="number")try{r.uninstallFunction(c)}catch{}}),delete this.ondispose.__removeFuncList)});const S=m.memberSignature(w);S.length<2&&i("Member",w,"does not have a function pointer signature:",S);const D=m.memberKey(w),$=F&&!r.isPtr(T)?p.argcProxy(m,D,T,S):T;if(r.isPtr($))$&&!r.functionEntry($)&&i("Pointer",$,"is not a WASM function table entry."),m[D]=$;else{const c=r.installFunction($,m.memberSignature(w,!0));m[D]=c,(!m.ondispose||!m.ondispose.__removeFuncList)&&(m.addOnDispose("ondispose.__removeFuncList handler",p.removeFuncList),m.ondispose.__removeFuncList=[]),m.ondispose.__removeFuncList.push(D,c)}return(c,f)=>p(m,c,f,F)};E.installMethodArgcCheck=!1;const M=function(p,m,w=E.installMethodArgcCheck){const T=new Map;for(const F of Object.keys(m)){const S=m[F],D=T.get(S);if(D){const $=p.memberKey(F);p[$]=p[p.memberKey(D)]}else E(p,F,S,w),T.set(S,F)}return p};x.StructType.prototype.installMethod=function(m,w,T=E.installMethodArgcCheck){return arguments.length<3&&m&&typeof m=="object"?M(this,...arguments):E(this,...arguments)},x.StructType.prototype.installMethods=function(p,m=E.installMethodArgcCheck){return M(this,p,m)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.50.4",libVersionNumber:3050004,sourceId:"2025-07-30 19:33:53 4d8adfb30e03f9cf27f800a2c1ba3c48fb4ca1b08b0f5ed59a4d5ecbf45e20a3",downloadVersion:3500400}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=(...s)=>{throw new t.SQLite3Error(...s)},n=t.capi,r=t.wasm,o=t.util,h=new WeakMap,g=new WeakMap,L=(s,a,_)=>{const d=Object.getOwnPropertyDescriptor(s,a);return d?d.value:_},C=function(s,a){return a&&(s instanceof p&&(s=s.pointer),i(a,"sqlite3 result code",a+":",s?n.sqlite3_errmsg(s):n.sqlite3_errstr(a))),arguments[0]},z=r.installFunction("i(ippp)",(function(s,a,_,d){n.SQLITE_TRACE_STMT===s&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+a+":",r.cstrToJs(d))}).bind({counter:0})),W=Object.create(null),x=function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));const a=[],_="0123456789abcdef";for(const d of s)a.push(_[(d&240)>>4],_[d&15]);return a.join("")},E=function(s,a){if(!n.sqlite3_key_v2)return;let _,d;const A=(a.key?1:0)+(a.hexkey?1:0)+(a.textkey?1:0);if(A)A>1&&i(n.SQLITE_MISUSE,"Only ONE of (key, hexkey, textkey) may be provided.");else return;if(a.key)if(_="key",d=a.key,typeof d=="string"&&(d=new TextEncoder("utf-8").encode(d)),d instanceof ArrayBuffer||d instanceof Uint8Array)d=x(d),_="hexkey";else{i(n.SQLITE_MISUSE,"Invalid value for the 'key' option. Expecting a string,","ArrayBuffer, or Uint8Array.");return}else if(a.textkey)_="textkey",d=a.textkey,d instanceof ArrayBuffer&&(d=new Uint8Array(d)),d instanceof Uint8Array?d=new TextDecoder("utf-8").decode(d):typeof d!="string"&&i(n.SQLITE_MISUSE,"Invalid value for the 'textkey' option. Expecting a string,","ArrayBuffer, or Uint8Array.");else if(a.hexkey)_="hexkey",d=a.hexkey,d instanceof ArrayBuffer||d instanceof Uint8Array?d=x(d):typeof d!="string"&&i(n.SQLITE_MISUSE,"Invalid value for the 'hexkey' option. Expecting a string,","ArrayBuffer, or Uint8Array.");else return;let V;try{return V=s.prepare("PRAGMA "+_+"="+o.sqlite3__wasm_qfmt_token(d,1)),V.step(),!0}finally{V&&V.finalize()}},M=function s(...a){if(!s._name2vfs){s._name2vfs=Object.create(null);const I=typeof importScripts=="function"?R=>i("The VFS for",R,"is only available in the main window thread."):!1;s._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:I||(()=>"local")},s._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:I||(()=>"session")}}const _=s.normalizeArgs(...a);let d=_.filename,A=_.vfs,V=_.flags;(typeof d!="string"&&typeof d!="number"||typeof V!="string"||A&&typeof A!="string"&&typeof A!="number")&&(t.config.error("Invalid DB ctor args",_,arguments),i("Invalid arguments for DB constructor."));let Z=typeof d=="number"?r.cstrToJs(d):d;const re=s._name2vfs[Z];re&&(A=re.vfs,d=Z=re.filename(Z));let ne,U=0;V.indexOf("c")>=0&&(U|=n.SQLITE_OPEN_CREATE|n.SQLITE_OPEN_READWRITE),V.indexOf("w")>=0&&(U|=n.SQLITE_OPEN_READWRITE),U===0&&(U|=n.SQLITE_OPEN_READONLY),U|=n.SQLITE_OPEN_EXRESCODE;const y=r.pstack.pointer;try{const I=r.pstack.allocPtr();let R=n.sqlite3_open_v2(d,I,U,A||0);ne=r.peekPtr(I),C(ne,R),n.sqlite3_extended_result_codes(ne,1),V.indexOf("t")>=0&&n.sqlite3_trace_v2(ne,n.SQLITE_TRACE_STMT,z,ne)}catch(I){throw ne&&n.sqlite3_close_v2(ne),I}finally{r.pstack.restore(y)}this.filename=Z,h.set(this,ne),g.set(this,Object.create(null));try{E(this,_);const I=n.sqlite3_js_db_vfs(ne)||i("Internal error: cannot get VFS for new db handle."),R=W[I];R&&(R instanceof Function?R(this,t):C(ne,n.sqlite3_exec(ne,R,0,0,0)))}catch(I){throw this.close(),I}};M.setVfsPostOpenCallback=function(s,a){a instanceof Function||i("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),W[s]=a},M.normalizeArgs=function(s=":memory:",a="c",_=null){const d={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(d,arguments[0]),d.flags===void 0&&(d.flags="c"),d.vfs===void 0&&(d.vfs=null),d.filename===void 0&&(d.filename=":memory:")):(d.filename=s,d.flags=a,d.vfs=_),d};const p=function(...s){M.apply(this,s)};p.dbCtorHelper=M;const m={null:1,number:2,string:3,boolean:4,blob:5};m.undefined==m.null,r.bigIntEnabled&&(m.bigint=m.number);const w=function(){m!==arguments[2]&&i(n.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],h.set(this,arguments[1]),this.parameterCount=n.sqlite3_bind_parameter_count(this.pointer)},T=function(s){return s.pointer||i("DB has been closed."),s},F=function(s,a){return(a!==(a|0)||a<0||a>=s.columnCount)&&i("Column index",a,"is out of range."),s},S=function(s,a){const _=Object.create(null);switch(_.opt=Object.create(null),a.length){case 1:typeof a[0]=="string"||o.isSQLableTypedArray(a[0])||Array.isArray(a[0])?_.sql=a[0]:a[0]&&typeof a[0]=="object"&&(_.opt=a[0],_.sql=_.opt.sql);break;case 2:_.sql=a[0],_.opt=a[1];break;default:i("Invalid argument count for exec().")}_.sql=o.flexibleString(_.sql),typeof _.sql!="string"&&i("Missing SQL argument or unsupported SQL value type.");const d=_.opt;switch(d.returnValue){case"resultRows":d.resultRows||(d.resultRows=[]),_.returnVal=()=>d.resultRows;break;case"saveSql":d.saveSql||(d.saveSql=[]),_.returnVal=()=>d.saveSql;break;case void 0:case"this":_.returnVal=()=>s;break;default:i("Invalid returnValue value:",d.returnValue)}if(!d.callback&&!d.returnValue&&d.rowMode!==void 0&&(d.resultRows||(d.resultRows=[]),_.returnVal=()=>d.resultRows),d.callback||d.resultRows)switch(d.rowMode===void 0?"array":d.rowMode){case"object":_.cbArg=(A,V)=>{V.columnNames||(V.columnNames=A.getColumnNames([]));const Z=A.get([]),re=Object.create(null);for(const ne in V.columnNames)re[V.columnNames[ne]]=Z[ne];return re};break;case"array":_.cbArg=A=>A.get([]);break;case"stmt":Array.isArray(d.resultRows)&&i("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),_.cbArg=A=>A;break;default:if(o.isInt32(d.rowMode)){_.cbArg=A=>A.get(d.rowMode);break}else if(typeof d.rowMode=="string"&&d.rowMode.length>1&&d.rowMode[0]==="$"){const A=d.rowMode.substr(1);_.cbArg=V=>{const Z=V.get(Object.create(null))[A];return Z===void 0?i(n.SQLITE_NOTFOUND,"exec(): unknown result column:",A):Z};break}i("Invalid rowMode:",d.rowMode)}return _},D=(s,a,_,...d)=>{const A=s.prepare(a);try{const V=A.bind(_).step()?A.get(...d):void 0;return A.reset(),V}finally{A.finalize()}},$=(s,a,_,d)=>s.exec({sql:a,bind:_,rowMode:d,returnValue:"resultRows"});p.checkRc=(s,a)=>C(s,a),p.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return T(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const s=this.pointer;if(Object.keys(g.get(this)).forEach((a,_)=>{if(_&&_.pointer)try{_.finalize()}catch{}}),h.delete(this),g.delete(this),n.sqlite3_close_v2(s),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(s=!1,a=!1){const _=T(this).pointer;return s?a?n.sqlite3_total_changes64(_):n.sqlite3_total_changes(_):a?n.sqlite3_changes64(_):n.sqlite3_changes(_)},dbFilename:function(s="main"){return n.sqlite3_db_filename(T(this).pointer,s)},dbName:function(s=0){return n.sqlite3_db_name(T(this).pointer,s)},dbVfsName:function(s=0){let a;const _=n.sqlite3_js_db_vfs(T(this).pointer,s);if(_){const d=new n.sqlite3_vfs(_);try{a=r.cstrToJs(d.$zName)}finally{d.dispose()}}return a},prepare:function(s){T(this);const a=r.pstack.pointer;let _,d;try{_=r.pstack.alloc(8),p.checkRc(this,n.sqlite3_prepare_v2(this.pointer,s,-1,_,null)),d=r.peekPtr(_)}finally{r.pstack.restore(a)}d||i("Cannot prepare empty SQL.");const A=new w(this,d,m);return g.get(this)[d]=A,A},exec:function(){T(this);const s=S(this,arguments);if(!s.sql)return i("exec() requires an SQL string.");const a=s.opt,_=a.callback,d=Array.isArray(a.resultRows)?a.resultRows:void 0;let A,V=a.bind,Z=!!(s.cbArg||a.columnNames||d);const re=r.scopedAllocPush(),ne=Array.isArray(a.saveSql)?a.saveSql:void 0;try{const U=o.isSQLableTypedArray(s.sql);let y=U?s.sql.byteLength:r.jstrlen(s.sql);const I=r.scopedAlloc(2*r.ptrSizeof+(y+1)),R=I+r.ptrSizeof;let Q=R+r.ptrSizeof;const ee=Q+y;for(U?r.heap8().set(s.sql,Q):r.jstrcpy(s.sql,r.heap8(),Q,y,!1),r.poke(Q+y,0);Q&&r.peek(Q,"i8");){r.pokePtr([I,R],0),p.checkRc(this,n.sqlite3_prepare_v3(this.pointer,Q,y,0,I,R));const q=r.peekPtr(I);if(Q=r.peekPtr(R),y=ee-Q,!!q){if(ne&&ne.push(n.sqlite3_sql(q).trim()),A=new w(this,q,m),V&&A.parameterCount&&(A.bind(V),V=null),Z&&A.columnCount){let O=Array.isArray(a.columnNames)?0:1;if(Z=!1,s.cbArg||d){const N=Object.create(null);for(;A.step();A._lockedByExec=!1){O++===0&&A.getColumnNames(N.columnNames=a.columnNames||[]),A._lockedByExec=!0;const J=s.cbArg(A,N);if(d&&d.push(J),_&&_.call(a,J,A)===!1)break}A._lockedByExec=!1}O===0&&A.getColumnNames(a.columnNames)}else A.step();A.reset().finalize(),A=null}}}finally{r.scopedAllocPop(re),A&&(delete A._lockedByExec,A.finalize())}return s.returnVal()},createFunction:function(a,_,d){const A=N=>N instanceof Function;switch(arguments.length){case 1:d=a,a=d.name,_=d.xFunc||0;break;case 2:A(_)||(d=_,_=d.xFunc||0);break}d||(d={}),typeof a!="string"&&i("Invalid arguments: missing function name.");let V=d.xStep||0,Z=d.xFinal||0;const re=d.xValue||0,ne=d.xInverse||0;let U;A(_)?(U=!1,(A(V)||A(Z))&&i("Ambiguous arguments: scalar or aggregate?"),V=Z=null):A(V)?(A(Z)||i("Missing xFinal() callback for aggregate or window UDF."),_=null):A(Z)?i("Missing xStep() callback for aggregate or window UDF."):i("Missing function-type properties."),U===!1?(A(re)||A(ne))&&i("xValue and xInverse are not permitted for non-window UDFs."):A(re)?(A(ne)||i("xInverse must be provided if xValue is."),U=!0):A(ne)&&i("xValue must be provided if xInverse is.");const y=d.pApp;y!=null&&(typeof y!="number"||!o.isInt32(y))&&i("Invalid value for pApp property. Must be a legal WASM pointer value.");const I=d.xDestroy||0;I&&!A(I)&&i("xDestroy property must be a function.");let R=0;L(d,"deterministic")&&(R|=n.SQLITE_DETERMINISTIC),L(d,"directOnly")&&(R|=n.SQLITE_DIRECTONLY),L(d,"innocuous")&&(R|=n.SQLITE_INNOCUOUS),a=a.toLowerCase();const Q=_||V,ee=L(d,"arity"),q=typeof ee=="number"?ee:Q.length?Q.length-1:0;let O;return U?O=n.sqlite3_create_window_function(this.pointer,a,q,n.SQLITE_UTF8|R,y||0,V,Z,re,ne,I):O=n.sqlite3_create_function_v2(this.pointer,a,q,n.SQLITE_UTF8|R,y||0,_,V,Z,I),p.checkRc(this,O),this},selectValue:function(s,a,_){return D(this,s,a,0,_)},selectValues:function(s,a,_){const d=this.prepare(s),A=[];try{for(d.bind(a);d.step();)A.push(d.get(0,_));d.reset()}finally{d.finalize()}return A},selectArray:function(s,a){return D(this,s,a,[])},selectObject:function(s,a){return D(this,s,a,{})},selectArrays:function(s,a){return $(this,s,a,"array")},selectObjects:function(s,a){return $(this,s,a,"object")},openStatementCount:function(){return this.pointer?Object.keys(g.get(this)).length:0},transaction:function(s){let a="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&i(n.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),a+=" "+arguments[0],s=arguments[1]),T(this).exec(a);try{const _=s(this);return this.exec("COMMIT"),_}catch(_){throw this.exec("ROLLBACK"),_}},savepoint:function(s){T(this).exec("SAVEPOINT oo1");try{const a=s(this);return this.exec("RELEASE oo1"),a}catch(a){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),a}},checkRc:function(s){return C(this,s)}};const c=function(s){return s.pointer||i("Stmt has been closed."),s},f=function(s){let a=m[s==null?"null":typeof s];switch(a){case m.boolean:case m.null:case m.number:case m.string:return a;case m.bigint:if(r.bigIntEnabled)return a;default:return o.isBindableTypedArray(s)?m.blob:void 0}},b=function(s){return f(s)||i("Unsupported bind() argument type:",typeof s)},j=function(s,a){const _=typeof a=="number"?a:n.sqlite3_bind_parameter_index(s.pointer,a);return _===0||!o.isInt32(_)?i("Invalid bind() parameter name: "+a):(_<1||_>s.parameterCount)&&i("Bind index",a,"is out of range."),_},P=function(s,a){return s._lockedByExec&&i("Operation is illegal when statement is locked:",a),s},B=function s(a,_,d,A){P(c(a),"bind()"),s._||(s._tooBigInt=Z=>i("BigInt value is too big to store without precision loss:",Z),s._={string:function(Z,re,ne,U){const[y,I]=r.allocCString(ne,!0);return(U?n.sqlite3_bind_blob:n.sqlite3_bind_text)(Z.pointer,re,y,I,n.SQLITE_WASM_DEALLOC)}}),b(A),_=j(a,_);let V=0;switch(A==null?m.null:d){case m.null:V=n.sqlite3_bind_null(a.pointer,_);break;case m.string:V=s._.string(a,_,A,!1);break;case m.number:{let Z;o.isInt32(A)?Z=n.sqlite3_bind_int:typeof A=="bigint"?o.bigIntFits64(A)?r.bigIntEnabled?Z=n.sqlite3_bind_int64:o.bigIntFitsDouble(A)?(A=Number(A),Z=n.sqlite3_bind_double):s._tooBigInt(A):s._tooBigInt(A):(A=Number(A),r.bigIntEnabled&&Number.isInteger(A)?Z=n.sqlite3_bind_int64:Z=n.sqlite3_bind_double),V=Z(a.pointer,_,A);break}case m.boolean:V=n.sqlite3_bind_int(a.pointer,_,A?1:0);break;case m.blob:{if(typeof A=="string"){V=s._.string(a,_,A,!0);break}else A instanceof ArrayBuffer?A=new Uint8Array(A):o.isBindableTypedArray(A)||i("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const Z=r.alloc(A.byteLength||1);r.heap8().set(A.byteLength?A:[0],Z),V=n.sqlite3_bind_blob(a.pointer,_,Z,A.byteLength,n.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",A),i("Unsupported bind() argument type: "+typeof A)}return V&&p.checkRc(a.db.pointer,V),a._mayGet=!1,a};w.prototype={finalize:function(){if(this.pointer){P(this,"finalize()");const s=n.sqlite3_finalize(this.pointer);return delete g.get(this.db)[this.pointer],h.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,s}},clearBindings:function(){return P(c(this),"clearBindings()"),n.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(s){P(this,"reset()"),s&&this.clearBindings();const a=n.sqlite3_reset(c(this).pointer);return this._mayGet=!1,C(this.db,a),this},bind:function(){c(this);let s,a;switch(arguments.length){case 1:s=1,a=arguments[0];break;case 2:s=arguments[0],a=arguments[1];break;default:i("Invalid bind() arguments.")}return a===void 0?this:(this.parameterCount||i("This statement has no bindable parameters."),this._mayGet=!1,a===null?B(this,s,m.null,a):Array.isArray(a)?(arguments.length!==1&&i("When binding an array, an index argument is not permitted."),a.forEach((_,d)=>B(this,d+1,b(_),_)),this):(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),typeof a=="object"&&!o.isBindableTypedArray(a)?(arguments.length!==1&&i("When binding an object, an index argument is not permitted."),Object.keys(a).forEach(_=>B(this,_,b(a[_]),a[_])),this):B(this,s,b(a),a)))},bindAsBlob:function(s,a){c(this),arguments.length===1&&(a=s,s=1);const _=b(a);return m.string!==_&&m.blob!==_&&m.null!==_&&i("Invalid value type for bindAsBlob()"),B(this,s,m.blob,a)},step:function(){P(this,"step()");const s=n.sqlite3_step(c(this).pointer);switch(s){case n.SQLITE_DONE:return this._mayGet=!1;case n.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",s,n.sqlite3_js_rc_str(s),"SQL =",n.sqlite3_sql(this.pointer)),p.checkRc(this.db.pointer,s)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const s=this.step();return this.reset(),s}finally{try{this.finalize()}catch{}}},get:function(s,a){if(c(this)._mayGet||i("Stmt.step() has not (recently) returned true."),Array.isArray(s)){let _=0;const d=this.columnCount;for(;_<d;)s[_]=this.get(_++);return s}else if(s&&typeof s=="object"){let _=0;const d=this.columnCount;for(;_<d;)s[n.sqlite3_column_name(this.pointer,_)]=this.get(_++);return s}switch(F(this,s),a===void 0?n.sqlite3_column_type(this.pointer,s):a){case n.SQLITE_NULL:return null;case n.SQLITE_INTEGER:if(r.bigIntEnabled){const _=n.sqlite3_column_int64(this.pointer,s);return _>=Number.MIN_SAFE_INTEGER&&_<=Number.MAX_SAFE_INTEGER?Number(_).valueOf():_}else{const _=n.sqlite3_column_double(this.pointer,s);return(_>Number.MAX_SAFE_INTEGER||_<Number.MIN_SAFE_INTEGER)&&i("Integer is out of range for JS integer range: "+_),o.isInt32(_)?_|0:_}case n.SQLITE_FLOAT:return n.sqlite3_column_double(this.pointer,s);case n.SQLITE_TEXT:return n.sqlite3_column_text(this.pointer,s);case n.SQLITE_BLOB:{const _=n.sqlite3_column_bytes(this.pointer,s),d=n.sqlite3_column_blob(this.pointer,s),A=new Uint8Array(_);return _&&A.set(r.heap8u().slice(d,d+_),0),_&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(A.buffer),A}default:i("Don't know how to translate","type of result column #"+s+".")}i("Not reached.")},getInt:function(s){return this.get(s,n.SQLITE_INTEGER)},getFloat:function(s){return this.get(s,n.SQLITE_FLOAT)},getString:function(s){return this.get(s,n.SQLITE_TEXT)},getBlob:function(s){return this.get(s,n.SQLITE_BLOB)},getJSON:function(s){const a=this.get(s,n.SQLITE_STRING);return a===null?a:JSON.parse(a)},getColumnName:function(s){return n.sqlite3_column_name(F(c(this),s).pointer,s)},getColumnNames:function(s=[]){F(c(this),0);const a=this.columnCount;for(let _=0;_<a;++_)s.push(n.sqlite3_column_name(this.pointer,_));return s},getParamIndex:function(s){return c(this).parameterCount?n.sqlite3_bind_parameter_index(this.pointer,s):void 0},getParamName:function(s){return c(this).parameterCount?n.sqlite3_bind_parameter_name(this.pointer,s):void 0},isBusy:function(){return n.sqlite3_stmt_busy(c(this))!==0},isReadOnly:function(){return n.sqlite3_stmt_readonly(c(this))!==0}};{const s={enumerable:!0,get:function(){return h.get(this)},set:()=>i("The pointer property is read-only.")};Object.defineProperty(w.prototype,"pointer",s),Object.defineProperty(p.prototype,"pointer",s)}if(Object.defineProperty(w.prototype,"columnCount",{enumerable:!1,get:function(){return n.sqlite3_column_count(this.pointer)},set:()=>i("The columnCount property is read-only.")}),t.oo1={DB:p,Stmt:w},o.isUIThread()){t.oo1.JsStorageDb=function(a="session"){const _=M.normalizeArgs(...arguments);a=_.filename,a!=="session"&&a!=="local"&&i("JsStorageDb db name must be one of 'session' or 'local'."),_.vfs="kvvfs",M.call(this,_)};const s=t.oo1.JsStorageDb;s.prototype=Object.create(p.prototype),s.clearStorage=n.sqlite3_js_kvvfs_clear,s.prototype.clearStorage=function(){return s.clearStorage(T(this).filename)},s.storageSize=n.sqlite3_js_kvvfs_size,s.prototype.storageSize=function(){return s.storageSize(T(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=t.util;t.initWorker1API=(function(){const n=(...x)=>{throw new Error(x.join(" "))};globalThis.WorkerGlobalScope instanceof Function||n("initWorker1API() must be run from a Worker thread.");const r=this.sqlite3||n("Missing this.sqlite3 object."),o=r.oo1.DB,h=function(x){let E=g.idMap.get(x);return E||(E="db#"+ ++g.idSeq+"@"+x.pointer,g.idMap.set(x,E),E)},g={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(x){const E=new o(x);return this.dbs[h(E)]=E,this.dbList.indexOf(E)<0&&this.dbList.push(E),E},close:function(x,E){if(x){delete this.dbs[h(x)];const M=x.filename,p=i.sqlite3__wasm_db_vfs(x.pointer,0);x.close();const m=this.dbList.indexOf(x);m>=0&&this.dbList.splice(m,1),E&&M&&p&&i.sqlite3__wasm_vfs_unlink(p,M)}},post:function(x,E){E&&E.length?(globalThis.postMessage(x,Array.from(E)),E.length=0):globalThis.postMessage(x)},dbs:Object.create(null),getDb:function(x,E=!0){return this.dbs[x]||(E?n("Unknown (or closed) DB ID:",x):void 0)}},L=function(x=g.dbList[0]){return x&&x.pointer?x:n("DB is not opened.")},C=function(x,E=!0){const M=g.getDb(x.dbId,!1)||g.dbList[0];return E?L(M):M},z=function(){return g.dbList[0]&&h(g.dbList[0])},W={open:function(x){const E=Object.create(null),M=x.args||Object.create(null);M.simulateError&&n("Throwing because of simulateError flag.");const p=Object.create(null);E.vfs=M.vfs,E.filename=M.filename||"";const m=g.open(E);return p.filename=m.filename,p.persistent=!!r.capi.sqlite3_js_db_uses_vfs(m.pointer,"opfs"),p.dbId=h(m),p.vfs=m.dbVfsName(),p},close:function(x){const E=C(x,!1),M={filename:E&&E.filename};if(E){const p=x.args&&typeof x.args=="object"?!!x.args.unlink:!1;g.close(E,p)}return M},exec:function(x){const E=typeof x.args=="string"?{sql:x.args}:x.args||Object.create(null);E.rowMode==="stmt"?n("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):E.sql||n("'exec' requires input SQL.");const M=C(x);(E.callback||Array.isArray(E.resultRows))&&(M._blobXfer=g.xfer);const p=E.callback;let m=0;const w=!!E.columnNames;typeof p=="string"&&(w||(E.columnNames=[]),E.callback=function(T,F){g.post({type:p,columnNames:E.columnNames,rowNumber:++m,row:T},g.xfer)});try{const T=E.countChanges?M.changes(!0,E.countChanges===64):void 0;M.exec(E),T!==void 0&&(E.changeCount=M.changes(!0,E.countChanges===64)-T);const F=E.lastInsertRowId?r.capi.sqlite3_last_insert_rowid(M):void 0;F!==void 0&&(E.lastInsertRowId=F),E.callback instanceof Function&&(E.callback=p,g.post({type:p,columnNames:E.columnNames,rowNumber:null,row:void 0}))}finally{delete M._blobXfer,E.callback&&(E.callback=p)}return E},"config-get":function(){const x=Object.create(null),E=r.config;return["bigIntEnabled"].forEach(function(M){Object.getOwnPropertyDescriptor(E,M)&&(x[M]=E[M])}),x.version=r.version,x.vfsList=r.capi.sqlite3_js_vfs_list(),x},export:function(x){const E=C(x),M={byteArray:r.capi.sqlite3_js_db_export(E.pointer),filename:E.filename,mimetype:"application/x-sqlite3"};return g.xfer.push(M.byteArray.buffer),M},toss:function(x){n("Testing worker exception")}};globalThis.onmessage=async function(x){x=x.data;let E,M=x.dbId,p=x.type;const m=performance.now();try{W.hasOwnProperty(p)&&W[p]instanceof Function?E=await W[p](x):n("Unknown db worker message type:",x.type)}catch(w){p="error",E={operation:x.type,message:w.message,errorClass:w.name,input:x},w.stack&&(E.stack=typeof w.stack=="string"?w.stack.split(/\n\s*/):w.stack)}M||(M=E.dbId||z()),g.post({type:p,dbId:M,messageId:x.messageId,workerReceivedTime:m,workerRespondTime:performance.now(),departureTime:x.departureTime,result:E},g.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=t.wasm,n=t.capi,r=t.util.toss3,o=Object.create(null);t.vfs=o,n.sqlite3_vfs.prototype.registerVfs=function(h=!1){this instanceof t.capi.sqlite3_vfs||r("Expecting a sqlite3_vfs-type argument.");const g=n.sqlite3_vfs_register(this,h?1:0);return g&&r("sqlite3_vfs_register(",this,") failed with rc",g),this.pointer!==n.sqlite3_vfs_find(this.$zName)&&r("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},o.installVfs=function(h){let g=0;const L=["io","vfs"];for(const C of L){const z=h[C];z&&(++g,z.struct.installMethods(z.methods,!!z.applyArgcCheck),C==="vfs"&&(!z.struct.$zName&&typeof z.name=="string"&&z.struct.addOnDispose(z.struct.$zName=i.allocCString(z.name)),z.struct.registerVfs(!!z.asDefault)))}return g||r("Misuse: installVfs() options object requires at least","one of:",L),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;const i=t.wasm,n=t.capi,r=t.util.toss3,o=Object.create(null);t.vtab=o;const h=n.sqlite3_index_info;h.prototype.nthConstraint=function(C,z=!1){if(C<0||C>=this.$nConstraint)return!1;const W=this.$aConstraint+h.sqlite3_index_constraint.structInfo.sizeof*C;return z?W:new h.sqlite3_index_constraint(W)},h.prototype.nthConstraintUsage=function(C,z=!1){if(C<0||C>=this.$nConstraint)return!1;const W=this.$aConstraintUsage+h.sqlite3_index_constraint_usage.structInfo.sizeof*C;return z?W:new h.sqlite3_index_constraint_usage(W)},h.prototype.nthOrderBy=function(C,z=!1){if(C<0||C>=this.$nOrderBy)return!1;const W=this.$aOrderBy+h.sqlite3_index_orderby.structInfo.sizeof*C;return z?W:new h.sqlite3_index_orderby(W)};const g=function(C,z){return(function(W,x=!1){if(arguments.length===0&&(W=new z),W instanceof z)return this.set(W.pointer,W),W;i.isPtr(W)||t.SQLite3Error.toss("Invalid argument to",C+"()");let E=this.get(W);return x&&this.delete(W),E}).bind(new Map)},L=function(C,z){const W=g(C,z);return Object.assign(Object.create(null),{StructType:z,create:x=>{const E=W();return i.pokePtr(x,E.pointer),E},get:x=>W(x),unget:x=>W(x,!0),dispose:x=>{const E=W(x,!0);E&&E.dispose()}})};o.xVtab=L("xVtab",n.sqlite3_vtab),o.xCursor=L("xCursor",n.sqlite3_vtab_cursor),o.xIndexInfo=C=>new n.sqlite3_index_info(C),o.xError=function C(z,W,x){if(C.errorReporter instanceof Function)try{C.errorReporter("sqlite3_module::"+z+"(): "+W.message)}catch{}let E;return W instanceof t.WasmAllocError?E=n.SQLITE_NOMEM:arguments.length>2?E=x:W instanceof t.SQLite3Error&&(E=W.resultCode),E||n.SQLITE_ERROR},o.xError.errorReporter=console.error.bind(console),o.xRowid=(C,z)=>i.poke(C,z,"i64"),o.setupModule=function(C){let z=!1;const W=this instanceof n.sqlite3_module?this:C.struct||(z=new n.sqlite3_module);try{const x=C.methods||r("Missing 'methods' object.");for(const E of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const M=E[0],p=E[1];x[M]===!0?x[M]=x[p]:x[p]===!0&&(x[p]=x[M])}if(C.catchExceptions){const E=function(m,w){return["xConnect","xCreate"].indexOf(m)>=0?function(T,F,S,D,$,c){try{return w(...arguments)||0}catch(f){return f instanceof t.WasmAllocError||(i.dealloc(i.peekPtr(c)),i.pokePtr(c,i.allocCString(f.message))),o.xError(m,f)}}:function(...T){try{return w(...T)||0}catch(F){return o.xError(m,F)}}},M=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],p=Object.create(null);for(const m of M){const w=x[m];if(w instanceof Function)m==="xConnect"&&x.xCreate===w?p[m]=x.xCreate:m==="xCreate"&&x.xConnect===w?p[m]=x.xConnect:p[m]=E(m,w);else continue}W.installMethods(p,!1)}else W.installMethods(x,!!C.applyArgcCheck);if(W.$iVersion===0){let E;typeof C.iVersion=="number"?E=C.iVersion:W.$xShadowName?E=3:W.$xSavePoint||W.$xRelease||W.$xRollbackTo?E=2:E=1,W.$iVersion=E}}catch(x){throw z&&z.dispose(),x}return W},n.sqlite3_module.prototype.setupModule=function(C){return o.setupModule.call(this,C)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=function n(r){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!r||typeof r!="object")&&(r=Object.create(null));const o=new URL(globalThis.location.href).searchParams;return o.has("opfs-disable")?Promise.resolve(t):(r.verbose===void 0&&(r.verbose=o.has("opfs-verbose")?+o.get("opfs-verbose")||2:1),r.sanityChecks===void 0&&(r.sanityChecks=o.has("opfs-sanity-check")),r.proxyUri===void 0&&(r.proxyUri=n.defaultProxyUri),typeof r.proxyUri=="function"&&(r.proxyUri=r.proxyUri()),new Promise(function(g,L){const C=[t.config.error,t.config.warn,t.config.log],z=(q,...O)=>{r.verbose>q&&C[q]("OPFS syncer:",...O)},W=(...q)=>z(2,...q),x=(...q)=>z(1,...q),E=(...q)=>z(0,...q),M=t.util.toss,p=t.capi,m=t.util,w=t.wasm,T=p.sqlite3_vfs,F=p.sqlite3_file,S=p.sqlite3_io_methods,D=Object.create(null),$=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;D.metrics={dump:function(){let q,O=0,N=0,J=0;for(q in _.opIds){const G=d[q];O+=G.count,N+=G.time,J+=G.wait,G.avgTime=G.count&&G.time?G.time/G.count:0,G.avgWait=G.count&&G.wait?G.wait/G.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",d,`
Total of`,O,"op(s) for",N,"ms (incl. "+J+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",d.s11n),B.postMessage({type:"opfs-async-metrics"})},reset:function(){let q;const O=J=>J.count=J.time=J.wait=0;for(q in _.opIds)O(d[q]=Object.create(null));let N=d.s11n=Object.create(null);N=N.serialize=Object.create(null),N.count=N.time=0,N=d.s11n.deserialize=Object.create(null),N.count=N.time=0}};const c=new S,f=new T().addOnDispose(()=>c.dispose());let b;const j=q=>(b=!0,f.dispose(),L(q)),P=()=>(b=!1,g(t)),B=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",self.location.href));setTimeout(()=>{b===void 0&&j(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),B._originalOnError=B.onerror,B.onerror=function(q){E("Error initializing OPFS asyncer:",q),j(new Error("Loading OPFS async Worker failed for unknown reasons."))};const s=p.sqlite3_vfs_find(null),a=s?new T(s):null;c.$iVersion=1,f.$iVersion=2,f.$szOsFile=p.sqlite3_file.structInfo.sizeof,f.$mxPathname=1024,f.$zName=w.allocCString("opfs"),f.$xDlOpen=f.$xDlError=f.$xDlSym=f.$xDlClose=null,f.addOnDispose("$zName",f.$zName,"cleanup default VFS wrapper",()=>a?a.dispose():null);const _=Object.create(null);_.verbose=r.verbose,_.littleEndian=(()=>{const q=new ArrayBuffer(2);return new DataView(q).setInt16(0,256,!0),new Int16Array(q)[0]===256})(),_.asyncIdleWaitTime=150,_.asyncS11nExceptions=1,_.fileBufferSize=1024*64,_.sabS11nOffset=_.fileBufferSize,_.sabS11nSize=f.$mxPathname*2,_.sabIO=new SharedArrayBuffer(_.fileBufferSize+_.sabS11nSize),_.opIds=Object.create(null);const d=Object.create(null);{let q=0;_.opIds.whichOp=q++,_.opIds.rc=q++,_.opIds.xAccess=q++,_.opIds.xClose=q++,_.opIds.xDelete=q++,_.opIds.xDeleteNoWait=q++,_.opIds.xFileSize=q++,_.opIds.xLock=q++,_.opIds.xOpen=q++,_.opIds.xRead=q++,_.opIds.xSleep=q++,_.opIds.xSync=q++,_.opIds.xTruncate=q++,_.opIds.xUnlock=q++,_.opIds.xWrite=q++,_.opIds.mkdir=q++,_.opIds["opfs-async-metrics"]=q++,_.opIds["opfs-async-shutdown"]=q++,_.opIds.retry=q++,_.sabOP=new SharedArrayBuffer(q*4),D.metrics.reset()}_.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(q=>{(_.sq3Codes[q]=p[q])===void 0&&M("Maintenance required: not found:",q)}),_.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const A=(q,...O)=>{const N=_.opIds[q]||M("Invalid op ID:",q);_.s11n.serialize(...O),Atomics.store(_.sabOPView,_.opIds.rc,-1),Atomics.store(_.sabOPView,_.opIds.whichOp,N),Atomics.notify(_.sabOPView,_.opIds.whichOp);const J=performance.now();for(;Atomics.wait(_.sabOPView,_.opIds.rc,-1)!=="not-equal";);const G=Atomics.load(_.sabOPView,_.opIds.rc);if(d[q].wait+=performance.now()-J,G&&_.asyncS11nExceptions){const te=_.s11n.deserialize();te&&E(q+"() async error:",...te)}return G};D.debug={asyncShutdown:()=>{x("Shutting down OPFS async listener. The OPFS VFS will no longer work."),A("opfs-async-shutdown")},asyncRestart:()=>{x("Attempting to restart OPFS VFS async listener. Might work, might not."),B.postMessage({type:"opfs-async-restart"})}};const V=()=>{if(_.s11n)return _.s11n;const q=new TextDecoder,O=new TextEncoder("utf-8"),N=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),J=new DataView(_.sabIO,_.sabS11nOffset,_.sabS11nSize);_.s11n=Object.create(null);const G=Object.create(null);G.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},G.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},G.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},G.string={id:4};const te=Y=>G[typeof Y]||M("Maintenance required: this value type cannot be serialized.",Y),oe=Y=>{switch(Y){case G.number.id:return G.number;case G.bigint.id:return G.bigint;case G.boolean.id:return G.boolean;case G.string.id:return G.string;default:M("Invalid type ID:",Y)}};return _.s11n.deserialize=function(Y=!1){++d.s11n.deserialize.count;const de=performance.now(),k=N[0],H=k?[]:null;if(k){const K=[];let X=1,ae,fe,_e;for(ae=0;ae<k;++ae,++X)K.push(oe(N[X]));for(ae=0;ae<k;++ae){const ue=K[ae];ue.getter?(_e=J[ue.getter](X,_.littleEndian),X+=ue.size):(fe=J.getInt32(X,_.littleEndian),X+=4,_e=q.decode(N.slice(X,X+fe)),X+=fe),H.push(_e)}}return Y&&(N[0]=0),d.s11n.deserialize.time+=performance.now()-de,H},_.s11n.serialize=function(...Y){const de=performance.now();if(++d.s11n.serialize.count,Y.length){const k=[];let H=0,K=1;for(N[0]=Y.length&255;H<Y.length;++H,++K)k.push(te(Y[H])),N[K]=k[H].id;for(H=0;H<Y.length;++H){const X=k[H];if(X.setter)J[X.setter](K,Y[H],_.littleEndian),K+=X.size;else{const ae=O.encode(Y[H]);J.setInt32(K,ae.byteLength,_.littleEndian),K+=4,N.set(ae,K),K+=ae.byteLength}}}else N[0]=0;d.s11n.serialize.time+=performance.now()-de},_.s11n},Z=function q(O=16){q._chars||(q._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",q._n=q._chars.length);const N=[];let J=0;for(;J<O;++J){const G=Math.random()*(q._n*64)%q._n|0;N[J]=q._chars[G]}return N.join("")},re=Object.create(null),ne=Object.create(null);ne.op=void 0,ne.start=void 0;const U=q=>{ne.start=performance.now(),ne.op=q,++d[q].count},y=()=>d[ne.op].time+=performance.now()-ne.start,I={xCheckReservedLock:function(q,O){return w.poke(O,0,"i32"),0},xClose:function(q){U("xClose");let O=0;const N=re[q];return N&&(delete re[q],O=A("xClose",q),N.sq3File&&N.sq3File.dispose()),y(),O},xDeviceCharacteristics:function(q){return p.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(q,O,N){return p.SQLITE_NOTFOUND},xFileSize:function(q,O){U("xFileSize");let N=A("xFileSize",q);if(N==0)try{const J=_.s11n.deserialize()[0];w.poke(O,J,"i64")}catch(J){E("Unexpected error reading xFileSize() result:",J),N=_.sq3Codes.SQLITE_IOERR}return y(),N},xLock:function(q,O){U("xLock");const N=re[q];let J=0;return N.lockType?N.lockType=O:(J=A("xLock",q,O),J===0&&(N.lockType=O)),y(),J},xRead:function(q,O,N,J){U("xRead");const G=re[q];let te;try{te=A("xRead",q,N,Number(J)),(te===0||p.SQLITE_IOERR_SHORT_READ===te)&&w.heap8u().set(G.sabView.subarray(0,N),O)}catch(oe){E("xRead(",arguments,") failed:",oe,G),te=p.SQLITE_IOERR_READ}return y(),te},xSync:function(q,O){U("xSync"),++d.xSync.count;const N=A("xSync",q,O);return y(),N},xTruncate:function(q,O){U("xTruncate");const N=A("xTruncate",q,Number(O));return y(),N},xUnlock:function(q,O){U("xUnlock");const N=re[q];let J=0;return p.SQLITE_LOCK_NONE===O&&N.lockType&&(J=A("xUnlock",q,O)),J===0&&(N.lockType=O),y(),J},xWrite:function(q,O,N,J){U("xWrite");const G=re[q];let te;try{G.sabView.set(w.heap8u().subarray(O,O+N)),te=A("xWrite",q,N,Number(J))}catch(oe){E("xWrite(",arguments,") failed:",oe,G),te=p.SQLITE_IOERR_WRITE}return y(),te}},R={xAccess:function(q,O,N,J){U("xAccess");const G=A("xAccess",w.cstrToJs(O));return w.poke(J,G?0:1,"i32"),y(),0},xCurrentTime:function(q,O){return w.poke(O,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(q,O){return w.poke(O,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(q,O,N){U("xDelete");const J=A("xDelete",w.cstrToJs(O),N,!1);return y(),J},xFullPathname:function(q,O,N,J){return w.cstrncpy(J,O,N)<N?0:p.SQLITE_CANTOPEN},xGetLastError:function(q,O,N){return x("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(O,N,J,G,te){U("xOpen");let oe=0;N===0?N=Z():w.isPtr(N)&&(p.sqlite3_uri_boolean(N,"opfs-unlock-asap",0)&&(oe|=_.opfsFlags.OPFS_UNLOCK_ASAP),p.sqlite3_uri_boolean(N,"delete-before-open",0)&&(oe|=_.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),N=w.cstrToJs(N));const Y=Object.create(null);Y.fid=J,Y.filename=N,Y.sab=new SharedArrayBuffer(_.fileBufferSize),Y.flags=G,Y.readOnly=!(t.SQLITE_OPEN_CREATE&G)&&!!(G&p.SQLITE_OPEN_READONLY);const de=A("xOpen",J,N,G,oe);return de||(Y.readOnly&&w.poke(te,p.SQLITE_OPEN_READONLY,"i32"),re[J]=Y,Y.sabView=_.sabFileBufView,Y.sq3File=new F(J),Y.sq3File.$pMethods=c.pointer,Y.lockType=p.SQLITE_LOCK_NONE),y(),de}};a&&(f.$xRandomness=a.$xRandomness,f.$xSleep=a.$xSleep),f.$xRandomness||(R.xRandomness=function(q,O,N){const J=w.heap8u();let G=0;for(;G<O;++G)J[N+G]=Math.random()*255e3&255;return G}),f.$xSleep||(R.xSleep=function(q,O){return Atomics.wait(_.sabOPView,_.opIds.xSleep,0,O),0}),D.getResolvedPath=function(q,O){const N=new URL(q,"file://irrelevant").pathname;return O?N.split("/").filter(J=>!!J):N},D.getDirForFilename=async function(O,N=!1){const J=D.getResolvedPath(O,!0),G=J.pop();let te=D.rootDirectory;for(const oe of J)oe&&(te=await te.getDirectoryHandle(oe,{create:!!N}));return[te,G]},D.mkdir=async function(q){try{return await D.getDirForFilename(q+"/filepart",!0),!0}catch{return!1}},D.entryExists=async function(q){try{const[O,N]=await D.getDirForFilename(q);return await O.getFileHandle(N),!0}catch{return!1}},D.randomFilename=Z,D.treeList=async function(){const q=async function N(J,G){G.name=J.name,G.dirs=[],G.files=[];for await(const te of J.values())if(te.kind==="directory"){const oe=Object.create(null);G.dirs.push(oe),await N(te,oe)}else G.files.push(te.name)},O=Object.create(null);return await q(D.rootDirectory,O),O},D.rmfr=async function(){const q=D.rootDirectory,O={recurse:!0};for await(const N of q.values())q.removeEntry(N.name,O)},D.unlink=async function(q,O=!1,N=!1){try{const[J,G]=await D.getDirForFilename(q,!1);return await J.removeEntry(G,{recursive:O}),!0}catch(J){if(N)throw new Error("unlink(",arguments[0],") failed: "+J.message,{cause:J});return!1}},D.traverse=async function(q){const O={recursive:!0,directory:D.rootDirectory};typeof q=="function"&&(q={callback:q}),q=Object.assign(O,q||{}),async function J(G,te){for await(const oe of G.values()){if(q.callback(oe,G,te)===!1)return!1;if(q.recursive&&oe.kind==="directory"&&await J(oe,te+1)===!1)break}}(q.directory,0)};const Q=async function(q,O){const[N,J]=await D.getDirForFilename(q,!0);let te=await(await N.getFileHandle(J,{create:!0})).createSyncAccessHandle(),oe=0,Y,de=!1;try{for(te.truncate(0);(Y=await O())!==void 0;)Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y)),oe===0&&Y.byteLength>=15&&(m.affirmDbHeader(Y),de=!0),te.write(Y,{at:oe}),oe+=Y.byteLength;if((oe<512||oe%512!==0)&&M("Input size",oe,"is not correct for an SQLite database."),!de){const k=new Uint8Array(20);te.read(k,{at:0}),m.affirmDbHeader(k)}return te.write(new Uint8Array([1,1]),{at:18}),oe}catch(k){throw await te.close(),te=void 0,await N.removeEntry(J).catch(()=>{}),k}finally{te&&await te.close()}};if(D.importDb=async function(q,O){if(O instanceof Function)return Q(q,O);O instanceof ArrayBuffer&&(O=new Uint8Array(O)),m.affirmIsDb(O);const N=O.byteLength,[J,G]=await D.getDirForFilename(q,!0);let te,oe=0;try{return te=await(await J.getFileHandle(G,{create:!0})).createSyncAccessHandle(),te.truncate(0),oe=te.write(O,{at:0}),oe!=N&&M("Expected to write "+N+" bytes but wrote "+oe+"."),te.write(new Uint8Array([1,1]),{at:18}),oe}catch(Y){throw te&&(await te.close(),te=void 0),await J.removeEntry(G).catch(()=>{}),Y}finally{te&&await te.close()}},t.oo1){const q=function(...O){const N=t.oo1.DB.dbCtorHelper.normalizeArgs(...O);N.vfs=f.$zName,t.oo1.DB.dbCtorHelper.call(this,N)};q.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=q,q.importDb=D.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(f.pointer,function(O,N){N.capi.sqlite3_busy_timeout(O,1e4)})}const ee=function(){const q=w.scopedAllocPush(),O=new F;try{const N=O.pointer,J=p.SQLITE_OPEN_CREATE|p.SQLITE_OPEN_READWRITE|p.SQLITE_OPEN_MAIN_DB,G=w.scopedAlloc(8),te="/sanity/check/file"+Z(8),oe=w.scopedAllocCString(te);let Y;if(_.s11n.serialize("This is  string."),Y=_.s11n.deserialize(),W("deserialize() says:",Y),Y[0]!=="This is  string."&&M("String d13n error."),R.xAccess(f.pointer,oe,0,G),Y=w.peek(G,"i32"),W("xAccess(",te,") exists ?=",Y),Y=R.xOpen(f.pointer,oe,N,J,G),W("open rc =",Y,"state.sabOPView[xOpen] =",_.sabOPView[_.opIds.xOpen]),Y!==0){E("open failed with code",Y);return}R.xAccess(f.pointer,oe,0,G),Y=w.peek(G,"i32"),Y||M("xAccess() failed to detect file."),Y=I.xSync(O.pointer,0),Y&&M("sync failed w/ rc",Y),Y=I.xTruncate(O.pointer,1024),Y&&M("truncate failed w/ rc",Y),w.poke(G,0,"i64"),Y=I.xFileSize(O.pointer,G),Y&&M("xFileSize failed w/ rc",Y),W("xFileSize says:",w.peek(G,"i64")),Y=I.xWrite(O.pointer,oe,10,1),Y&&M("xWrite() failed!");const de=w.scopedAlloc(16);Y=I.xRead(O.pointer,de,6,2),w.poke(de+6,0);let k=w.cstrToJs(de);W("xRead() got:",k),k!=="sanity"&&M("Unexpected xRead() value."),R.xSleep&&(W("xSleep()ing before close()ing..."),R.xSleep(f.pointer,2e3),W("waking up from xSleep()")),Y=I.xClose(N),W("xClose rc =",Y,"sabOPView =",_.sabOPView),W("Deleting file:",te),R.xDelete(f.pointer,oe,4660),R.xAccess(f.pointer,oe,0,G),Y=w.peek(G,"i32"),Y&&M("Expecting 0 from xAccess(",te,") after xDelete()."),x("End of OPFS sanity checks.")}finally{O.dispose(),w.scopedAllocPop(q)}};B.onmessage=function({data:q}){switch(q.type){case"opfs-unavailable":j(new Error(q.payload.join(" ")));break;case"opfs-async-loaded":B.postMessage({type:"opfs-async-init",args:_});break;case"opfs-async-inited":{if(b===!0)break;try{t.vfs.installVfs({io:{struct:c,methods:I},vfs:{struct:f,methods:R}}),_.sabOPView=new Int32Array(_.sabOP),_.sabFileBufView=new Uint8Array(_.sabIO,0,_.fileBufferSize),_.sabS11nView=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),V(),r.sanityChecks&&(x("Running sanity checks because of opfs-sanity-check URL arg..."),ee()),$()?navigator.storage.getDirectory().then(O=>{B.onerror=B._originalOnError,delete B._originalOnError,t.opfs=D,D.rootDirectory=O,W("End of OPFS sqlite3_vfs setup.",f),P()}).catch(j):P()}catch(O){E(O),j(O)}break}default:{const O="Unexpected message from the OPFS async worker: "+JSON.stringify(q);E(O),j(new Error(O));break}}}}))};i.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async n=>{try{let r=i.defaultProxyUri;return n.scriptInfo.sqlite3Dir&&(i.defaultProxyUri=n.scriptInfo.sqlite3Dir+r),i().catch(o=>{n.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",o.message)})}catch(r){return n.config.error("installOpfsVfs() exception:",r),Promise.reject(r)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=t.util.toss,n=t.util.toss3,r=Object.create(null),o=t.capi,h=t.util,g=t.wasm,L=4096,C=512,z=4,W=8,x=C+z,E=C,M=x,p=L,m=o.SQLITE_OPEN_MAIN_DB|o.SQLITE_OPEN_MAIN_JOURNAL|o.SQLITE_OPEN_SUPER_JOURNAL|o.SQLITE_OPEN_WAL,w=o.SQLITE_OPEN_MEMORY,T=".opaque",F=()=>Math.random().toString(36).slice(2),S=new TextDecoder,D=new TextEncoder,$=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),c=[t.config.error,t.config.warn,t.config.log];t.config.log;const f=t.config.warn;t.config.error;const b=new Map,j=U=>b.get(U),P=(U,y)=>{y?b.set(U,y):b.delete(U)},B=new Map,s=U=>B.get(U),a=(U,y)=>{y?B.set(U,y):B.delete(U)},_={xCheckReservedLock:function(U,y){const I=s(U);return I.log("xCheckReservedLock"),I.storeErr(),g.poke32(y,1),0},xClose:function(U){const y=s(U);y.storeErr();const I=y.getOFileForS3File(U);if(I)try{y.log(`xClose ${I.path}`),y.mapS3FileToOFile(U,!1),I.sah.flush(),I.flags&o.SQLITE_OPEN_DELETEONCLOSE&&y.deletePath(I.path)}catch(R){return y.storeErr(R,o.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(U){return o.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(U,y,I){return o.SQLITE_NOTFOUND},xFileSize:function(U,y){const I=s(U);I.log("xFileSize");const Q=I.getOFileForS3File(U).sah.getSize()-p;return g.poke64(y,BigInt(Q)),0},xLock:function(U,y){const I=s(U);I.log(`xLock ${y}`),I.storeErr();const R=I.getOFileForS3File(U);return R.lockType=y,0},xRead:function(U,y,I,R){const Q=s(U);Q.storeErr();const ee=Q.getOFileForS3File(U);Q.log(`xRead ${ee.path} ${I} @ ${R}`);try{const q=ee.sah.read(g.heap8u().subarray(y,y+I),{at:p+Number(R)});return q<I?(g.heap8u().fill(0,y+q,y+I),o.SQLITE_IOERR_SHORT_READ):0}catch(q){return Q.storeErr(q,o.SQLITE_IOERR)}},xSectorSize:function(U){return L},xSync:function(U,y){const I=s(U);I.log(`xSync ${y}`),I.storeErr();const R=I.getOFileForS3File(U);try{return R.sah.flush(),0}catch(Q){return I.storeErr(Q,o.SQLITE_IOERR)}},xTruncate:function(U,y){const I=s(U);I.log(`xTruncate ${y}`),I.storeErr();const R=I.getOFileForS3File(U);try{return R.sah.truncate(p+Number(y)),0}catch(Q){return I.storeErr(Q,o.SQLITE_IOERR)}},xUnlock:function(U,y){const I=s(U);I.log("xUnlock");const R=I.getOFileForS3File(U);return R.lockType=y,0},xWrite:function(U,y,I,R){const Q=s(U);Q.storeErr();const ee=Q.getOFileForS3File(U);Q.log(`xWrite ${ee.path} ${I} ${R}`);try{const q=ee.sah.write(g.heap8u().subarray(y,y+I),{at:p+Number(R)});return I===q?0:i("Unknown write() failure.")}catch(q){return Q.storeErr(q,o.SQLITE_IOERR)}}},d=new o.sqlite3_io_methods;d.$iVersion=1,t.vfs.installVfs({io:{struct:d,methods:_}});const A={xAccess:function(U,y,I,R){const Q=j(U);Q.storeErr();try{const ee=Q.getPath(y);g.poke32(R,Q.hasFilename(ee)?1:0)}catch{g.poke32(R,0)}return 0},xCurrentTime:function(U,y){return g.poke(y,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(U,y){return g.poke(y,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(U,y,I){const R=j(U);R.log(`xDelete ${g.cstrToJs(y)}`),R.storeErr();try{return R.deletePath(R.getPath(y)),0}catch(Q){return R.storeErr(Q),o.SQLITE_IOERR_DELETE}},xFullPathname:function(U,y,I,R){return g.cstrncpy(R,y,I)<I?0:o.SQLITE_CANTOPEN},xGetLastError:function(U,y,I){const R=j(U),Q=R.popErr();if(R.log(`xGetLastError ${y} e =`,Q),Q){const ee=g.scopedAllocPush();try{const[q,O]=g.scopedAllocCString(Q.message,!0);g.cstrncpy(I,q,y),O>y&&g.poke8(I+y-1,0)}catch{return o.SQLITE_NOMEM}finally{g.scopedAllocPop(ee)}}return Q?Q.sqlite3Rc||o.SQLITE_IOERR:0},xOpen:function(y,I,R,Q,ee){const q=j(y);try{Q&=~w,q.log(`xOpen ${g.cstrToJs(I)} ${Q}`);const O=I&&g.peek8(I)?q.getPath(I):F();let N=q.getSAHForPath(O);!N&&Q&o.SQLITE_OPEN_CREATE&&(q.getFileCount()<q.getCapacity()?(N=q.nextAvailableSAH(),q.setAssociatedPath(N,O,Q)):i("SAH pool is full. Cannot create file",O)),N||i("file not found:",O);const J={path:O,flags:Q,sah:N};q.mapS3FileToOFile(R,J),J.lockType=o.SQLITE_LOCK_NONE;const G=new o.sqlite3_file(R);return G.$pMethods=d.pointer,G.dispose(),g.poke32(ee,Q),0}catch(O){return q.storeErr(O),o.SQLITE_CANTOPEN}}},V=function(U){t.capi.sqlite3_vfs_find(U)&&n("VFS name is already registered:",U);const y=new o.sqlite3_vfs,I=o.sqlite3_vfs_find(null),R=I?new o.sqlite3_vfs(I):null;return y.$iVersion=2,y.$szOsFile=o.sqlite3_file.structInfo.sizeof,y.$mxPathname=C,y.addOnDispose(y.$zName=g.allocCString(U),()=>P(y.pointer,0)),R&&(y.$xRandomness=R.$xRandomness,y.$xSleep=R.$xSleep,R.dispose()),!y.$xRandomness&&!A.xRandomness&&(A.xRandomness=function(Q,ee,q){const O=g.heap8u();let N=0;for(;N<ee;++N)O[q+N]=Math.random()*255e3&255;return N}),!y.$xSleep&&!A.xSleep&&(A.xSleep=(Q,ee)=>0),t.vfs.installVfs({vfs:{struct:y,methods:A}}),y};class Z{vfsDir;#e;#o;#a;#r=new Map;#t=new Map;#i=new Set;#l=new Map;#n=new Uint8Array(x);#c;#s;#u;constructor(y=Object.create(null)){this.#u=y.verbosity??$.verbosity,this.vfsName=y.name||$.name,this.#s=V(this.vfsName),P(this.#s.pointer,this),this.vfsDir=y.directory||"."+this.vfsName,this.#c=new DataView(this.#n.buffer,this.#n.byteOffset),this.isReady=this.reset(!!(y.clearOnInit??$.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(y.initialCapacity||$.initialCapacity)})}#_(y,...I){this.#u>y&&c[y](this.vfsName+":",...I)}log(...y){this.#_(2,...y)}warn(...y){this.#_(1,...y)}error(...y){this.#_(0,...y)}getVfs(){return this.#s}getCapacity(){return this.#r.size}getFileCount(){return this.#t.size}getFileNames(){const y=[];for(const I of this.#t.keys())y.push(I);return y}async addCapacity(y){for(let I=0;I<y;++I){const R=F(),ee=await(await this.#o.getFileHandle(R,{create:!0})).createSyncAccessHandle();this.#r.set(ee,R),this.setAssociatedPath(ee,"",0)}return this.getCapacity()}async reduceCapacity(y){let I=0;for(const R of Array.from(this.#i)){if(I===y||this.getFileCount()===this.getCapacity())break;const Q=this.#r.get(R);R.close(),await this.#o.removeEntry(Q),this.#r.delete(R),this.#i.delete(R),++I}return I}releaseAccessHandles(){for(const y of this.#r.keys())y.close();this.#r.clear(),this.#t.clear(),this.#i.clear()}async acquireAccessHandles(y=!1){const I=[];for await(const[R,Q]of this.#o)Q.kind==="file"&&I.push([R,Q]);return Promise.all(I.map(async([R,Q])=>{try{const ee=await Q.createSyncAccessHandle();if(this.#r.set(ee,R),y)ee.truncate(p),this.setAssociatedPath(ee,"",0);else{const q=this.getAssociatedPath(ee);q?this.#t.set(q,ee):this.#i.add(ee)}}catch(ee){throw this.storeErr(ee),this.releaseAccessHandles(),ee}}))}getAssociatedPath(y){y.read(this.#n,{at:0});const I=this.#c.getUint32(E);if(this.#n[0]&&(I&o.SQLITE_OPEN_DELETEONCLOSE||(I&m)===0))return f(`Removing file with unexpected flags ${I.toString(16)}`,this.#n),this.setAssociatedPath(y,"",0),"";const R=new Uint32Array(W/4);y.read(R,{at:M});const Q=this.computeDigest(this.#n,I);if(R.every((ee,q)=>ee===Q[q])){const ee=this.#n.findIndex(q=>q===0);return ee===0&&y.truncate(p),ee?S.decode(this.#n.subarray(0,ee)):""}else return f("Disassociating file with bad digest."),this.setAssociatedPath(y,"",0),""}setAssociatedPath(y,I,R){const Q=D.encodeInto(I,this.#n);C<=Q.written+1&&i("Path too long:",I),I&&R&&(R|=w),this.#n.fill(0,Q.written,C),this.#c.setUint32(E,R);const ee=this.computeDigest(this.#n,R);y.write(this.#n,{at:0}),y.write(ee,{at:M}),y.flush(),I?(this.#t.set(I,y),this.#i.delete(y)):(y.truncate(p),this.#i.add(y))}computeDigest(y,I){if(I&w){let R=3735928559,Q=1103547991;for(const ee of y)R=Math.imul(R^ee,2654435761),Q=Math.imul(Q^ee,104729);return new Uint32Array([R>>>0,Q>>>0])}else return new Uint32Array([0,0])}async reset(y){await this.isReady;let I=await navigator.storage.getDirectory(),R;for(const Q of this.vfsDir.split("/"))Q&&(R=I,I=await I.getDirectoryHandle(Q,{create:!0}));return this.#e=I,this.#a=R,this.#o=await this.#e.getDirectoryHandle(T,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(y)}getPath(y){return g.isPtr(y)&&(y=g.cstrToJs(y)),(y instanceof URL?y:new URL(y,"file://localhost/")).pathname}deletePath(y){const I=this.#t.get(y);return I&&(this.#t.delete(y),this.setAssociatedPath(I,"",0)),!!I}storeErr(y,I){return y&&(y.sqlite3Rc=I||o.SQLITE_IOERR,this.error(y)),this.$error=y,I}popErr(){const y=this.$error;return this.$error=void 0,y}nextAvailableSAH(){const[y]=this.#i.keys();return y}getOFileForS3File(y){return this.#l.get(y)}mapS3FileToOFile(y,I){I?(this.#l.set(y,I),a(y,this)):(this.#l.delete(y),a(y,!1))}hasFilename(y){return this.#t.has(y)}getSAHForPath(y){return this.#t.get(y)}async removeVfs(){if(!this.#s.pointer||!this.#o)return!1;o.sqlite3_vfs_unregister(this.#s.pointer),this.#s.dispose(),delete r[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(T,{recursive:!0}),this.#o=void 0,await this.#a.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#a=void 0}catch(y){t.config.error(this.vfsName,"removeVfs() failed with no recovery strategy:",y)}return!0}pauseVfs(){return this.#l.size>0&&t.SQLite3Error.toss(o.SQLITE_MISUSE,"Cannot pause VFS",this.vfsName,"because it has opened files."),this.#r.size>0&&(o.sqlite3_vfs_unregister(this.vfsName),this.releaseAccessHandles()),this}isPaused(){return this.#r.size===0}async unpauseVfs(){return this.#r.size===0?this.acquireAccessHandles(!1).then(()=>o.sqlite3_vfs_register(this.#s,0),this):this}exportFile(y){const I=this.#t.get(y)||i("File not found:",y),R=I.getSize()-p,Q=new Uint8Array(R>0?R:0);if(R>0){const ee=I.read(Q,{at:p});ee!=R&&i("Expected to read "+R+" bytes but read "+ee+".")}return Q}async importDbChunked(y,I){const R=this.#t.get(y)||this.nextAvailableSAH()||i("No available handles to import to.");R.truncate(0);let Q=0,ee,q=!1;try{for(;(ee=await I())!==void 0;)ee instanceof ArrayBuffer&&(ee=new Uint8Array(ee)),Q===0&&ee.byteLength>=15&&(h.affirmDbHeader(ee),q=!0),R.write(ee,{at:p+Q}),Q+=ee.byteLength;if((Q<512||Q%512!==0)&&i("Input size",Q,"is not correct for an SQLite database."),!q){const O=new Uint8Array(20);R.read(O,{at:0}),h.affirmDbHeader(O)}R.write(new Uint8Array([1,1]),{at:p+18})}catch(O){throw this.setAssociatedPath(R,"",0),O}return this.setAssociatedPath(R,y,o.SQLITE_OPEN_MAIN_DB),Q}importDb(y,I){if(I instanceof ArrayBuffer)I=new Uint8Array(I);else if(I instanceof Function)return this.importDbChunked(y,I);const R=this.#t.get(y)||this.nextAvailableSAH()||i("No available handles to import to."),Q=I.byteLength;(Q<512||Q%512!=0)&&i("Byte array size is invalid for an SQLite db.");const ee="SQLite format 3";for(let O=0;O<ee.length;++O)ee.charCodeAt(O)!==I[O]&&i("Input does not contain an SQLite database header.");const q=R.write(I,{at:p});return q!=Q?(this.setAssociatedPath(R,"",0),i("Expected to write "+Q+" bytes but wrote "+q+".")):(R.write(new Uint8Array([1,1]),{at:p+18}),this.setAssociatedPath(R,y,o.SQLITE_OPEN_MAIN_DB)),q}}class re{#e;constructor(y){this.#e=y,this.vfsName=y.vfsName}async addCapacity(y){return this.#e.addCapacity(y)}async reduceCapacity(y){return this.#e.reduceCapacity(y)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(y){const I=this.#e.getCapacity();return I<y?this.#e.addCapacity(y-I):I}exportFile(y){return this.#e.exportFile(y)}importDb(y,I){return this.#e.importDb(y,I)}async wipeFiles(){return this.#e.reset(!0)}unlink(y){return this.#e.deletePath(y)}async removeVfs(){return this.#e.removeVfs()}pauseVfs(){return this.#e.pauseVfs(),this}async unpauseVfs(){return this.#e.unpauseVfs().then(()=>this)}isPaused(){return this.#e.isPaused()}}const ne=async()=>{const U=await navigator.storage.getDirectory(),y=".opfs-sahpool-sync-check-"+F(),Q=(await(await U.getFileHandle(y,{create:!0})).createSyncAccessHandle()).close();return await Q,await U.removeEntry(y),Q?.then&&i("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(U=Object.create(null)){U=Object.assign(Object.create(null),$,U||{});const y=U.name;if(U.$testThrowPhase1)throw U.$testThrowPhase1;if(r[y])try{return await r[y]}catch(I){if(U.forceReinitIfPreviouslyFailed)delete r[y];else throw I}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?r[y]=Promise.reject(new Error("Missing required OPFS APIs.")):r[y]=ne().then(async function(){if(U.$testThrowPhase2)throw U.$testThrowPhase2;const I=new Z(U);return I.isReady.then(async()=>{const R=new re(I);if(t.oo1){const Q=t.oo1,ee=I.getVfs(),q=function(...O){const N=Q.DB.dbCtorHelper.normalizeArgs(...O);N.vfs=ee.$zName,Q.DB.dbCtorHelper.call(this,N)};q.prototype=Object.create(Q.DB.prototype),R.OpfsSAHPoolDb=q}return I.log("VFS initialized."),R}).catch(async R=>{throw await I.removeVfs().catch(()=>{}),R})}).catch(I=>r[y]=Promise.reject(I))}}),typeof u<"u"){const t=Object.assign(Object.create(null),{exports:typeof Le>"u"?u.asm:Le,memory:u.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let i;try{i=globalThis.sqlite3ApiBootstrap()}catch(n){throw console.error("sqlite3ApiBootstrap() error:",n),n}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}u.sqlite3=i}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},at?he=u:he=new Promise((e,t)=>{ot=e,lt=t}),he};Ve=(function(){const Ae=Ve;if(!Ae)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const he=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(he.debugModule=he.urlParams.has("sqlite3.debugModule")?(...u)=>console.warn("sqlite3.debugModule:",...u):()=>{},he.urlParams.has("sqlite3.dir"))he.sqlite3Dir=he.urlParams.get("sqlite3.dir")+"/";else if(he.moduleScript){const u=he.moduleScript.src.split("/");u.pop(),he.sqlite3Dir=u.join("/")+"/"}if(globalThis.sqlite3InitModule=function u(...Te){return Ae(...Te).then(ye=>{ye.runSQLite3PostLoadInit(ye);const Fe=ye.sqlite3;Fe.scriptInfo=he,u.__isUnderTest&&(Fe.__isUnderTest=!0);const Ue=Fe.asyncPostInit;return delete Fe.asyncPostInit,Ue()}).catch(ye=>{throw console.error("Exception loading sqlite3 module:",ye),ye})},globalThis.sqlite3InitModule.ready=Ae.ready,globalThis.sqlite3InitModuleState.moduleScript){const u=globalThis.sqlite3InitModuleState;let Te=u.moduleScript.src.split("/");Te.pop(),u.scriptDir=Te.join("/")+"/"}return he.debugModule("sqlite3InitModuleState =",he),globalThis.sqlite3InitModule})();var kt=Ve;kt().then(Ae=>Ae.initWorker1API())})();
